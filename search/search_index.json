{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u5199\u5728\u524d\u9762","text":"<p>\u4f60\u597d\ud83d\udc4b\uff01</p> <p>\u672c\u5b9e\u9a8c\u6587\u6863\u4ec5\u9002\u7528\u4e8e2023-2024\u6625\u590f\u5b66\u671f\u300a\u8ba1\u7b97\u673a\u7ec4\u6210\u4e0e\u8bbe\u8ba1\u300b\u5218\u6d77\u98ce\u8001\u5e08\u73ed\u3002</p> <p>\u300a\u8ba1\u7b97\u673a\u7ec4\u6210\u4e0e\u8bbe\u8ba1\u300b\u5b9e\u9a8c\u4e3b\u8981\u5185\u5bb9\u662f\u4f7f\u7528 Verilog \u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684 32-bit RISC-V CPU Core\u3002</p> <p>\u5982\u679c\u4f60\u4fee\u8bfb\u7684\u662f\u300a\u8ba1\u7b97\u673a\u7ec4\u6210\u300b\uff0c\u8bf7\u6ce8\u610f\uff1a\u672c\u6587\u6863\u7684\u5185\u5bb9\u8981\u591a\u4e8e\u4f60\u7684\u8bfe\u7a0b\u8981\u6c42\u3002</p> <p>\ud83d\udca1\u8bf7\u5728\u7b2c\u4e00\u6b21\u5b9e\u9a8c\u8bfe\u524d\u5b89\u88c5 Vivado\uff0c\u53ef\u53c2\u8003\u201c\u70ed\u8eab\u201d\u4e2d\u201c Vivado \u5b89\u88c5\u201d\u4e00\u8282\u3002</p>"},{"location":"#_2","title":"\u66f4\u65b0\u65e5\u5fd7","text":"<p>\u8fd9\u91cc\u5c06\u8bb0\u5f55\u6700\u8fd1\u5341\u6b21\u6bd4\u8f83\u91cd\u8981\u7684\u66f4\u65b0\u3002</p> \u65f6\u95f4 \u5185\u5bb9 2024.3.7 [Update] Lab1 ALU \u90e8\u5206\u65b0\u589e\u601d\u8003\u9898 2024.2.27 [Release] Lab1 2024.2.23 [Release] Lab0 2023.12.28 Init"},{"location":"#_3","title":"\u5b9e\u9a8c\u65e5\u5386","text":"<p>\u5177\u4f53\u65f6\u95f4\u5f85\u8865\u5145</p> <ul> <li>Lab0: \u5b89\u88c5\u5e76\u4f7f\u7528 Vivado</li> <li>Lab1: \u7b80\u5355\u6a21\u5757\u8bbe\u8ba1\uff08ALU / RegFile / \u6709\u9650\u72b6\u6001\u673a\uff09</li> <li>Lab2: \u4f7f\u7528\u63d0\u4f9b\u7684IP\u6838\u642d\u5efa\u6d4b\u8bd5\u6846\u67b6</li> <li>Lab3: \u5b9e\u73b0\u4e58\u6cd5\u5668 / \u9664\u6cd5\u5668</li> <li>Lab4: \u5b9e\u73b0\u5355\u5468\u671fCPU<ul> <li>4-0: \u4f7f\u7528\u63d0\u4f9b\u7684 IP \u6838\u96c6\u6210 CPU</li> <li>4-1: \u8bbe\u8ba1\u5b9e\u73b0 Datapath</li> <li>4-2: \u8bbe\u8ba1\u5b9e\u73b0 Control-Unit</li> <li>4-3: \u62d3\u5c55\u6307\u4ee4</li> <li>4-4: \u5b9e\u73b0\u4e2d\u65ad</li> </ul> </li> <li>Lab5: \u5b9e\u73b0\u6d41\u6c34\u7ebf CPU<ul> <li>5-1: \u5b9e\u73b0\u4e0d\u5904\u7406\u51b2\u7a81 (Hazard) \u7684\u4e94\u7ea7\u6d41\u6c34\u7ebf CPU</li> <li>5-2: \u5b9e\u73b0\u89e3\u51b3\u51b2\u7a81\u7684\u4e94\u7ea7\u6d41\u6c34\u7ebf CPU</li> </ul> </li> </ul>"},{"location":"#_4","title":"\u5206\u6570\u6784\u6210","text":"<p>\u53ef\u4ee5\u4f7f\u7528\u9644\u4ef6\u4e2d\u7684\u5b9e\u9a8c\u62a5\u544a\u6a21\u677f\u4e66\u5199\u62a5\u544a\u3002</p> <p>\u5b9e\u9a8c\u90e8\u5206\u5360\u603b\u8bc430\u5206</p> <ul> <li>\u5b9e\u9a8c\u62a5\u544a 18\u5206<ul> <li>Lab0-3 6\u5206</li> <li>Lab4 6\u5206</li> <li>Lab5 6\u5206</li> </ul> </li> <li>\u9a8c\u6536 12\u5206</li> </ul>"},{"location":"#_5","title":"\u8fdf\u4ea4\u653f\u7b56","text":"<p>\u672c\u5b9e\u9a8c\uff08\u9664 bonus\uff09\u5171\u9700\u63d0\u4ea4\u4e09\u4efd\u5b9e\u9a8c\u62a5\u544a (Lab0-3, Lab4, Lab5) \uff0c\u4f60\u4e00\u5171\u62e5\u6709 3 \u5929\u7684\u201c\u81ea\u7531\u65f6\u95f4\u201d\uff0c\u8fdf\u4ea4\u653f\u7b56\u5982\u4e0b\uff1a</p> <ul> <li>\u6bcf\u4efd\u5b9e\u9a8c\u62a5\u544a\u4f1a\u63d0\u524d\u7ed9\u51fa\u622a\u6b62\u65f6\u95f4\uff0c\u901a\u5e38\u4e3a\u5bf9\u5e94\u6700\u540e\u4e00\u6b21\u5b9e\u9a8c\u7684\u4e0b\u4e00\u5468\u3002</li> <li>\u4ece\u622a\u6b62\u65f6\u95f4\u8d77\uff0c\u8fdf\u4ea4\u65f6\u95f4\u4e0d\u8db3 24 \u5c0f\u65f6\u7684\u8ba1\u4e3a 1 \u5929\uff0c\u4e0d\u8db3 7 \u5929\u7684\u8ba1\u4e3a 1 \u5468\uff08\u5982\uff0c\u4f60\u8fdf\u4ea4\u4e86 1min\uff0c\u5219\u7b97\u8fdf\u4ea4 1 \u5468\uff09<ul> <li>\u8fdf\u4ea4\u4e00\u5468\uff0c\u6263\u9664\u5b9e\u9a8c\u62a5\u544a\u6240\u5f97\u5206\u6570\u7684 40%\uff1b</li> <li>\u8fdf\u4ea4\u4e24\u5468\uff0c\u6263\u9664\u5b9e\u9a8c\u62a5\u544a\u6240\u5f97\u5206\u6570\u7684 80%\uff1b</li> <li>\u8fdf\u4ea4\u4e09\u5468\uff08\u6216\u4ee5\u4e0a\uff09\uff0c\u5b9e\u9a8c\u62a5\u544a\u8ba1 0 \u5206\u3002</li> </ul> </li> <li>\u5982\u679c\u4f60\u4e0d\u5e78\u8fdf\u4ea4\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u624b\u4e2d\u7684\u201c\u81ea\u7531\u65f6\u95f4\u201d\u62b5\u6d88\u8fdf\u4ea4\u7684\u5f71\u54cd\uff0c\u8bf7\u6ce8\u610f\uff1a<ul> <li>\u4f60\u4e00\u5171\u6709 3 \u5929\u7684\u81ea\u7531\u65f6\u95f4\uff1b</li> <li>\u9ed8\u8ba4\u4e0d\u4f7f\u7528\u81ea\u7531\u65f6\u95f4\uff0c\u4f60\u9700\u8981\u5728\u8981\u6c42\u52a9\u6559\u5f00\u542f\u8865\u4ea4\u65f6\u8bf4\u660e\u4f7f\u7528\u7684\u81ea\u7531\u65f6\u95f4\u5929\u6570\uff1b</li> <li>\u5373\u4fbf\u4f7f\u7528\u4e86\u201c\u81ea\u7531\u65f6\u95f4\u201d\uff0c\u4f60\u7684\u63d0\u4ea4\u65f6\u95f4\u4e5f\u4e0d\u80fd\u665a\u4e8e\u300a\u8ba1\u7b97\u673a\u7ec4\u6210\u4e0e\u8bbe\u8ba1\u300b\u671f\u672b\u8003\u8bd5\u5f53\u5929 23:59\uff0c\u6b64\u540e\u7684\u63d0\u4ea4\u8bb00\u5206\u3002</li> </ul> </li> <li>\u9a8c\u6536\u622a\u6b62\u65f6\u95f4\u4f1a\u5728\u671f\u672b\u524d\u7ed9\u51fa\uff0c\u5728\u6b64\u4e4b\u524d\u9a8c\u6536\u901a\u8fc7\u7684\u90fd\u4e0d\u4f1a\u6263\u9664\u83b7\u5f97\u7684\u5206\u6570\uff1b<ul> <li>\u6839\u636e\u5b9e\u9a8c\u8fdb\u5ea6\uff0c\u4f1a\u5bf9\u5b9e\u9a8c\u9a8c\u6536\u987a\u5e8f\u8d4b\u4e88\u4f18\u5148\u7ea7\uff0c\u5e76\u5728\u8bfe\u7a0b\u7fa4\u901a\u77e5\uff0c\u8bf7\u5c3d\u65e9\u5b8c\u6210\u9a8c\u6536\u4ee5\u51cf\u5c11\u7b49\u5f85\u9a8c\u6536\u7684\u65f6\u95f4\uff1b</li> <li>\u4e3a\u9f13\u52b1\u5927\u4f6c\u63d0\u524d\u9a8c\u6536\uff0c\u5728 Lab4/5 \u6700\u540e\u4e00\u6b21\u5b9e\u9a8c\u8bfe\u4e0a\u5b8c\u6210\u9a8c\u6536\u7684\uff0c\u5bf9\u5e94\u5b9e\u9a8c\u62a5\u544a\u7ed9 5 \u5206 bonus\uff08\u5b9e\u9a8c\u62a5\u544a\u5206\u6570\uff0c\u975e\u603b\u8bc4\u5206\u6570\uff09\u3002</li> </ul> </li> </ul> Example <p>\u5927\u7426\u7684Lab4</p> <ul> <li>\u5728\u201c\u5b9e\u73b0\u4e2d\u65ad\u201d\u5b9e\u9a8c\u8bfe\u5f53\u5929\u5b8c\u6210\u4e86 Lab4 \u6240\u6709\u5b9e\u9a8c\u5c0f\u8282\u7684\u9a8c\u6536\uff1b\u83b7\u5f97\u5206\u6570+3</li> <li>\u5b9e\u9a8c\u62a5\u544a\u8fdf\u4ea4\u4e869\u5929\uff0c\u5979\u4f7f\u7528\u4e862\u5929\u7684\u201c\u81ea\u7531\u65f6\u95f4\u201d\uff0c\u8bb0\u8fdf\u4ea47\u5929\uff1b\u6263\u966440%\u83b7\u5f97\u5206\u6570</li> <li>\u5979\u7684\u5b9e\u9a8c\u62a5\u544a\u83b7\u5f97\u4e8690\u7684\u57fa\u7840\u5206\u3002</li> </ul> <p>\u5979 Lab4 \u5b9e\u9a8c\u62a5\u544a\u7684\u6700\u7ec8\u5206\u6570\uff1a(90+3)\u00d760%=55.8\uff08\u56db\u820d\u4e94\u5165\uff09\u3002</p>"},{"location":"Lab0/Lab0/","title":"Lab0: Warmup","text":"<p>\u672c\u5b9e\u9a8c\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u5b9e\u9a8c\u73af\u5883\u914d\u7f6e\u3001\u4f7f\u7528 Vivado\u3001\u5b9e\u73b0\u591a\u8def\u9009\u62e9\u5668 MUX\u3002</p> <p>\u524d\u4e24\u90e8\u5206\u662f\u4e3a\u4e86\u5e2e\u4f60\u719f\u6089\u5b9e\u9a8c\u73af\u5883\u4ee5\u53ca Vivado \u7684\u4f7f\u7528\uff0c\u5217\u51fa\u7684\u5185\u5bb9\u4ec5\u4f9b\u53c2\u8003\uff0c\u5e76\u4e0d\u9700\u8981\u5168\u90e8\u5b8c\u6210\u3002\u672c\u6b21\u5b9e\u9a8c\u9700\u8981\u5b8c\u6210\u5e76\u63d0\u4ea4\u7684\u5185\u5bb9\u5747\u5728\u7b2c\u4e09\u90e8\u5206\u3002\u5efa\u8bae\u5728\u5b89\u88c5\u597d Vivado \u540e\u5148\u9605\u8bfb\u7b2c\u4e09\u90e8\u5206\u5185\u5bb9\uff0c\u660e\u786e\u672c\u6b21\u5b9e\u9a8c\u9700\u8981\u5b8c\u6210\u7684\u6b65\u9aa4\uff0c\u518d\u56de\u5230\u7b2c\u4e8c\u90e8\u5206\u5b66\u4e60 Vivado \u7684\u4f7f\u7528\u3002</p> <p>\u672c\u5b9e\u9a8c\u9700\u8981\u63d0\u4ea4\u5b9e\u9a8c\u62a5\u544a\uff08 Lab0-3 \u5408\u6210\u4e00\u4efd\u63d0\u4ea4\uff09</p> <p>\u672c\u5b9e\u9a8c\u4e0d\u9700\u8981\u9a8c\u6536</p> <p>\u4ece\u672c\u5b9e\u9a8c\u5f00\u59cb\uff0c\u6bcf\u4e2a\u5b9e\u9a8c\u5c0f\u8282\uff08\u5982ALU\u3001Register File\u3001FSM\uff09\u90fd\u53ef\u80fd\u51fa\u73b0\u601d\u8003\u9898\uff0c\u4f60\u9700\u8981\u5728\u62a5\u544a\u4e2d\u7ed9\u51fa\u5bf9\u601d\u8003\u9898\u7684\u56de\u7b54\uff0c\u601d\u8003\u9898\u7684\u683c\u5f0f\u7c7b\u4f3c\u4e8e\uff1a</p> <p>\u601d\u8003\u9898</p> <p>\u8fd9\u662f\u4e00\u4e2a\u601d\u8003\u9898</p>"},{"location":"Lab0/Mux/","title":"\u5b9e\u73b0\u591a\u8def\u9009\u62e9\u5668 MUX","text":""},{"location":"Lab0/Mux/#_1","title":"\u5b9e\u9a8c\u8981\u6c42","text":"<p>\u672c\u6b21\u5b9e\u9a8c\u4f60\u9700\u8981\u5b8c\u6210\u7684\u5185\u5bb9\u6709\uff1a</p> <ul> <li>\u6839\u636e\u4e0a\u8ff0\u4ecb\u7ecd\u521b\u5efa\u4e00\u4e2a\u5de5\u7a0b\uff0c\u6dfb\u52a0\u6e90\u6587\u4ef6\uff0c\u5e76\u5b9e\u73b0 MUX \u7684\u529f\u80fd\u3002</li> <li>\u5bf9\u5b9e\u73b0\u7684\u5de5\u7a0b\u8fdb\u884c\u4eff\u771f\uff0c\u4e0a\u677f\u9a8c\u8bc1\u3002</li> <li>\u5b9e\u9a8c\u62a5\u544a\u91cc\u9700\u8981\u5305\u542b\u7684\u5185\u5bb9\uff1a<ul> <li>MUX \u4ee3\u7801\u3002</li> <li>\u4eff\u771f\u4ee3\u7801\u4e0e\u6ce2\u5f62\u622a\u56fe\uff08\u6ce8\u610f\u7f29\u653e\u6bd4\u4f8b\u3001\u6570\u5236\u9009\u62e9\u5408\u9002\uff09\u3002</li> <li>\u7ea6\u675f\u6587\u4ef6\uff08\u63cf\u8ff0 MUX \u7684\u8f93\u5165\u8f93\u51fa\u4e0e\u5f00\u53d1\u677f\u4e0a\u7684\u5f15\u811a\u3001LED \u706f\u7684\u5bf9\u5e94\u5173\u7cfb\uff09\u3002</li> <li>\u4e0b\u677f\u56fe\u7247\u4e0e\u63cf\u8ff0\u3002</li> <li>\u5b9e\u9a8c\u601d\u8003\u9898\u3002</li> </ul> </li> </ul> <p>\u672c\u6b21\u5b9e\u9a8c\u4f60\u8981\u5b9e\u73b0\u7684\u591a\u8def\u9009\u62e9\u5668\u5982\u4e0b\uff1a \u56db\u8f93\u5165 MUX\uff0c\u5176\u4e2d <code>SW[15:14]</code> \u4f5c\u4e3a\u9009\u62e9\u4fe1\u53f7\u3002</p> <ul> <li><code>SW[15:14]=0</code> \u65f6\u8f93\u51fa <code>SW[3:0]</code>\u3002</li> <li><code>SW[15:14]=1</code> \u65f6\u8f93\u51fa <code>SW[7:4]</code>\u3002</li> <li><code>SW[15:14]=2</code> \u65f6\u8f93\u51fa <code>SW[11:8]</code>\u3002</li> <li><code>SW[15:14]=3</code> \u65f6\u8f93\u51fa\u5e38\u6570 <code>0</code>\u3002</li> <li>\u8f93\u51fa\u76f4\u63a5\u7ed1\u5230\u56db\u4e2a LED \u706f\u3002</li> </ul> <p>\u8fd9\u91cc\u7ed9\u51fa\u7ea6\u675f\u4ee3\u7801\u4f9b\u53c2\u8003\uff0c\u4f60\u9700\u8981\u4fee\u6539\u91cc\u9762\u7684 <code>_SOME_PIN</code> \u4ee5\u53ca <code>_which_signal</code> \u4e3a\u6b63\u786e\u7684\u5185\u5bb9\u3002\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u5b8c\u5168\u81ea\u5df1\u5199\u4e00\u4efd\u7ea6\u675f\u6587\u4ef6\u3002\u8fd9\u91cc\u63d0\u4f9b Digilent \u7ed9\u51fa\u7684 nexys-a7-100t-master.xdc \u7ea6\u675f\u6587\u4ef6\u3002</p> \u7ea6\u675f\u4ee3\u7801 <pre><code># LED\nset_property -dict { PACKAGE_PIN H17   IOSTANDARD LVCMOS33 } [get_ports { LED[0] }];\nset_property -dict { PACKAGE_PIN _SOME_PIN   IOSTANDARD LVCMOS33 } [get_ports { _some_signal1 }];\nset_property -dict { PACKAGE_PIN _SOME_PIN   IOSTANDARD LVCMOS33 } [get_ports { _some_signal2 }];\nset_property -dict { PACKAGE_PIN _SOME_PIN   IOSTANDARD LVCMOS33 } [get_ports { _some_signal3 }];\n# SW\nset_property -dict { PACKAGE_PIN J15   IOSTANDARD LVCMOS33 } [get_ports { SW[0] }];\nset_property -dict { PACKAGE_PIN L16   IOSTANDARD LVCMOS33 } [get_ports { SW[1] }];\nset_property -dict { PACKAGE_PIN M13   IOSTANDARD LVCMOS33 } [get_ports { SW[2] }];\nset_property -dict { PACKAGE_PIN R15   IOSTANDARD LVCMOS33 } [get_ports { SW[3] }];\nset_property -dict { PACKAGE_PIN R17   IOSTANDARD LVCMOS33 } [get_ports { SW[4] }];\nset_property -dict { PACKAGE_PIN T18   IOSTANDARD LVCMOS33 } [get_ports { SW[5] }];\nset_property -dict { PACKAGE_PIN U18   IOSTANDARD LVCMOS33 } [get_ports { SW[6] }];\nset_property -dict { PACKAGE_PIN R13   IOSTANDARD LVCMOS33 } [get_ports { SW[7] }];\nset_property -dict { PACKAGE_PIN T8    IOSTANDARD LVCMOS18 } [get_ports { SW[8] }];\nset_property -dict { PACKAGE_PIN U8    IOSTANDARD LVCMOS18 } [get_ports { SW[9] }];\nset_property -dict { PACKAGE_PIN R16   IOSTANDARD LVCMOS33 } [get_ports { SW[10] }];\nset_property -dict { PACKAGE_PIN T13   IOSTANDARD LVCMOS33 } [get_ports { SW[11] }];\nset_property -dict { PACKAGE_PIN H6    IOSTANDARD LVCMOS33 } [get_ports { SW[12] }];\nset_property -dict { PACKAGE_PIN U12   IOSTANDARD LVCMOS33 } [get_ports { SW[13] }];\nset_property -dict { PACKAGE_PIN U11   IOSTANDARD LVCMOS33 } [get_ports { SW[14] }];\nset_property -dict { PACKAGE_PIN V10   IOSTANDARD LVCMOS33 } [get_ports { SW[15] }];\n</code></pre>"},{"location":"Lab0/Mux/#_2","title":"\u601d\u8003\u9898","text":"<p>\u5728\u4f60\u8fc7\u5b8c\u5b9e\u9a8c\u6d41\u7a0b\u4e4b\u540e\uff0c\u8bf7\u5b8c\u6210\u601d\u8003\u9898\uff1a</p> \u601d\u8003\u9898 <p>\u52a9\u6559\u5728\u505a\u300a\u8ba1\u7b97\u673a\u4f53\u7cfb\u7ed3\u6784\u300b\u5b9e\u9a8c\u65f6\uff0c\u5728 <code>Message Window</code> \u4e2d\u770b\u5230\u4e86\u4e0b\u5217\u9519\u8bef\u63d0\u793a\uff1a</p> <p>[Drc 23-20] Rule violation (NSTD-1) Unspecified I/O Standard: 41 out of 41 logical ports use I/O standard (IOSTANDARD) value 'DEFAULT', instead of a user assigned specific value. This may cause I/O contention or incompatibility with the board power or connectivity affecting performance, signal integrity or in extreme cases cause damage to the device or the components to which it is connected. To correct this violation, specify all I/O standards. This design will fail to generate a bitstream unless all logical ports have a user specified I/O standard value defined. To allow bitstream creation with unspecified I/O standard values (not recommended), use this command: set_property SEVERITY {Warning} [get_drc_checks NSTD-1].  NOTE: When using the Vivado Runs infrastructure (e.g. launch_runs Tcl command), add this command to a .tcl file and add that file as a pre-hook for write_bitstream step for the implementation run. Problem ports: BTN_X[4:0], BTN_Y[3], BTN_Y[0], SW[15], SW[14], SW[13], SW[7], SW[6], SW[5], SW[4], SW[3], SW[2], SW[1], SW[0], VGA_B[3:0]... and (the first 15 of 28 listed).</p> <p>\u8bf7\u4f60\u5e2e\u52a9\u53ef\u601c\u7684\u52a9\u6559\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\ud83d\ude2d\uff0c\u5b8c\u6210\u5b9e\u9a8c\uff01</p> <ul> <li>\u4f60\u9700\u8981\u8bf4\u660e\uff1a<ul> <li>\u8fd9\u4e2a Error \u662f\u51fa\u5728\u54ea\u4e2a\u9636\u6bb5 (Synthesis/Implementation/Generate Bitstream) \uff1f</li> <li>\u52a9\u6559\u5e94\u8be5\u600e\u4e48\u505a\uff1f\uff08\u8bf7\u81f3\u5c11\u7ed9\u51fa\u4e00\u79cd\u53ef\u80fd\u7684\u89e3\u51b3\u65b9\u5f0f\uff09</li> <li>\u4f60\u662f\u901a\u8fc7\u4ec0\u4e48\u9014\u5f84\u4e86\u89e3\u4e0e\u89e3\u51b3\u8fd9\u4e2a Error \u7684\uff1f\uff08\u7b80\u5355\u8bf4\u660e\u5373\u53ef\uff0c\u53c2\u8003\u5185\u5bb9\u8bf7\u7ed9\u51fa\u94fe\u63a5\uff09</li> </ul> </li> <li>\u4f60\u4e0d\u9700\u8981\u7406\u89e3\u4e0e\u8bf4\u660e\uff1a<ul> <li>\u8fd9\u4e2a\u9519\u8bef\u5230\u5e95\u662f\u4ec0\u4e48\u4e1c\u897f\uff0c\u8fd9\u4e2a\u9519\u8bef\u662f\u600e\u4e48\u4ea7\u751f\u7684\u3002</li> </ul> </li> <li>\u4f60\u53ef\u80fd\u901a\u8fc7\u4ee5\u4e0b\u9014\u5f84\u5b8c\u6210\u672c\u9898\uff1a<ul> <li>\u8ba4\u771f\u9605\u8bfb\u62a5\u9519\u4fe1\u606f\uff0c\u8bf4\u4e0d\u5b9a\u89e3\u51b3\u65b9\u6848\u5c31\u5728 Error \u4e2d\u4e86\uff1f</li> <li>\u4f7f\u7528\u641c\u7d22\u5f15\u64ce\uff08\u6700\u597d\u4e0d\u8981\u7528 Baidu \uff09\uff0c\u7c98\u8d34\u62a5\u9519\u7684\u5934\u90e8\uff0c\u770b\u770b\u80fd\u4e0d\u80fd\u501f\u9274\u524d\u4eba\u7684\u667a\u6167\u3002</li> <li>\u5584\u7528 Xilinx Support\u3002</li> </ul> </li> </ul> <p>\u611f\u8c22\u4f60\u5e2e\u52a9\u52a9\u6559\u5b8c\u6210\u4e86\u5b9e\u9a8c\ud83d\ude0a\uff01\u4e4b\u540e\u7684\u5b9e\u9a8c\u4e2d\uff0c\u5982\u679c\u4f60\u53d1\u73b0\u4e86\u5404\u79cd\u62a5\u9519\uff08\u5c24\u5176\u662f Critical Warnings/Errors\uff09\u4e5f\u53ef\u4ee5\u5148\u5c1d\u8bd5\u901a\u8fc7\u4eca\u5929\u7684\u9014\u5f84\u89e3\u51b3\u3002</p>"},{"location":"Lab0/Vivado_installation/","title":"\u914d\u7f6e\u5b9e\u9a8c\u73af\u5883","text":""},{"location":"Lab0/Vivado_installation/#vivado","title":"Vivado \u5b89\u88c5","text":"<p>\u8bf7\u786e\u4fdd\u6709\u8db3\u591f\u7684\u78c1\u76d8\u5bb9\u91cf\uff08\u7ea6 40GB\uff09\u3002</p> \u5982\u679c\u5b98\u7f51\u4e0b\u8f7d\u5931\u8d25 <p>\u5982\u679c\u9047\u5230\u4f7f\u7528 webpack \u4e0b\u8f7d\u7ecf\u5e38 retry \u7684\u60c5\u51b5\uff0c\u4f60\u53ef\u4ee5\u5728\u6821\u7f51\u73af\u5883\u4e0b\u4f7f\u7528 FTP \u83b7\u5f97 2020.2 \u7248\u672c\uff1b</p> <p>FTP \u5730\u5740\u4e3a ftp://10.78.18.205/</p> <p>FTP\u4e2d\u6709\u76f8\u5173\u6307\u5bfc\u3002\u4e3a\u4e86\u9632\u6b62\u4f20\u8f93\u4e2d\u65ad\u5bfc\u81f4\u7684\u5931\u8d25\uff0c\u8bf7\u4f7f\u7528\u652f\u6301\u65ad\u70b9\u7eed\u4f20\u7684 FTP \u8f6f\u4ef6\uff0c\u6bd4\u5982 FileZilla\u3002</p> <p>\ud83d\udca1\u8bf7\u9009\u62e9\u4e0d\u4f4e\u4e8e 2020.2 \u7684\u7248\u672c\u3002</p> <ul> <li> <p>\u5728\u5b98\u7f51\u63d0\u4f9b\u7684\u4e0b\u8f7d\u7f51\u9875\u4e2d\u627e\u5230\u5408\u9002\u7684\u7248\u672c(\u7248\u672c\u53f7\uff1bWindows/Linux)\uff0c\u9009\u62e9\u201c...Web Installer\u201d\uff08\u7ea6300MB\u7684\u6587\u4ef6\uff09</p> </li> <li> <p>\u6253\u5f00\u4e0b\u8f7d\u5b89\u88c5\u7a0b\u5e8f\uff0c\u4f7f\u7528\u6ce8\u518c\u7684 Xilinx \u8d26\u53f7\u767b\u9646\uff0c\u5e76\u9009\u62e9 Download and install now</p> </li> <li>\u9009\u62e9\u5b89\u88c5\u7684\u8f6f\u4ef6 (Vivado) \u3001\u7248\u672c (Vivado HL WebPACK)</li> <li>\u9009\u62e9\u9700\u8981\u7684\u7ec4\u4ef6\uff08\u4ee5\u4e0b\u4e3a\u5fc5\u987b\u52fe\u9009\uff09\uff1aDesign Tools(Vivado Deign Suite, DocNav); Devices(Artix-7); Installation Options(Install Cable Drivers)\u3002\u9009\u62e9\u5b8c\u6210\u540e\u67e5\u770b\u78c1\u76d8\u7a7a\u95f4\uff0c\u4f7f\u7528\u4e0a\u8ff0\u9009\u62e9\u9700\u8981 30-40GB \u7a7a\u95f4\u7528\u6765\u5b89\u88c5<ul> <li>\u5982\u679c\u4f60\u4e4b\u540e\u9700\u8981\u4f7f\u7528\u5176\u4ed6\u578b\u53f7\u7684\u8bbe\u5907\uff0c\u53ef\u4ee5\u901a\u8fc7 installer \u8865\u5145\u4e0b\u8f7d\uff0c\u4e0d\u5fc5\u8981\u4e00\u6b21\u5168\u90e8\u5b89\u88c5(\u53ef\u4ee5\u67e5\u770b Xilinx-Support-60112)</li> </ul> </li> <li>\u786e\u4fdd\u7a7a\u95f4\u5145\u8db3\uff0c\u5f00\u59cb\u4e0b\u8f7d\uff0c\u5e76\u7b49\u5f85\u5b89\u88c5\u7ed3\u675f</li> </ul> <p>\u4e60\u60ef\u4f7f\u7528 Linux \u7cfb\u7edf\u7684\u540c\u5b66\u53ef\u4ee5\u5b89\u88c5 Linux \u7248\u672c\uff0cWSL2 \u4e5f\u53ef\u5c1d\u8bd5\u5b89\u88c5\u3002</p> <p>Vivado \u5b89\u88c5\u8def\u5f84\u4e0a\u4e0d\u8981\u51fa\u73b0\u4e2d\u6587\u548c\u7a7a\u683c\u3002</p>"},{"location":"Lab0/Vivado_installation/#_2","title":"\u73af\u5883\u914d\u7f6e\uff08\u53ef\u9009\uff09","text":"<p>\u672c\u5b66\u671f\u5b9e\u9a8c\u53ef\u4ee5\u4f7f\u7528 git \u8bb0\u5f55\u5b9e\u9a8c\u8fc7\u7a0b\u3002</p> <p>\u4f60\u9700\u8981\u5728\u7535\u8111\u4e0a\u914d\u7f6e <code>git</code>\uff0c\u53ef\u4ee5\u53c2\u8003\u914d\u7f6e git\u3002\u5982\u679c\u4f60\u4e4b\u524d\u4ece\u672a\u4f7f\u7528\u8fc7 git\uff0c\u53ef\u4ee5\u67e5\u770b\u201c\u5176\u4ed6\u201d\u4e2d\u201cgit \u57fa\u7840\u201d\u4e00\u8282\u3002\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u65b0\u5efa\u4ed3\u5e93\u5c1d\u8bd5\u4e00\u4e0b\u7b80\u5355\u64cd\u4f5c\u3002</p> <p>\u4f7f\u7528 Vivado GUI \u7684 project \u6a21\u5f0f\u4f1a\u4f7f\u5f97 git \u7ba1\u7406\u6df7\u4e71\uff0c\u56e0\u4e3a\u5728\u4f7f\u7528 IP \u6838\u3001\u4eff\u771f\u3001\u7efc\u5408\u7b49\u64cd\u4f5c\u65f6\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u4e2d\u95f4\u6587\u4ef6\uff0c\u4e14\u65e0\u6cd5\u7b80\u5355\u5730\u901a\u8fc7\u6587\u4ef6\u540e\u7f00\u540d\u7b49\u65b9\u5f0f\u5206\u522b\u3002\u63a8\u8350\u4f7f\u7528 git \u7ba1\u7406\u5de5\u7a0b\u7684\u540c\u5b66\u4f7f\u7528 batch mode\uff0c\u5b83\u4f7f\u7528\u4e86 Tcl \u811a\u672c\u8bed\u8a00\u3002\u4e00\u4e2a\u5bb9\u6613\u4e0a\u624b\u7684\u5b66\u4e60\u65b9\u5f0f\uff1a\u4f7f\u7528 GUI \u6253\u5f00\u4e00\u4e2a Vivado \u5de5\u7a0b\u5e76\u8fdb\u884c\u82e5\u5e72\u64cd\u4f5c\u540e\uff0c\u5de5\u7a0b\u76ee\u5f55\u4e0b\u7684 <code>vivado.jou</code> \u4f1a\u8bb0\u5f55\u4ece\u6253\u5f00\u5de5\u7a0b\u5230\u7ed3\u675f\u7684\u5404\u79cd\u64cd\u4f5c\u5bf9\u5e94\u7684 Tcl \u8bed\u53e5\uff0c\u66f4\u8be6\u7ec6\u7684\u5185\u5bb9\u53ef\u4ee5\u53c2\u8003\u6587\u6863\u3002</p>"},{"location":"Lab0/Vivado_installation/#faq","title":"FAQ","text":""},{"location":"Lab0/Vivado_installation/#webpack","title":"\u5b89\u88c5\u627e\u4e0d\u5230 WebPack \u9009\u9879","text":"<p>\u9009\u62e9 Standard \u7248\u672c\u5373\u53ef\u3002 Enterprise \u7248\u672c\u9700\u8981\u4ed8\u8d39\u3002</p>"},{"location":"Lab0/Vivado_installation/#device-artix-7","title":"Device \u770b\u4e0d\u5230 Artix-7 \u9009\u9879","text":"<p>\u5c55\u5f00 7 Series\uff0c\u5728\u91cc\u9762\u53ef\u4ee5\u627e\u5230 A7 \u677f\u3002</p>"},{"location":"Lab0/Vivado_installation/#_3","title":"\u8ffd\u52a0\u8bbe\u5907","text":"<p>\u6570\u903b\u4f7f\u7528 Vivado \u7684\u540c\u5b66\u9700\u8981\u901a\u8fc7 installer \u8ffd\u52a0\u4e0b\u8f7d A7 \u8bbe\u5907\uff0c\u5426\u5219\u65e0\u6cd5\u5b8c\u6210\u677f\u5361\u6dfb\u52a0\u3002</p> <p>\u8fdb\u5165 Vivado\uff0c\u9009\u62e9 <code>Help -&gt; Add Design Tools or Devices</code>\uff0c\u5728\u542f\u52a8\u7684 <code>xsetup</code> \u4e2d\u9009\u62e9\u8ffd\u52a0\u4e0b\u8f7d\u7684\u578b\u53f7\uff0c\u672c\u8bfe\u5b9e\u9a8c\u4e2d\u9700\u8981\u4e0b\u8f7d Artix-7\u3002</p>"},{"location":"Lab0/vivado_guide/","title":"\u4f7f\u7528 Vivado","text":"\u5f00\u59cb\u4e4b\u524d <ul> <li>\u5b9e\u9a8c\u5de5\u7a0b\u7684\u8def\u5f84\u4e0d\u5e94\u6709\u4e2d\u6587\u548c\u7a7a\u683c\u3002</li> <li>\u9ed8\u8ba4\u638c\u63e1\u4e86 Verilog \u57fa\u7840\u5e76\u77e5\u9053\u5982\u4f55\u8fdb\u884c\u6d4b\u8bd5\u3002</li> <li>\u5982\u679c\u4f60\u7684\u6570\u903b\u8bfe\u7a0b\u4e00\u8def\u6478\u9c7c\uff0c\u53ef\u4ee5\u53c2\u8003\uff1a\u83dc\u9e1fVerilog\u6559\u7a0b\u3001HDLBits\u3001\u6570\u903b\u52a9\u6559\u7684\u65f6\u5019\u6478\u51fa\u6765\u7684slides\u3002</li> <li>Slides \u4e2d\u6240\u6709\u4f7f\u7528 <code>bd</code> \u6587\u4ef6\uff08\u7c7b\u4f3c\u4e8e\u6570\u903b\u753b\u7684\u539f\u7406\u56fe\uff09\u7684\u90e8\u5206\uff0c\u90fd\u6539\u4e3a\u4f7f\u7528 Verilog \u5b8c\u6210\uff0c\u907f\u514d Vivado \u7684\u5947\u602a bug \u5f71\u54cd\u4f60\u7684\u5b9e\u9a8c\u3002</li> <li>\u53ef\u4ee5\u8c03\u6574\u6700\u591a\u7ebf\u7a0b\u6570\uff0c\u52a0\u5feb\u7efc\u5408\uff0c\u5177\u4f53\u8bbe\u7f6e\u53ef\u53c2\u8003 vivado \u591a\u7ebf\u7a0b\u7f16\u8bd1\u8bbe\u7f6e\uff08\u4e4b\u540e\u7684\u6587\u6863\u4e2d\uff0c\u53c2\u8003\u535a\u5ba2\u6211\u4f1a\u5c3d\u91cf\u9009\u62e9\u5899\u5185\u53ef\u67e5\u770b\u7684\uff09\u3002</li> <li>\u5bf9\u4e8e\u4f7f\u7528 Windows \u7cfb\u7edf\u7684\u540c\u5b66\u3002\u5de5\u7a0b\u548c IP \u6587\u4ef6\u547d\u540d\u5c3d\u91cf\u7b80\u77ed\u5e72\u7ec3\u4e14\u4f4d\u4e8e\u786c\u76d8\u6839\u76ee\u5f55\u7b49\u6d45\u5c42\u76ee\u5f55\u3002\u5426\u5219\u540e\u7eed\u5b9e\u9a8c\u4f1a\u51fa\u73b0\u8def\u5f84\u8d85\u51fa Windows \u7cfb\u7edf\u652f\u6301\u7684\u6700\u5927\u957f\u5ea6\uff0c\u4e00\u65e6\u51fa\u73b0\u5c31\u9700\u8981\u5c06\u4e4b\u524d\u6240\u6709\u7684 IP\u4e00\u4e00\u6253\u5f00\u5168\u90e8\u91cd\u65b0\u751f\u6210\u91cd\u65b0\u5f52\u7f6e\u3002</li> <li>\u5c06\u6574\u5b66\u671f\u5b9e\u9a8c\u7684\u6240\u6709 IP \u6838\u7ec4\u7ec7\u5230\u7edf\u4e00\u7684\u6d45\u76ee\u5f55\u4e2d\uff0c\u540e\u7eed\u6240\u6709\u5b9e\u9a8c\u7684 IP Catalog \u90fd\u5f15\u7528\u8be5\u76ee\u5f55\u4e0b\u7684 IP\u3002</li> <li>\u5728\u4fee\u6539\u67d0\u4e9b IP \u65f6\uff0c\u91c7\u7528\u53f3\u952e IP\uff0c\u9009\u62e9 <code>Edit in IP Packager</code> \u8fdb\u5165\u81ea\u52a8\u751f\u6210\u7684\u5b50\u5de5\u7a0b\u4e2d\u4fee\u6539\uff0c\u4fee\u6539\u5b8c\u6210\u540e <code>Repackage IP</code>\uff0c\u7136\u540e\u56de\u5230\u7236\u5de5\u7a0b\u4e2d <code>Upgrade IP</code> \u5373\u53ef\u3002\u53ef\u4ee5\u907f\u514d\u81ea\u8ba4\u4e3aIP\u66f4\u65b0\u4e86\uff0c\u5b9e\u9645\u4e0a\u5de5\u7a0b\u5e76\u6ca1\u8bc6\u522b\u5230\u3002</li> <li>\u5728\u8fdb\u884c <code>Generate Output Product</code> \u65f6\uff0c\u5c3d\u91cf\u4ece\u5934\u5230\u5c3e\u5747\u9009\u62e9 <code>Out of Context</code> \u6a21\u5f0f\u3002\u53ef\u4ee5\u4fbf\u4e8e\u4eff\u771f\u3002</li> <li>Slides \u4e2d\u5b58\u5728\u4e00\u5b9a\u7684\u9519\u8bef\uff0c\u8bf7\u8ba4\u771f\u9605\u8bfb\uff0c\u7ed3\u5408\u7406\u8bba\u8bfe\u7a0b\u77e5\u8bc6\u5206\u6790\uff0c\u53ea\u8981\u7406\u8bba\u8bfe\u8ba4\u771f\u5b66\u4e60\uff0c\u5b8c\u5168\u53ef\u4ee5\u8fa8\u8bc6\u548c\u89e3\u51b3\u3002</li> <li><code>Tools \u2192 Setting</code> \u4e2d\u53ef\u4ee5\u5f00\u542f\u4e00\u4e9b\u8bbe\u7f6e\u65b9\u4fbf\u5b9e\u9a8c\u3002<ul> <li><code>Source File \u2192 File Saving</code> \u4e2d\u53ef\u4ee5\u5f00\u542f\u81ea\u52a8\u4fdd\u5b58\u6e90\u6587\u4ef6\uff0c\u51cf\u5c11\u5f39\u7a97\u8be2\u95ee\u662f\u5426\u4fdd\u5b58\u3002</li> <li><code>Dispaly \u2192 Spacing \u2192 Density</code> \u8c03\u6574\u4e3a <code>Compact</code> \u53ef\u4ee5\u5728\u5c0f\u5c4f\u5e55\u4e0a\u663e\u793a\u66f4\u591a\u5185\u5bb9\u3002</li> <li><code>Text Editor</code> \u4e2d\u53ef\u4ee5\u8c03\u6574\u7f16\u8f91\u5668\u4e3a\u5176\u4ed6\u7b2c\u4e09\u65b9\u7f16\u8f91\u5668 \u5982 VS Code\u3002</li> <li><code>Text Editor \u2192 Fonts and Colors</code> \u53ef\u4ee5\u8c03\u6574 Fonts family \u548c size\uff0c\u539f\u59cb\u7684\u592a\u8d39\u773c\u775b\u4e86\u3002</li> </ul> </li> </ul> <p>\u2b06\ufe0f\u5f00\u59cb\u5b9e\u9a8c\u4e4b\u524d\uff0c\u8bf7\u8ba4\u771f\u9605\u8bfb\u4ee5\u4e0a\u5efa\u8bae\u3002</p>"},{"location":"Lab0/vivado_guide/#vivado_1","title":"\u4f7f\u7528 Vivado","text":"<p>\u8fd9\u4e00\u8282\u4f60\u5c06\u5c1d\u8bd5\u4f7f\u7528 Vivado \u5b8c\u6210\u5c0f\u9879\u76ee\uff0c\u4f53\u9a8c Vivado \u7684\u5de5\u4f5c\u6d41\u7a0b\u3002</p> <p>\u8fd9\u91cc\u6211\u4eec\u5c06\u5217\u51fa Vivado \u5e38\u89c1\u7684\u7528\u6cd5\uff0c\u5176\u4e2d\u90e8\u5206\u5185\u5bb9\u5e76\u4e0d\u9700\u8981\u5b9e\u9645\u64cd\u4f5c\uff0c\u4e5f\u4e0d\u7528\u5728\u62a5\u544a\u4e2d\u7ed9\u51fa\u3002\u5199\u51fa\u6765\u7684\u76ee\u7684\u662f\u7528\u4f5c\u53c2\u8003\uff0c\u4ee5\u4fbf\u4f60\u5728\u5b9e\u9645\u64cd\u4f5c\u65f6\u80fd\u591f\u5feb\u901f\u627e\u5230\u5bf9\u5e94\u7684\u6b65\u9aa4\u3002\u4e0d\u8981\u6c42\u5728\u62a5\u544a\u7ed9\u51fa\u7684\u90e8\u5206\u53ef\u4ee5\u8df3\u8fc7\uff0c\u4e4b\u540e\u5b9e\u9a8c\u7528\u5230\u65f6\u4f1a\u7528\u5373\u53ef\u3002</p>"},{"location":"Lab0/vivado_guide/#vivado_2","title":"Vivado \u7684\u57fa\u672c\u64cd\u4f5c","text":""},{"location":"Lab0/vivado_guide/#vivado_3","title":"\u521b\u5efa Vivado \u5de5\u7a0b","text":"<ul> <li>\u542f\u52a8 Vivado \u4e4b\u540e\uff0c\u9009\u62e9\u9876\u90e8\u5feb\u6377\u680f\u4e2d\u7684 <code>File -&gt; Project -&gt; New</code>\u3002</li> <li>\u5728 Project Name \u754c\u9762\u4e2d\u4fee\u6539\u5de5\u7a0b\u540d\u79f0\u53ca\u8def\u5f84\uff0c\u8bf7\u6ce8\u610f\uff0c\u8def\u5f84\u548c\u540d\u79f0\u4e2d\u4e0d\u8981\u6709\u4e2d\u6587\uff0c\u4ee5\u907f\u514d\u4e00\u4e9b\u95ee\u9898\u3002</li> <li>\u5728 Project Type \u754c\u9762\uff0c\u9009\u62e9 <code>RTL Project</code>\uff0c\u5b50\u9009\u9879\u4fdd\u6301\u9ed8\u8ba4\u5373\u53ef\uff08\u628a <code>Do not specify at this time</code> \u52fe\u4e0a\uff0c\u8868\u793a\u5728\u65b0\u5efa\u5de5\u7a0b\u65f6\u4e0d\u53bb\u6307\u5b9a\u6e90\u6587\u4ef6\uff09\u3002</li> <li>\u5728 Default Part \u754c\u9762\uff0c\u8fdb\u5165 <code>Parts</code> \u5e76\u5728\u5176\u4e2d\u627e\u5230\u5e76\u9009\u62e9 <code>xc7a100tcsg324-1</code>\u3002</li> </ul>"},{"location":"Lab0/vivado_guide/#_1","title":"\u6dfb\u52a0\u6e90\u6587\u4ef6","text":"<ul> <li> <p>\u5de5\u7a0b\u521b\u5efa\u540e\uff0c\u53ef\u4ee5\u5728 <code>Flow Navigator</code> \u754c\u9762\uff08\u5de5\u4f5c\u6d41\u7a97\u53e3\uff09\u4e0b\u70b9\u51fb <code>Add Sources</code>\uff0c\u9009\u62e9 <code>Add or create design sources</code> \u6dfb\u52a0\u6e90\u6587\u4ef6\u3002</p> <p>Info</p> <ul> <li>\u9009\u62e9 <code>Add or create constrains</code>\uff0c\u6dfb\u52a0\u7ea6\u675f\u6587\u4ef6\uff0c\u4e3b\u8981\u6709\u5f15\u811a\u7ea6\u675f\u3001\u65f6\u5e8f\u7ea6\u675f\u548c\u7269\u7406\u7ea6\u675f\u7b49\u3002</li> <li>\u9009\u62e9 <code>Add or create design sources</code>\uff0c\u6dfb\u52a0 Verilog \u6e90\u6587\u4ef6\uff0c\u7528\u4e8e\u7efc\u5408\u3002</li> <li>\u9009\u62e9 <code>Add or create simulation sources</code>\uff0c\u6dfb\u52a0\u4eff\u771f\u6d4b\u8bd5\u6587\u4ef6\uff0c\u7528\u4e8e\u4eff\u771f\u3002</li> </ul> </li> <li> <p>\u70b9\u51fb <code>Next</code> \u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u65b0\u5efa\u6e90\u6587\u4ef6\u6216\u8005\u4ece\u5176\u4ed6\u5730\u65b9\u5bfc\u5165\u6e90\u6587\u4ef6\u3002</p> <ul> <li><code>Create File</code> \u521b\u5efa\u6587\u4ef6\uff0c\u5e76\u9009\u62e9\u6587\u4ef6\u7c7b\u578b\u4e3a <code>Verilog</code>\uff0c\u8f93\u5165\u6587\u4ef6\u540d\uff0c\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\u9009\u62e9 <code>&lt;Local to Project&gt;</code>\uff0c\u70b9\u51fb OK\u3002</li> <li>\u9009\u62e9 <code>Add Files</code>\uff0c\u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u627e\u5230\u60f3\u8981\u6dfb\u52a0\u7684\u6e90\u6587\u4ef6\uff0c\u5e76\u70b9\u51fb <code>OK</code>\u3002\u5f53\u524d\u5bf9\u8bdd\u6846\u5de6\u4e0b\u89d2\u6709\u4e00\u4e2a\u9009\u9879\u662f <code>Copy sources into project</code>\uff0c\u53ef\u9009\u62e9\u662f\u5426\u5c06\u6e90\u6587\u4ef6\u590d\u5236\u5230\u5de5\u7a0b\u76ee\u5f55\u4e0b\u3002\u672c\u8282\u5b9e\u9a8c\u4e2d\uff0c\u662f\u5426\u52fe\u9009 <code>Copy sources into project</code> \u9009\u9879\u5bf9\u5b9e\u9a8c\u8fc7\u7a0b\u5f71\u54cd\u4e0d\u5927\u3002 \u5982\u679c\u52fe\u9009\uff0c\u5b83\u4f1a\u5c06\u4f60\u6dfb\u52a0\u7684\u6587\u4ef6\u62f7\u8d1d\u5230\u5de5\u7a0b\u76ee\u5f55\u4e0b <code>xxx.srcs/</code> (<code>xxx</code> \u662f\u5de5\u7a0b\u540d) \u5bf9\u5e94\u7684\u76ee\u5f55\u4e0b\u3002</li> <li>\u9009\u62e9 <code>Add Directories</code>\uff0c\u4e0e <code>Add Files</code> \u7c7b\u4f3c\uff0c\u533a\u522b\u5728\u4e8e\u5b83\u4f1a\u5c06\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u6dfb\u52a0\u5230\u5de5\u7a0b\u4e2d\u3002</li> </ul> </li> <li> <p>\u6dfb\u52a0\u6e90\u6587\u4ef6\u540e\u70b9\u51fb <code>Finish</code>\uff0c\u7ee7\u7eed\u5f39\u51fa\u7684\u5bf9\u8bdd\u7a7a\u4e2d\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e9b\u7aef\u53e3\uff0c\u4f46\u662f\u6211\u4eec\u73b0\u5728\u76f4\u63a5\u5355\u51fb <code>OK</code>\u3002</p> </li> <li>\u521b\u5efa\u5b8c\u6210\u540e\u53ef\u4ee5\u5728 <code>Sources -&gt; Design Sources</code>\uff08\u6e90\u6587\u4ef6\u7a97\u53e3\uff09\u4e2d\u770b\u5230\u521a\u521a\u521b\u5efa\u7684\u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5c31\u662f\u6211\u4eec\u53ef\u4ee5\u7f16\u5199 verilog \u7a0b\u5e8f\u7684\u6587\u4ef6\u3002\u53cc\u51fb\u540e\u5373\u53ef\u663e\u793a\u6587\u4ef6\u4ee3\u7801\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u91cc\u9762\u4e66\u5199\u4ee3\u7801\u3002</li> <li>\u6dfb\u52a0\u7528\u4e8e\u4eff\u771f\u7684\u4ee3\u7801\u3001\u6dfb\u52a0\u7ea6\u675f\u6587\u4ef6\u7684\u6b65\u9aa4\u4e0e\u6dfb\u52a0\u6e90\u6587\u4ef6\u7c7b\u4f3c\uff0c\u8fd9\u91cc\u4e0d\u518d\u91cd\u590d\u3002</li> </ul>"},{"location":"Lab0/vivado_guide/#_2","title":"\u4eff\u771f","text":"<ul> <li>\u70b9\u51fb <code>Add Sources</code>\uff0c\u901a\u8fc7\u4e0a\u9762\u7684\u8fc7\u7a0b\u6dfb\u52a0\u4eff\u771f\u6d4b\u8bd5\u6587\u4ef6\u3002</li> <li>\u521b\u5efa\u5b8c\u6210\u540e\u5728\u6e90\u6587\u4ef6\u7a97\u53e3\u627e\u5230 <code>Simulaion Sources</code> \u4e0b\u53cc\u51fb\u521a\u521a\u521b\u5efa\u7684\u4eff\u771f\u6587\u4ef6\uff0c\u8fd9\u662f\u4e00\u4e2a\u7a7a\u6587\u4ef6\uff0c\u6211\u4eec\u9700\u8981\u6dfb\u52a0\u4ee3\u7801\u3002</li> <li> <p>\u5728\u8fdb\u884c\u4eff\u771f\u524d\uff0c\u8bf7\u68c0\u67e5\u4eff\u771f\u6587\u4ef6 <code>Simulation Sources</code> \u4e2d\u7684\u9876\u5c42\u6a21\u5757\u662f\u5426\u9009\u62e9\u6b63\u786e\u3002\u4e00\u4e2a\u5de5\u7a0b\u4e2d\u53ef\u4ee5\u6709\u591a\u4e2a\u4eff\u771f\u6587\u4ef6\uff0c\u4f46\u53ea\u6709\u4e00\u4e2a\u4eff\u771f\u9876\u5c42\u6a21\u5757\uff0c\u5982\u679c\u4f60\u9700\u8981\u4f7f\u7528\u5176\u4ed6\u7684\u4eff\u771f\u6587\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u53f3\u952e\u70b9\u51fb\u8981\u8bbe\u4e3a\u9876\u5c42\u6a21\u5757\u7684\u6587\u4ef6\uff0c\u5e76\u9009\u62e9 <code>Set as top</code> \u8fdb\u884c\u5207\u6362\u3002     </p> </li> <li> <p>\u786e\u8ba4\u65e0\u8bef\u540e\uff0c\u70b9\u51fb\u5de6\u8fb9\u5de5\u4f5c\u6d41\u7a97\u53e3\u680f <code>SIMULATION -&gt; Run Simulation</code>\uff0c\u8fdb\u884c\u4eff\u771f\u3002</p> </li> </ul> <p>\u4eff\u771f\u7684\u76f8\u5173\u6309\u94ae</p> <p></p> <p>\u9996\u5148\u8ba4\u8bc6\u4e00\u4e0b\u754c\u9762\uff0c\u4e0a\u680f\u56fe\u4e2d\u6309\u94ae\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u4e3a\uff1a</p> <ul> <li>Restart\uff1a\u6e05\u7a7a\u5f53\u524d\u6ce2\u5f62\uff0c\u51c6\u5907\u8fdb\u884c\u4e0b\u6b21\u4eff\u771f\uff08Windows \u4e0b\u67d0\u4e9b\u7248\u672c\u6781\u6613\u9020\u6210\u95ea\u9000\uff09\u3002</li> <li>Run All\uff1a\u8fdb\u884c\u4e00\u904d\u4eff\u771f\uff0c\u76f4\u5230\u9047\u5230\u505c\u6b62\u4fe1\u53f7\uff08\u5982 <code>$finish()</code> \u6216\u5728 GUI \u4e2d\u8bbe\u7f6e\u7684\u65ad\u70b9\uff09\u6216\u67d0\u4e00\u65f6\u95f4\u4e0a\u9650\u3002</li> <li>Run for xxx\uff1a\u4e0e\u53f3\u4fa7\u4e24\u680f\u914d\u5408\uff0c\u8868\u793a\u4ece\u5f53\u524d\u4eff\u771f\u4f4d\u7f6e\u5f00\u59cb\uff0c\u7ee7\u7eed\u4eff\u771f\u4e00\u6bb5\u65f6\u95f4\uff08\u65f6\u95f4\u7531\u6309\u94ae\u53f3\u65b9\u7684\u6570\u5b57\u548c\u5355\u4f4d\u51b3\u5b9a\uff09\u3002</li> <li>Step\uff1a\u7b14\u8005\u5e76\u4e0d\u6e05\u695a\u6b64\u529f\u80fd\uff0c\u63a8\u6d4b\u662f\u591a\u4e2a\u65ad\u70b9\u95f4\u6b65\u8fdb\u3002</li> <li>Relaunch Simulation\uff1a\u5982\u679c\u4fee\u6539\u4e86\u4eff\u771f\u6587\u4ef6\u6216\u7528\u4e8e\u7efc\u5408\u7684\u4ee3\u7801\uff0c\u9700\u8981\u91cd\u65b0\u52a0\u8f7d\u3002</li> </ul> <p></p> <p>\u5728\u6ce2\u5f62\u754c\u9762\u680f\u4e2d\u4e5f\u6709\u51e0\u4e2a\u8f83\u4e3a\u5b9e\u7528\u7684\u6309\u94ae\uff1a</p> <ul> <li>Search\uff1a\u9009\u4e2d\u6ce2\u5f62\u540e\uff0c\u53ef\u4ee5\u6839\u636e\u60f3\u8981\u7684\u503c\uff08\u5b8c\u5168\u5339\u914d\u3001\u9ad8\u4f4d\u5339\u914d\u6216\u4f4e\u4f4d\u5339\u914d\uff09\u641c\u7d22\uff0c\u627e\u5230\u8be5\u503c\u6240\u5728\u7684\u4f4d\u7f6e\u3002</li> <li> <p>Save Waveform Congfiguration\uff1a\u5982\u679c\u5bf9\u6ce2\u5f62\u8bbe\u7f6e\u6709\u4fee\u6539\uff08\u5982\u6dfb\u52a0\u6216\u5220\u9664\u4e86\u4fe1\u53f7\uff0c\u4fee\u6539\u4e86\u4fe1\u53f7\u7684\u6570\u5236\uff0c\u4fe1\u53f7\u7ebf\u989c\u8272\u7b49\uff09\u53ef\u4ee5\u901a\u8fc7\u4fdd\u5b58\u5f97\u5230\u914d\u7f6e\u6587\u4ef6\uff0c\u65b9\u4fbf\u4e4b\u540e\u4eff\u771f\u65f6\u76f4\u63a5\u4f7f\u7528\u4fee\u6539\u540e\u7684\u914d\u7f6e\u6587\u4ef6\u3002</p> <ul> <li>\u5728\u4eff\u771f\u754c\u9762\u4e2d\uff0c\u901a\u8fc7 <code>File &gt; Simulation Waveform &gt; Open Configuration</code> \u53ef\u4ee5\u6253\u5f00\u4e4b\u524d\u4fdd\u5b58\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u6253\u5f00\u540e\u70b9\u51fb <code>Relaunch Simulation</code> \u5373\u53ef\u751f\u6210\u5bf9\u5e94\u6ce2\u5f62\u3002</li> </ul> </li> <li> <p>Zoom Fit\uff1a\u53ef\u4ee5\u5c06\u5f53\u524d\u7f29\u653e\u81ea\u52a8\u8c03\u6574\u4e3a\u8f83\u5408\u9002\u7684\u5927\u5c0f\u3002</p> </li> <li>\u5176\u4ed6\u6309\u94ae\u7684\u529f\u80fd\u53ef\u4ee5\u81ea\u884c\u5c1d\u8bd5\uff0c\u90e8\u5206\u6309\u94ae\u9700\u8981\u5148\u9009\u4e2d\u4fe1\u53f7\u624d\u80fd\u4f7f\u7528\uff0c\u6ca1\u6709\u7279\u522b\u9700\u8981\u6ce8\u610f\u7684\u70b9\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u5728\u6ce2\u5f62\u754c\u9762\u91cc\uff0c\u53ef\u4ee5\u53f3\u952e\u70b9\u51fb\u6ce2\u5f62\uff0c\u9009\u62e9 <code>Radix</code> \u6765\u4fee\u6539\u6570\u5236\uff0c\u9009\u62e9 <code>Color</code> \u6765\u4fee\u6539\u6ce2\u5f62\u989c\u8272\u3002</li> </ul>"},{"location":"Lab0/vivado_guide/#bitstream","title":"\u751f\u6210 bitstream \u5e76\u70e7\u5f55","text":"<p>Bitstream \u6587\u4ef6\u662f\u4e00\u79cd\u7531\u6bd4\u7279\u6d41\u7ec4\u6210\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u5b58\u50a8\u548c\u4f20\u8f93\u6570\u636e\u3002\u5728\u6211\u4eec\u7684\u5b9e\u9a8c\u4e2d\uff0c\u5b83\u7528\u6765\u5b58\u50a8 FPGA \u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u53ef\u4ee5\u901a\u8fc7\u70e7\u5f55\u5bf9 FPGA \u8fdb\u884c\u91cd\u65b0\u7f16\u7a0b\u3002</p> <p>\u751f\u6210 bitstream \u7684\u6d41\u7a0b\u662f <code>Synthesis -&gt; Implementation -&gt; Generate Bitstream</code>\uff0c\u5747\u53ef\u5728\u5de6\u8fb9\u7684\u5de5\u4f5c\u6d41\u7a97\u53e3\u4e2d\u627e\u5230\u3002\u5982\u679c\u4f60\u76f4\u63a5\u70b9\u51fb <code>Generate Bitstream</code>\uff0cVivado \u4f1a\u81ea\u52a8\u5e2e\u4f60\u5b8c\u6210\u524d\u4e24\u6b65\u3002</p>"},{"location":"Lab0/vivado_guide/#_3","title":"\u7ea6\u675f\u6587\u4ef6","text":"<p>\u5728\u751f\u6210 bitstream \u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u68c0\u67e5\u5e76\u4fee\u6539\u7ea6\u675f\u6587\u4ef6\u3002</p> <p>\u5f15\u811a\u7ea6\u675f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>\u5de5\u5177\u76f4\u63a5\u7ea6\u675f\uff1a\u5148\u8fdb\u884c\u7efc\u5408\uff0c\u7efc\u5408\u540e\u6253\u5f00\u8bbe\u8ba1\u56fe\u3002\u70b9\u51fb <code>I/O Ports</code>\uff0c\u5728\u811a\u672c\u6d41\u7a0b\u7a97\u53e3\u627e\u5230 <code>Find Results</code> \u4e2d\u8fdb\u884c\u7ba1\u811a\u914d\u7f6e\u3002\u5176\u4e2d <code>Package Pin</code> \u5bf9\u5e94 FPGA \u4e2d\u7684\u7ba1\u811a\uff0c<code>I/O Std</code> \u5bf9\u5e94\u7535\u5e73\u6807\u51c6\u3002\u7ea6\u675f\u5b8c\u6210\u540e\uff0c\u5728\u5de6\u4e0a\u89d2\u7684\u83dc\u5355\u680f\u548c\u5feb\u6377\u952e\u7a97\u53e3\u627e\u5230\u4fdd\u5b58\u6309\u94ae\u5e76\u547d\u540d\uff0c\u70b9\u51fb <code>OK</code>\u3002</li> <li>\u811a\u672c\u7ea6\u675f\u6cd5\uff1a\u5728\u7efc\u5408\u524d\uff0c\u70b9\u51fb <code>Add Sources</code> \u6dfb\u52a0\u7ea6\u675f\u6587\u4ef6\uff0c\u4e4b\u540e\u70b9\u51fb <code>Next</code>\uff0c<code>Finish</code>\u3002<ul> <li>\u7efc\u5408\u7684\u65b9\u6cd5\uff1a\u70b9\u51fb\u5de5\u4f5c\u6d41\u7a97\u53e3 <code>SYNTHISIS</code> \u4e0b <code>Run Synthesis</code>\uff0c\u5f39\u51fa\u7efc\u5408\u5bf9\u8c61\u8def\u5f84\u53ca\u8fd0\u884c\u7ebf\u7a0b\u6570\u8bbe\u7f6e\u7a97\u53e3\uff0c\u91c7\u7528\u9ed8\u8ba4\u8bbe\u7f6e\uff0c\u76f4\u63a5\u70b9\u51fb <code>OK</code>\uff0c\u7efc\u5408\u5b8c\u6210\u540e\u5f39\u51fa\u6210\u529f\u7a97\u53e3\uff0c\u53ef\u4ee5\u7ee7\u7eed\u8fdb\u884c\u5b9e\u73b0\u6b65\u9aa4\uff0c\u6216\u8005\u6253\u5f00\u7efc\u5408\u540e\u7684\u539f\u7406\u56fe\u8bbe\u8ba1\u4ee5\u53ca\u67e5\u770b\u7efc\u5408\u62a5\u544a\u3002</li> </ul> </li> </ul> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u90fd\u4f7f\u7528\u811a\u672c\u7ea6\u675f\u6cd5\u8fdb\u884c\u5f15\u811a\u7ea6\u675f\uff0c\u4e0b\u9762\u7ed9\u51fa\u811a\u672c\u7ea6\u675f\u6587\u4ef6\u7684\u4f8b\u5b50\u3002</p> <p>Example</p> <p>\u4ee5 <code>I1</code> \u7684\u7ea6\u675f\u8fdb\u884c\u4e3e\u4f8b\uff1a <pre><code>set_property PACKAGE_PIN J15 [get_ports {I0}]\nset_property IOSTANDARD LVCMOS33 [get_ports {I0}]\n</code></pre> \u5b83\u4e3a\u7aef\u53e3 <code>I0</code> \u5206\u914d\u4e86\u5f15\u811a <code>J15</code>\uff0c\u8fd9\u662f\u677f\u4e0a\u6700\u53f3\u4fa7\u7684\u5f00\u5173\uff0c\u4f60\u53ef\u4ee5\u5728 A7 \u677f\u5bf9\u5e94\u5f00\u5173\u4e0a\u65b9\u770b\u5230 <code>J15</code> \u7684\u6807\u8bb0\uff1b\u540c\u65f6\uff0c\u5b83\u89c4\u5b9a\u4e86\u5f15\u811a\u7684\u8f93\u5165/\u8f93\u51fa\u6807\u51c6\u4e3a <code>LVCMOS33</code>\uff0c\u6b64\u5904\u4e0d\u9700\u8981\u6df1\u7a76\uff0c\u611f\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u81ea\u884c\u641c\u7d22\u3002</p> <p>\u5728\u672c\u6b21\u6216\u8005\u540e\u7eed\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u4f1a\u7ed9\u51fa\u90e8\u5206\u5f15\u811a\u7ea6\u675f\u6587\u4ef6\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002\u6211\u4eec\u89c4\u5b9a\u4f60\u53ea\u9700\u8981\u4fee\u6539\u4ee5\u4e0b\u5212\u7ebf <code>_</code> \u5f00\u5934\u7684\u5185\u5bb9\uff08\u5373 <code>_SOME_PIN</code> \u4ee5\u53ca <code>_which_signal</code>\uff09\uff0c\u5176\u4ed6\u90e8\u5206\u7684\u5185\u5bb9\u8bf7\u4fdd\u6301\u4e0d\u53d8\uff0c\u4e4b\u540e\u7684\u5b9e\u9a8c\u4e2d\u4e5f\u4ee5\u4e0b\u5212\u7ebf\u5f00\u5934\u4e3a\u201c\u9700\u8981\u4fee\u6539\u90e8\u5206\u201d\u7684\u63d0\u793a\u3002</p> <p>\u8fd9\u91cc\u7ed9\u51fa\u4e00\u4e2a\u4fee\u6539\u7684\u4f8b\u5b50\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u4fee\u6539\u4e0b\u8fb9\u8fd9\u4e2a\u7ea6\u675f\uff0c\u4f7f\u7aef\u53e3 <code>I2</code> \u5206\u914d\u5230\u5f15\u811a <code>M13</code> \u4e0a\uff0c\u8f93\u5165/\u8f93\u51fa\u6807\u51c6\u4e3a <code>LVCMOS33</code>\u3002 <pre><code>set_property PACKAGE_PIN _SOME_PIN [get_ports {_which_signal}]\nset_property IOSTANDARD LVCMOS33 [get_ports {_which_signal}]\n</code></pre></p>"},{"location":"Lab0/vivado_guide/#bitstream_1","title":"\u751f\u6210 bitstream","text":"<ul> <li>\u4fee\u6539\u7ea6\u675f\u6587\u4ef6\u540e\uff0c\u4f60\u53ef\u4ee5\u70b9\u51fb\u5de5\u4f5c\u6d41\u7a97\u53e3\u7684 <code>PROGRAM AND DEBUG &gt; Generate Bitstream</code> \u751f\u6210\u6bd4\u7279\u6d41\u3002</li> <li>\u751f\u6210\u6bd4\u7279\u6d41\u7684\u7ed3\u679c\u5c06\u901a\u8fc7\u5f39\u7a97\u65b9\u5f0f\u63d0\u793a\uff0c\u5982\u679c\u751f\u6210\u5931\u8d25\u8bf7\u67e5\u770b\u65e5\u5fd7\u6587\u4ef6\u786e\u5b9a\u5931\u8d25\u7684\u539f\u56e0\u3002</li> <li>\u5f97\u5230 bitstream \u540e\uff0c\u6211\u4eec\u9700\u8981\u5c06\u4e0b\u8f7d\u5668\u8fde\u63a5\u5230\u7535\u8111\u4e0a\uff0c\u70b9\u51fb<code>PROGRAM AND DEBUG &gt; Open Hardware Manager &gt; Open Target &gt; Auto Connect</code> \u8fdb\u884c\u8bc6\u522b\u548c\u8fde\u63a5\uff0c\u6210\u529f\u8fde\u63a5\u540e\uff0c\u70b9\u51fb <code>Program Device</code> \u9009\u62e9 <code>xc7a100t</code> \u8bbe\u5907\uff0c\u5728\u4e0b\u8f7d\u7a0b\u5e8f\u754c\u9762\u9009\u62e9\u6211\u4eec\u521a\u521a\u751f\u6210\u7684\u6bd4\u7279\u6d41\u6587\u4ef6\uff0c\u5c06\u5176\u4e0b\u8f7d\u5230\u677f\u4e0a\u3002\u8fd9\u4e00\u6b65\u53ef\u80fd\u4f1a\u51fa\u73b0\u9a71\u52a8\u672a\u5b89\u88c5\u7684\u95ee\u9898\uff0c\u8bf7\u81ea\u884c\u5c1d\u8bd5\u89e3\u51b3\uff0c\u5982\u679c\u65e0\u6cd5\u89e3\u51b3\u95ee\u9898\u8bf7\u53ca\u65f6\u8054\u7cfb\u52a9\u6559\u3002</li> </ul>"},{"location":"Lab0/vivado_guide/#ip","title":"IP \u6838","text":"<p>Vivado \u7684\u5f3a\u5927\u4e4b\u5904\u5728\u4e8e IP \u6a21\u5757\u7684\u53ef\u91cd\u7528\u6027\u3002\u4ee5\u4e0a\u662f\u8bbe\u8ba1\u8005\u81ea\u5df1\u8bbe\u8ba1\u5305\u542b\u6e90\u6587\u4ef6\u7684\u6d41\u7a0b\uff0c\u63a5\u4e0b\u6765\u4ecb\u7ecd\u4f7f\u7528\u5e76\u521b\u5efa IP \u6838\u7684\u6d41\u7a0b\u3002</p> <p>\u6ce8\u610f\u5230\u5728\u771f\u6b63\u7684\u5de5\u4e1a\u6d41\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u4eff\u771f\u901a\u8fc7\uff0c\u786e\u8ba4\u6a21\u5757\u529f\u80fd\u51c6\u786e\u4e4b\u540e\uff0c\u624d\u8fdb\u884c\u6a21\u5757\u7684\u5c01\u88c5\u3002</p> <p>\u8fd9\u91cc\u6211\u4eec\u4ee5\u751f\u6210\u4e00\u4e2a 5 \u4f4d\u7684\u4e8c\u9009\u4e00\u7684\u591a\u8def\u9009\u62e9\u5668 <code>MUX2T1_5</code> \u7684 IP \u6838\u4e3a\u4f8b\u3002</p>"},{"location":"Lab0/vivado_guide/#ip_1","title":"\u542b\u6e90\u4ee3\u7801\u7684 IP \u6838\u5c01\u88c5","text":"<ul> <li>\u5728\u4e0a\u65b9\u83dc\u5355\u680f\u548c\u5feb\u6377\u952e\u7a97\u53e3\u5355\u51fb <code>Tools -&gt; Create and Package New IP -&gt; Next</code>\u3002</li> <li>\u9009\u62e9 <code>Package your current project</code>\uff0c\u70b9\u51fb <code>Next</code>\uff0c\u9009\u62e9 IP \u7684\u4fdd\u5b58\u8def\u5f84\uff0c\u70b9\u51fb <code>Next</code>\uff0c\u70b9\u51fb <code>Finish</code>\u3002</li> <li>\u968f\u540e\u4f1a\u51fa\u73b0 <code>Package IP - MUX2T1_5</code> \u7684\u754c\u9762\uff0c\u9009\u62e9 <code>Review and Package</code>,\u70b9\u51fb <code>Package IP</code>\u3002</li> <li>\u8fd9\u6837\uff0c<code>MUX2T1_5</code> \u7684 IP \u6a21\u5757\u5c31\u5c01\u88c5\u5b8c\u6210\u3002 </li> </ul>"},{"location":"Lab0/vivado_guide/#ip_2","title":"\u4e0d\u542b\u6e90\u4ee3\u7801\u7684 IP \u6838\u5c01\u88c5","text":"<ul> <li> <p>\u7f51\u8868\u6587\u4ef6 <code>.edf</code> \u7684\u751f\u6210\u3002</p> <ul> <li>\u5de5\u7a0b\u7684\u521b\u5efa\uff0c\u6e90\u6587\u4ef6\u6dfb\u52a0\uff0c\u6b65\u9aa4\u4e0e\u4e0a\u8ff0\u76f8\u540c\u3002</li> <li>\u5728\u5de5\u4f5c\u6d41\u7a97\u53e3\u4e2d\u627e\u5230 <code>Settings</code> \u6253\u5f00\u8bbe\u7f6e\u540e\u627e\u5230 <code>Synthesis</code> \u9009\u9879\u5e76\u70b9\u51fb\uff0c\u5728 <code>Options</code> \u90e8\u5206\u5212\u5230\u6700\u4e0b\u9762\uff0c\u5728 <code>More Options</code> \u4e00\u680f\u8f93\u5165 <code>-mode out_of_context</code> \u5c5e\u6027\uff0c\u8868\u793a\u5728\u8be5\u7ea7\u4e0d\u63d2\u5165\u4efb\u4f55 I/O BUFFERs\u3002\u8bbe\u7f6e\u540e\uff0c\u70b9\u51fb <code>OK</code>\u3002</li> <li>\u968f\u540e\u5728\u5de5\u4f5c\u6d41\u7a97\u53e3\u70b9\u51fb <code>Run Synthesis</code> \u5f00\u59cb\u7efc\u5408\u3002</li> <li>\u7efc\u5408\u7ed3\u675f\u540e\u5f39\u51fa <code>Synthesis Completed</code> \u7684\u5bf9\u8bdd\u6846\uff0c\u5728\u8be5\u5bf9\u8bdd\u6846\u4e2d\uff0c\u9009\u62e9 <code>Open Synthesized Design</code> \u524d\u9762\u7684\u590d\u9009\u6846\u5e76\u70b9\u51fb <code>OK</code>\u3002</li> <li>\u5728 Vivado \u5f53\u524d\u8bbe\u8ba1\u754c\u9762\u5e95\u90e8\u7684 <code>Tcl Console</code> \u7a97\u53e3\u4e2d\u4f9d\u6b21\u8f93\u5165\u4e0b\u9762\u7684\u547d\u4ee4\uff1a<ul> <li><code>write_verilog -mode synth_stub E:/FPGA/ip/MUX2T1_5.v</code>\u5bfc\u51fa\u7a7a\u7aef\u53e3\u6587\u4ef6\u3002</li> <li><code>write_edif E:/FPGA/ip/MUX2T1_5.edf</code> \u5c06 <code>MUX2T1_T.edf</code> \u6587\u4ef6\u5199\u5230\u9009\u62e9\u7684\u76ee\u5f55\u4e0b\u3002\uff08\u76ee\u5f55\u6309\u5b9e\u9645\u9700\u6c42\u5373\u53ef\uff09\u82e5\u5f53\u524d\u6e90\u6587\u4ef6\u91cc \u542b\u6709 Xilinx IP \u5219\u9700\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u751f\u6210 <code>.edf</code> \u6587\u4ef6\uff1a<code>write_edif -security_mode all E:/FPGA/ip/MUX2T1_5.edf</code>\u3002</li> </ul> </li> </ul> </li> <li> <p>\u6839\u636e <code>.edf</code> \u6587\u4ef6\u8fdb\u884c IP \u5c01\u88c5\u3002</p> <ul> <li>\u5de5\u7a0b\u7684\u521b\u5efa\uff0c\u6b65\u9aa4\u4e0e\u4e0a\u8ff0\u76f8\u540c\u3002</li> <li>\u5728\u6dfb\u52a0\u6e90\u6587\u4ef6\u65f6\uff0c\u5355\u51fb <code>Add Files</code> \u6309\u94ae\uff0c\u5f39\u51fa <code>Add Source Files</code> \u5bf9\u8bdd\u6846\u3002\u5728\u8be5\u5bf9\u8bdd\u6846\u4e2d\uff0c\u627e\u5230 <code>MUX2T1_5.edf</code>\uff0c<code>MUX2T1_5.v</code> \u6587\u4ef6\u3002\u5e76\u52fe\u9009 <code>Copy sources into project</code>\uff0c\u70b9\u51fb <code>finish</code> \u76f4\u63a5\u7ed3\u675f\u3002</li> <li>\u63a5\u4e0b\u6765\u7684\u5c01\u88c5\u6b65\u9aa4\u4e0e\u4e4b\u524d\u7c7b\u4f3c\uff0c\u5728 Vivado \u5f53\u524d\u5de5\u7a0b\u4e3b\u754c\u9762\u7684\u4e3b\u83dc\u5355\u4e0b\uff0c\u6267\u884c\u83dc\u5355\u547d\u4ee4 <code>Tools -&gt; Createand IP Package...</code>\uff0c\u8bf7\u53c2\u8003\u5e26\u6e90\u6587\u4ef6\u7684\u65b9\u6cd5\u3002\u5c01\u88c5\u5b8c\u6210\uff0c\u53ef\u5728\u5bf9\u5e94\u76ee\u5f55\u4e0b\u67e5\u770b\u7ed3\u679c\u6587\u4ef6\u3002  </li> </ul> </li> </ul>"},{"location":"Lab0/vivado_guide/#romram","title":"\u5b58\u50a8\u5668 ROM\u3001RAM","text":"<p>ROM\u3001RAM \u662f FPGA \u4e2d\u5e38\u89c1\u7684\u5b58\u50a8\u5668\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 IP \u6838\u751f\u6210\u8fd9\u4e24\u79cd\u5b58\u50a8\u5668\u3002</p>"},{"location":"Lab0/vivado_guide/#rom","title":"ROM","text":"<p>\u4e0b\u9762\u6211\u4eec\u4ee5\u7528 IP \u6838\u751f\u6210\u4e00\u4e2a 1024\\(\\times\\)32bit \u7684 ROM \u6838\u4e3a\u4f8b\u3002</p> <ul> <li>\u5728\u5de5\u4f5c\u6d41\u7a97\u53e3\u9009\u62e9 <code>IP Catalog</code>\uff0c\u5c06\u5728\u5de5\u4f5c\u533a\u5f39\u51fa <code>IP Catalog</code> \u7684\u7a97\u53e3\u3002</li> <li>\u70b9\u51fb\u641c\u7d22\u680f\uff0c\u8f93\u5165 <code>memory generator</code>\uff0c\u9009\u62e9 <code>Distributed Memory Generator</code>\uff08\u5f02\u6b65\u8bbf\u95ee\uff09 \u6216 <code>Block Memory Generator</code>\uff08\u540c\u6b65\u8bbf\u95ee\uff09\u3002</li> <li> <p>\u53cc\u51fb <code>Distributed Memory Generator</code> \u5f39\u51fa\u7a97\u53e3\u7b2c 1 \u9875\uff0c\u8fdb\u884c\u6838\u53c2\u6570\u8bbe\u7f6e\uff1a     </p> <p>\u6211\u4eec\u586b\u5165\u5b58\u50a8\u5355\u5143\u6570 1024 \u548c\u5b57\u957f 32\uff0c\u5b58\u50a8\u7c7b\u578b\u9009\u62e9 ROM\uff08\u4e0d\u8981\u70b9\u51fb <code>OK</code>\uff09\u3002</p> </li> <li> <p>\u70b9\u51fb <code>RST &amp; Initialization</code>\uff0c\u70b9\u51fb <code>Browse...</code> \u9009\u62e9\u521d\u59cb\u5316\u5173\u8054\u6587\u4ef6\uff08<code>ROM.coe</code>\uff09\uff0c\u5176\u4f59\u9009\u9879\u4e0d\u7528\u4fee\u6539\uff0c\u968f\u540e\u70b9\u51fb <code>OK</code> \u5373\u53ef\u751f\u6210 IP \u6838\u3002</p> </li> <li>\u751f\u6210\u540e\u8c03\u7528\uff1a\u6838\u751f\u6210\u540e\u5728\u6e90\u6587\u4ef6\u7a97\u53e3\u51fa\u73b0 <code>ROM_D.xci</code> \u6a21\u5757\u3002\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5728 verilog \u4ee3\u7801\u91cc\u5b9e\u4f8b\u5316\u8fd9\u4e2a\u6a21\u5757\uff0c\u4f8b\u5b50\u5982\u4e0b\uff1a     <pre><code>ROM_B your_instance_name (\n.a(a),      // input [9 : 0] a\n.spo(spo)   // output [31 : 0] spo\n);\n</code></pre></li> </ul>"},{"location":"Lab0/vivado_guide/#ram","title":"RAM","text":"<p>RAM \u7684\u751f\u6210\u4e0e ROM \u7c7b\u4f3c\uff0c\u533a\u522b\u5982\u4e0b\uff1a</p> <ul> <li><code>memory generator</code> \u53ea\u80fd\u9009\u62e9 <code>Block Memory Generator</code>\uff08\u6709\u65f6\u949f\uff09\u3002</li> <li>\u6838\u53c2\u6570\u8bbe\u7f6e\u65f6\uff0c\u5728 <code>Basic</code> \u680f\u4e0b\u9762\u7684 <code>Memory Type</code> \u91cc\uff0c\u4e0b\u62c9\u9009\u62e9 <code>Single Port RAM</code>\uff1b\u5728 <code>Port A Option</code> \u8bbe\u7f6e <code>Write Width</code> \u548c <code>Read Width</code> \u4e3a 32\uff0c<code>Write Depth</code> \u548c <code>Read Depth</code> \u4e3a 1024\u3002<code>Enable Port Type</code> \u9009\u62e9 <code>Always Enabled</code>\uff1b<code>Port A Optional Output Registers</code> \u5904\u4e0d\u8981\u52fe\u9009 <code>Primitive Output Register</code>\uff08\u82e5\u52fe\u9009\uff0c\u8f93\u51fa\u4f1a\u6162\u4e00\u4e2a\u5468\u671f\uff09\u3002</li> <li>\u751f\u6210\u6210\u529f\u540e\u5373\u53ef\u5b9e\u4f8b\u5316\u8fd9\u4e2a\u6a21\u5757\uff0c\u4f8b\u5b50\u5982\u4e0b\uff1a     <pre><code>RAM U3 (\n.clka(clk_m),       // input clka\n.wea(data_ram_we),  // input [0 : 0] wea\n.addra(ram_addr),      // input [9 : 0] addra\n.dina(ram_data_in),   // input [31:0] dina\n.douta(ram_data_out)// output [31:0] douta\n);\n</code></pre></li> </ul>"},{"location":"Lab0/vivado_guide/#faq","title":"FAQ","text":""},{"location":"Lab0/vivado_guide/#synthesis-failed-with-no-warningserrors","title":"synthesis failed with NO Warnings/Errors","text":"<p>\u8bf7\u67e5\u770b\u201c\u8ba1\u7b97\u673a\u540d\u79f0\u201d\uff0c\u5982\u679c\u4e3a\u4e2d\u6587\uff0c\u8bf7\u53c2\u7167 Windows 10 \u4fee\u6539\u7535\u8111\u540d\u79f0\u5c06\u8ba1\u7b97\u673a\u540d\u79f0\u4fee\u6539\u4e3a\u82f1\u6587\u3002Windows 11 \u7528\u6237\u53ef\u4ee5\u5728<code>\u8bbe\u7f6e-\u7cfb\u7edf-\u7cfb\u7edf\u4fe1\u606f-\u91cd\u547d\u540d\u8fd9\u53f0\u7535\u8111</code>\u8fdb\u884c\u4fee\u6539\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u641c\u7d22\u201c\u91cd\u547d\u540d\u4f60\u7684\u7535\u8111\u201d\u3002\u611f\u8c22\u5434cy\u540c\u5b66\u53d1\u73b0\u7684\u89e3\u51b3\u65b9\u6cd5\u3002</p>"},{"location":"Lab1/Lab1/","title":"Lab1","text":"<p>2024.3.7 \u66f4\u65b0\uff1a\u5728 ALU \u90e8\u5206\u6dfb\u52a0\u4e86\u4e00\u9053\u601d\u8003\u9898\uff0c\u8bf7\u540c\u5b66\u4eec\u5b8c\u6210\u5e76\u5728\u62a5\u544a\u4e2d\u4f53\u73b0\uff0c\u8c22\u8c22\uff01</p> <p>\u672c\u5b9e\u9a8c\u4e5f\u662f\u70ed\u8eab\u7684\u4e00\u90e8\u5206\uff0c\u6240\u6d89\u53ca\u7684\u5185\u5bb9\u4ecd\u7136\u6ca1\u6709\u8d85\u8fc7\u300a\u6570\u5b57\u903b\u8f91\u8bbe\u8ba1\u300b\u4e00\u8bfe\u7684\u5b9e\u9a8c\u5185\u5bb9\ud83e\uddd0\u3002</p> <p>\u7b2c\u4e00\u8282\uff1a ALU \u4e0e Register Files\uff0c\u6839\u636e\u8981\u6c42\u5b9e\u73b0 ALU \u6a21\u5757\u4ee5\u53ca\u5bc4\u5b58\u5668\u5806\u3002</p> <p>\u7b2c\u4e8c\u8282\uff1a\u7b80\u5355\u7684\u6709\u9650\u72b6\u6001\u673a\u8bbe\u8ba1\uff0c\u5b66\u4e60\u201c\u5e8f\u5217\u68c0\u6d4b\u4efb\u52a1\u201d\u7684\u4ee3\u7801\u8bbe\u8ba1\u540e\uff0c\u5b8c\u6210\u4e00\u4e2a\u5c0f\u9879\u76ee\u201c\u6d4b\u8c0e\u4eea\u201d\u3002</p> <p>\u5f00\u59cb\u5b9e\u9a8c\u4e4b\u524d\uff0c\u4f60\u9700\u8981\u56de\u987e\u6216\u7b80\u5355\u601d\u8003\uff1a\uff08\u5e76\u4e0d\u662f\u601d\u8003\u9898\uff09</p> <ul> <li>\u5982\u4f55\u5bf9\u8bbe\u8ba1\u7684\u6a21\u5757\u8fdb\u884c\u6d4b\u8bd5\uff1f</li> <li>Verilog \u4e2d<ul> <li>\u5b9e\u73b0\u57fa\u672c\u529f\u80fd\u7684 <code>module</code> \u7531\u54ea\u4e9b\u90e8\u5206\u7ec4\u6210\uff1f</li> <li><code>always @()</code> \u5757\u662f\u4ec0\u4e48\u542b\u4e49\uff0c\u600e\u4e48\u4f7f\u7528\u5b83\u6765\u5b8c\u6210\u5bc4\u5b58\u5668\u7ec4\u8bfb\u5199\u64cd\u4f5c\uff1f</li> <li>\u7c7b\u578b <code>wire</code> \u548c <code>reg</code> \u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f</li> <li>\u8d4b\u503c\u64cd\u4f5c <code>=</code> \u4e0e <code>&lt;=</code> \u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f</li> </ul> </li> <li>FSM\uff08Finite State Machine\uff0c\u6709\u9650\u72b6\u6001\u673a\uff09\u662f\u4ec0\u4e48\uff0c\u4f60\u4f1a\u600e\u4e48\u8bbe\u8ba1\u72b6\u6001\u8f6c\u79fb\u90e8\u5206\u7684 code\uff1f</li> </ul> <p>\u672c\u5b9e\u9a8c\u9700\u8981\u63d0\u4ea4\u5b9e\u9a8c\u62a5\u544a\uff08Lab0-3 \u5408\u6210\u4e00\u4efd\u63d0\u4ea4\uff09</p> <p>\u672c\u5b9e\u9a8c\u6839\u636e\u4eff\u771f\u9a8c\u6536</p> <p>\u63d0\u4ea4\u5b9e\u9a8c\u62a5\u544a\u65f6\uff0c\u4f60\u9700\u8981\u9644\u4e0a\u90e8\u5206\u6e90\u4ee3\u7801\uff0c\u8bf7\u6ce8\u610f\u6309\u7167\u683c\u5f0f\u66f4\u6539\u6587\u4ef6\u540d\uff1a</p> <pre><code>src_0_3_3220101145_\u738b\u67d0\u67d0.zip/ # \u7528\u4e00\u4e2azip\u6253\u5305\u6e90\u4ee3\u7801\n\u251c\u2500\u2500 Lab1 # \u672c\u5b9e\u9a8c\u8981\u6c42\u63d0\u4f9b\u7684\u6e90\u4ee3\u7801\u6587\u4ef6\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ALU.v # ALU \u90e8\u5206\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ALU_tb.v\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Regs.v # RegFile \u90e8\u5206\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Regs_tb.v\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 TruthEvaluator.v # FSM \u90e8\u5206\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 TruthEvaluator_tb.v\n\u251c\u2500\u2500 Lab2\n\u2514\u2500\u2500 Lab3\n\nreport_0_3_3220101145_\u738b\u67d0\u67d0.pdf # \u4f60\u7684\u5b9e\u9a8c\u62a5\u544a\uff0cLab0-3\u5408\u6210\u4e00\u4efd\uff0c\u6ce8\u610f\u63d0\u4ea4PDF\u683c\u5f0f\n</code></pre> <p>\u6309\u65f6\u63d0\u4ea4\u5230\u5b66\u5728\u6d59\u5927\u5e73\u53f0\u3002</p>"},{"location":"Lab1/ALU_RegFile/ALU/","title":"ALU","text":"<p>ALU (Arithmetic Logic Unit) \u662f\u8d1f\u8d23\u5bf9\u4e8c\u8fdb\u5236\u6574\u6570\u8fdb\u884c\u7b97\u672f\u8fd0\u7b97\u548c\u4f4d\u8fd0\u7b97\u7684\u7ec4\u5408\u7535\u8def\u90e8\u4ef6\uff0c\u672c\u5b9e\u9a8c\u8981\u6c42\u4f60\u8bbe\u8ba1\u4e00\u4e2a32\u4f4d\u7684\u80fd\u591f\u5bf9\u4e24\u4e2a\u8f93\u5165\u8fdb\u884c\uff1a\u65e0\u7b26\u53f7\u6570\u52a0\u6cd5/\u51cf\u6cd5\u4e0e\u6ea2\u51fa\u5224\u65ad\u3001\u65e0\u7b26\u53f7\u4e0e\u6709\u7b26\u53f7\u903b\u8f91/\u7b97\u672f\u79fb\u4f4d\u3001\u6309\u4f4d\u4e0e/\u6216/\u5f02\u6216\u3002</p>"},{"location":"Lab1/ALU_RegFile/ALU/#_1","title":"\u6a21\u5757\u5b9e\u73b0","text":"<p>\u62a5\u544a\u4e2d\u9700\u8981\u7ed9\u51fa\u4f60\u5199\u51fa\u7684\u5b8c\u6574\u4ee3\u7801\u3002</p> <p>\u53c2\u8003\u6807\u51c6\u7b2c5.1\u8282 Operators\uff0c\u4f7f\u7528\u8fd0\u7b97\u7b26\u5b8c\u6210\u3002\u4f60\u53ef\u80fd\u9700\u8981\u53c2\u8003\u6807\u51c6\u7b2c5.5\u8282 Signed expressions\uff0c\u4f7f\u7528 <code>$signed(), $unsigned()</code> \u5b8c\u6210\u5b9e\u9a8c\u3002</p> <p>\u4f60\u7684\u6a21\u5757\u540d\u4e0e\u7aef\u53e3\u540d\u5e94\u4e3a\uff1a</p> ALU.v<pre><code>module ALU (\ninput [31:0]  A,\ninput [31:0]  B,\ninput [3:0]   ALU_operation,\noutput[31:0]  res,\noutput        zero\n);\n// Your code\nendmodule\n</code></pre> \u601d\u8003\u9898 <p>\u5c0f Q \u540c\u5b66\u5728 2023 \u5e74\u6625\u590f\u5b66\u671f\u505a\u8ba1\u7b97\u673a\u7ec4\u6210\u4e0e\u8bbe\u8ba1\u7684 ALU \u65f6\uff0c\u4e3a\u4e86\u5b9e\u73b0 SRA \u6307\u4ee4\u4f7f\u7528\u4e86\u4e0b\u9762\u7684\u4ee3\u7801\uff1a <pre><code>assign res = (...) ? ... : (ALU_operation == 4'd7) ? ($signed(A) &gt;&gt;&gt; $sigend(B)) : ...;\n</code></pre> \u4f46\u662f\u8fd9\u6837\u5728\u4eff\u771f <code>ALU_opeation = 4\u2032d7, A = 32'hffff _0000, B = 32\u2032d4</code> \u65f6\uff0c\u7ed3\u679c\u5374\u662f <code>32'h0fff_f000</code>\uff0c\u5e76\u6ca1\u6709\u5728\u9ad8\u4f4d\u586b\u5145 1\uff08\u4f60\u53ef\u4ee5\u81ea\u884c\u8fdb\u884c\u4eff\u771f\u67e5\u770b\uff09\u3002</p> <p>\u8bf7\u4f60\u5e2e\u52a9\u53ef\u601c\u7684\u5c0f Q \u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\ud83d\ude2d\uff0c\u5b8c\u6210\u5b9e\u9a8c\uff01</p> <ul> <li>\u4f60\u9700\u8981\u8bf4\u660e\uff1a<ul> <li>\u4f60\u662f\u901a\u8fc7\u4ec0\u4e48\u9014\u5f84\u4e86\u89e3\u4e0e\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1f\uff08\u53c2\u8003\u5185\u5bb9\u8bf7\u7ed9\u51fa\u94fe\u63a5\uff09</li> <li>\u7ed3\u5408\u4f60\u7684\u53c2\u8003\u5185\u5bb9\uff0c\u8c08\u8c08\u4f60\u8ba4\u4e3a\u4e0a\u9762\u7684\u9519\u8bef\u662f\u4ec0\u4e48\u539f\u56e0\u5bfc\u81f4\u3002</li> </ul> </li> <li>\u4f60\u53ef\u80fd\u901a\u8fc7\u4ee5\u4e0b\u9014\u5f84\u5b8c\u6210\u672c\u9898\uff1a<ul> <li>\u4f7f\u7528\u641c\u7d22\u5f15\u64ce\uff08\u6700\u597d\u4e0d\u8981\u7528 Baidu \uff09\uff0c\u770b\u770b\u80fd\u4e0d\u80fd\u501f\u9274\u524d\u4eba\u7684\u667a\u6167\u3002</li> <li>\u67e5\u770b Verilog \u5b98\u65b9\u624b\u518c\uff0c\u4e86\u89e3 <code>? :</code>\u3001<code>$signed()</code>\u3001<code>&gt;&gt;&gt;</code> \u7684\u8bed\u4e49\u548c\u7279\u6027\u53ef\u80fd\u4f1a\u6709\u5e2e\u52a9\u3002</li> </ul> </li> </ul> <p>\u611f\u8c22\u4f60\u5e2e\u5c0f Q \u5b8c\u6210\u4e86\u5b9e\u9a8c\ud83d\ude0a\uff01\u672c\u6b21\u601d\u8003\u9898\u5185\u5bb9\u7b54\u6848\u4e0d\u552f\u4e00\uff0c\u8a00\u4e4b\u6210\u7406\uff0c\u5c55\u73b0\u4e86\u4f60\u601d\u8003\u95ee\u9898\u7684\u8fc7\u7a0b\u5373\u53ef\u3002</p>"},{"location":"Lab1/ALU_RegFile/ALU/#_2","title":"\u529f\u80fd\u8981\u6c42","text":"<p>\u8f93\u5165\u7aef\u53e3\u4e2d <code>A, B</code> \u4e3a\u6570\u636e\u8f93\u5165\u53e3\uff0c<code>ALU_operation</code> \u7528\u6765\u9009\u62e9 ALU \u6267\u884c\u7684\u8fd0\u7b97\u7c7b\u578b\u3002\u8f93\u51fa\u7aef\u53e3\u4e2d <code>res</code> \u7528\u6765\u8f93\u51fa\u8fd0\u7b97\u7ed3\u679c\uff0c<code>zero</code> \u7528\u6765\u5224\u65ad\u8fd0\u7b97\u7ed3\u679c\u662f\u5426\u4e3a 0\u3002</p> <p><code>ALU_operation</code> \u4e0e\u8fd0\u7b97\u7c7b\u578b\u7684\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a</p> \u64cd\u4f5c ALU_operation \u503c ADD 4'd0 SUB 4'd1 SLL 4'd2 SLT 4'd3 SLTU 4'd4 XOR 4'd5 SRL 4'd6 SRA 4'd7 OR 4'd8 AND 4'd9"},{"location":"Lab1/ALU_RegFile/ALU/#_3","title":"\u6307\u4ee4\u89e3\u91ca","text":""},{"location":"Lab1/ALU_RegFile/ALU/#_4","title":"\u7b97\u672f\u8fd0\u7b97\u64cd\u4f5c","text":"<p>ALU \u5904\u7406\u7684\u7b97\u672f\u8fd0\u7b97\u64cd\u4f5c\u4e2d ADD SUB \u5c06\u4e24\u4e2a\u8fd0\u7b97\u6570\u5f53\u4f5c\u7b26\u53f7\u6570\u53c2\u4e0e\u8fd0\u7b97\uff0c\u5206\u522b\u7ed9\u51fa\u7ed3\u679c <code>A+B</code> \u4e0e <code>A-B</code>\u3002</p> <p>\u6bd4\u8f83\u64cd\u4f5c SLT SLTU \u7528\u4e8e\u6bd4\u8f83\u4e24\u64cd\u4f5c\u6570\uff0c\u82e5 <code>A&lt;B</code> \u5219\u7ed3\u679c\u4e3a <code>1</code>\uff0c\u5426\u5219\u4e3a <code>0</code>\u3002\u5b83\u4eec\u7684\u533a\u522b\u5728\u4e8e\uff0cSLT \u5c06\u8fd0\u7b97\u6570\u89c6\u4f5c\u7b26\u53f7\u6570\uff0cSLTU \u5c06\u8fd0\u7b97\u6570\u89c6\u4f5c\u65e0\u7b26\u53f7\u6570\u3002</p>"},{"location":"Lab1/ALU_RegFile/ALU/#_5","title":"\u4f4d\u8fd0\u7b97\u64cd\u4f5c","text":"<p>XOR OR AND \u5747\u4e3a\u6309\u4f4d\u64cd\u4f5c\uff0c\u8f93\u51fa\u5bf9\u5e94\u7684 <code>A^B, A|B, A&amp;B</code> \u5373\u53ef\u3002</p> <p>\u79fb\u4f4d\u64cd\u4f5c SLL SRL SRA\u3002\u4ee5 SLL \u4e3a\u4f8b\uff0c\u672c\u5b9e\u9a8c\u8981\u6c42\u79fb\u4f4d\u64cd\u4f5c\u7684\u7ed3\u679c\u662f <code>A &lt;&lt; B[4:0]</code>\uff0c\u5373\u79fb\u52a8\u4f4d\u6570\u7531 <code>B</code> \u7684\u4f4e\u4e94\u4f4d\u51b3\u5b9a\uff0c<code>B</code> \u7684\u9ad8\u4f4d\u5e94\u5f53\u5ffd\u7565\u3002\u5b83\u4eec\u7684\u533a\u522b\u5728\u4e8e\uff0c\u903b\u8f91\u5de6\u79fb SLL \u7684\u7ed3\u679c\u53f3\u4fa7\u8865 0\uff1b\u903b\u8f91\u53f3\u79fb SRL \u7684\u7ed3\u679c\u5de6\u4fa7\u8865 0\uff1b\u7b97\u672f\u53f3\u79fb SRA \u7684\u7ed3\u679c\u5de6\u4fa7\u8865\u7b26\u53f7\u4f4d\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c<code>A = 32'hDEADBEEF, B = 32'hF00000E4</code> \u7684 SRA \u7ed3\u679c\u4e3a <code>32'hFDEADBEE</code>\uff0c\u56e0\u4e3a <code>A</code> \u7684\u6700\u9ad8\u4f4d\u4e3a <code>1</code> \u4e14 <code>B</code> \u7684\u4f4e 5 \u4f4d\u4e3a <code>5'b0_0100</code>\uff0c\u5c06 <code>A</code> \u53f3\u79fb 4 \u4f4d\u9ad8\u4f4d\u8865 <code>1</code> \u5373\u5f97\u5230\u7ed3\u679c\u3002</p>"},{"location":"Lab1/ALU_RegFile/ALU/#_6","title":"\u4eff\u771f\u6d4b\u8bd5","text":"<p>\u62a5\u544a\u4e2d\u9700\u8981\u7ed9\u51fa testbench \u4ee3\u7801\uff0c\u6d4b\u8bd5\u6ce2\u5f62\u4e0e\u89e3\u91ca\uff08\u6ce2\u5f62\u622a\u56fe\u9700\u8981\u4fdd\u8bc1\u7f29\u653e\u4e0e\u53d8\u91cf\u6570\u5236\u5408\u9002\uff09\u3002</p> <p>\u57fa\u7840\u7684\u4eff\u771f\u6ce2\u5f62\u5982\u4e0b\uff0c\u4f46\u5b83\u8fc7\u4e8e\u7b80\u5355\uff0c\u4f60\u9700\u8981\u6dfb\u52a0\u82e5\u5e72\u8fb9\u754c\u6d4b\u8bd5\u4ee5\u5b8c\u5584\u3002</p> ALU_tb.v<pre><code>`timescale 1ns / 1ps\nmodule ALU_tb;\nreg [31:0]  A, B;\nreg [3:0]   ALU_operation;\nwire[31:0]  res;\nwire        zero;\nALU ALU_u(\n.A(A),\n.B(B),\n.ALU_operation(ALU_operation),\n.res(res),\n.zero(zero)\n);\ninitial begin\nA=32'hA5A5A5A5;\nB=32'h5A5A5A5A;\nALU_operation =4'b1000;\n#100;\nALU_operation =4'b1001;\n#100;\nALU_operation =4'b0111;\n#100;\nALU_operation =4'b0110;\n#100;\nALU_operation =4'b0101;\n#100;\nALU_operation =4'b0100;\n#100;\nALU_operation =4'b0011;\n#100;\nALU_operation =4'b0010;\n#100;\nALU_operation =4'b0001;\n#100;\nALU_operation =4'b0000;\n#100;\nA=32'h01234567;\nB=32'h76543210;\nALU_operation =4'b0111;\nend\nendmodule\n</code></pre>"},{"location":"Lab1/ALU_RegFile/RegFile/","title":"Register Files","text":"<p>RV32I \u53ef\u4ee5\u4f7f\u7528\u7684\u6574\u578b\u5bc4\u5b58\u5668\u5171\u670932\u4e2a\uff0c\u672c\u8282\u5c06\u5b9e\u73b0\u4e00\u4e2a\u670932\u4e2a 32-bit \u5bc4\u5b58\u5668\u7684\u5bc4\u5b58\u5668\u7ec4\u3002</p>"},{"location":"Lab1/ALU_RegFile/RegFile/#_1","title":"\u6a21\u5757\u5b9e\u73b0","text":"<p>\u62a5\u544a\u4e2d\u9700\u8981\u7ed9\u51fa\u4f60\u5199\u51fa\u7684\u5b8c\u6574\u4ee3\u7801\u3002</p> <p>Register File \u9700\u8981\u5b9e\u73b0\u8bfb\u5199\u6307\u5b9a\u5bc4\u5b58\u5668\u7684\u529f\u80fd\uff0c\u5e76\u4fdd\u8bc1\u4e00\u5b9a\u7684\u65f6\u5e8f\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7b2c 0 \u53f7\u5bc4\u5b58\u5668\u9700\u8981\u59cb\u7ec8\u4fdd\u6301\u6052\u5b9a\u503c 0\uff0c\u65e0\u6cd5\u901a\u8fc7\u5199\u5bc4\u5b58\u5668\u4fee\u6539\u5176\u503c\u3002</p> <p>\u8003\u8651\u4e00\u4e2a\u7b80\u5355\u7684\u6307\u4ee4 <code>add x1, x2, x3</code>\uff0c\u5b83\u7684\u542b\u4e49\u662f\u8ba1\u7b97\u5bc4\u5b58\u5668 <code>x2</code> \u4e0e <code>x3</code> \u7684\u548c\uff0c\u5e76\u5c06\u7ed3\u679c\u4fdd\u5b58\u5230\u5bc4\u5b58\u5668 <code>x1</code> \u4e2d\uff1b\u5728\u8fd9\u4e2a\u6307\u4ee4\u4e2d <code>x2, x3</code> \u88ab\u79f0\u4e3a\u6e90\u5bc4\u5b58\u5668(Source Registers, <code>rs</code>)\uff0c<code>x1</code> \u88ab\u79f0\u4e3a\u76ee\u7684\u5bc4\u5b58\u5668(Destination Register, <code>rd</code>)\u3002</p> <p>\u89c2\u5bdf\u5230\uff0c\u6211\u4eec\u6709\u53ef\u80fd\u5728\u4e00\u4e2a\u6307\u4ee4\u8fd0\u7b97\u4e2d\u9700\u8981\u8bfb\u53d6\u4e24\u4e2a\u6e90\u5bc4\u5b58\u5668\u7684\u503c\uff0c\u56e0\u6b64\u9700\u8981\u540c\u65f6\u652f\u6301\u4e24\u4e2a\u8bfb\u53e3\uff1b\u672c\u6b21\u5b9e\u9a8c\u53ea\u9700\u8981\u5728\u65f6\u949f\u4e0a\u5347\u6cbf\u8fdb\u884c\u4e00\u6b21\u5199\uff0c\u5373\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u53ea\u8fdb\u884c\u6700\u591a\u4e00\u6b21\u7684\u5bc4\u5b58\u5668\u5199\u3002</p> <p>\u5982\u679c\u4f60\u5bf9 Verilog \u7684\u7ed3\u6784\u548c\u8bed\u6cd5\u5f88\u751f\u758f\uff0c\u8bf7\u5148\u5b66\u4e60\u57fa\u7840\u5185\u5bb9\uff0c\u5982 <code>always</code> \u5757\u3001\u8d4b\u503c\u7b49\u3002</p> <p>\u5728\u9644\u4ef6 <code>Regs/Regs.v</code> \u7ed9\u51fa\u7aef\u53e3\u7684\u57fa\u7840\u4e0a\uff0c\u4f60\u9700\u8981\u6dfb\u52a032\u4e2a\u56fa\u5b9a\u7684\u5730\u5740\u8bfb\u53e3\u4ee5\u4fbfLab4\u4e2d\u76f4\u63a5\u4f7f\u7528\uff0c\u4f60\u7684\u7aef\u53e3\u5e94\u7c7b\u4f3c\u4e8e\uff1a</p> Regs.v<pre><code>module Regs(\ninput clk,\ninput rst,\ninput [4:0] Rs1_addr, input [4:0] Rs2_addr, input [4:0] Wt_addr, input [31:0]Wt_data, input RegWrite, output [31:0] Rs1_data, output [31:0] Rs2_data,\noutput [31:0] Reg00,\noutput [31:0] Reg01,\n...,\noutput [31:0] Reg31\n);\n// Your code here\nendmodule\n</code></pre>"},{"location":"Lab1/ALU_RegFile/RegFile/#_2","title":"\u4eff\u771f\u6d4b\u8bd5","text":"<p>\u62a5\u544a\u4e2d\u9700\u8981\u7ed9\u51fatestbench\u4ee3\u7801\uff0c\u6d4b\u8bd5\u6ce2\u5f62\u4e0e\u89e3\u91ca\uff08\u6ce2\u5f62\u622a\u56fe\u9700\u8981\u4fdd\u8bc1\u7f29\u653e\u4e0e\u53d8\u91cf\u6570\u5236\u5408\u9002\uff09\u3002</p> <p>\u7ed9\u51fa\u57fa\u672c\u7684\u6d4b\u8bd5\u4ee3\u7801\u5982\u4e0b\uff0c\u4f60\u9700\u8981\u8865\u5145\u5b8c\u5584\u6d4b\u8bd5\u66f4\u591a\u60c5\u51b5\u3002</p> Regs_tb.v<pre><code>`timescale 1ns / 1ns\nmodule Regs_tb;\nreg clk;\nreg rst;\nreg [4:0] Rs1_addr; reg [4:0] Rs2_addr; reg [4:0] Wt_addr; reg [31:0]Wt_data; reg RegWrite; wire [31:0] Rs1_data; wire [31:0] Rs2_data;\nRegs Regs_U(\n.clk(clk),\n.rst(rst),\n.Rs1_addr(Rs1_addr),\n.Rs2_addr(Rs2_addr),\n.Wt_addr(Wt_addr),\n.Wt_data(Wt_data),\n.RegWrite(RegWrite),\n.Rs1_data(Rs1_data),\n.Rs2_data(Rs2_data)\n);\nalways #10 clk = ~clk;\ninitial begin\nclk = 0;\nrst = 1;\nRegWrite = 0;\nWt_data = 0;\nWt_addr = 0;\nRs1_addr = 0;\nRs2_addr = 0;\n#100\nrst = 0;\nRegWrite = 1;\nWt_addr = 5'b00101;\nWt_data = 32'ha5a5a5a5;\n#50\nWt_addr = 5'b01010;\nWt_data = 32'h5a5a5a5a;\n#50\nRegWrite = 0;\nRs1_addr = 5'b00101;\nRs2_addr = 5'b01010;\n#100 $stop();\nend\nendmodule\n</code></pre>"},{"location":"Lab1/FSM/FSM/","title":"Finite State Machine","text":"<p>Finite State Machine\uff08FSM\uff0c\u6709\u9650\u72b6\u6001\u673a\uff09\u662f\u5728\u6709\u9650\u4e2a\u72b6\u6001\u4e4b\u95f4\u6309\u7167\u4e00\u5b9a\u89c4\u5f8b\u8f6c\u6362\u72b6\u6001\uff08\u5e76\u7ed9\u51fa\u8f93\u51fa\uff09\u7684\u65f6\u5e8f\u7535\u8def\u3002 FSM \u662f\u6570\u903b\u91cd\u70b9\u90e8\u5206\uff0c\u5982\u679c\u5370\u8c61\u6a21\u7cca\u8bf7\u8ba4\u771f\u590d\u4e60\u6570\u903b\u5bf9\u5e94\u90e8\u5206\uff0c\u5728\u6b64\u4e0d\u8d58\u8ff0\u3002</p> <p>\u672c\u8282\u5b9e\u9a8c\u8981\u6c42\u4f7f\u7528 Verilog \u7b49 HDL \u8bbe\u8ba1\u201c\u6d4b\u8c0e\u4eea\u201d\u7684\u4e00\u90e8\u5206\u3002</p>"},{"location":"Lab1/FSM/FSM/#_1","title":"\u95ee\u9898\u53d9\u8ff0","text":"<p>\u201c\u6d4b\u8c0e\u4eea\u201d\u63a5\u6536\u4e00\u6bb5\u53d9\u8ff0\uff0c\u7ed9\u51fa\u7ed3\u679c\u201c\u53ef\u4fe1\u201d\u6216\u201c\u4e0d\u53ef\u4fe1\u201d\u3002\u5728\u8bbe\u8ba1\u201c\u6d4b\u8c0e\u4eea\u201d\u529f\u80fd\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u62c6\u5206\u4e3a\u4e24\u4e2a\u6a21\u5757\uff0c\u771f\u5b9e\u5206\u6790\u5668(TruthAnalyzer)\u548c\u4fe1\u4efb\u8bc4\u4f30\u5668(TruthEvaluator)\u3002\u771f\u5b9e\u5206\u6790\u5668\u83b7\u5f97\u4e00\u6bb5\u8f93\u5165\uff0c\u5185\u90e8\u8fdb\u884c\u5206\u6790\u540e\uff0c\u7ed9\u51fa\u201c\u53ef\u4ee5\u4fe1\u4efb\u201d\u6216\u201c\u53ef\u80fd\u8bf4\u8c0e\u201d\u7684\u5224\u65ad\uff1b\u4fe1\u4efb\u8bc4\u4f30\u5668\u6839\u636e\u5e94\u7b54\u8005\u7684\u56de\u7b54\u8bda\u4fe1\u5ea6\u5386\u53f2\u4ee5\u53ca\u672c\u6b21\u771f\u5b9e\u5206\u6790\u5668\u7684\u5224\u65ad\uff0c\u7ed9\u51fa\u6700\u7ec8\u7684\u5224\u65ad\u3002\u5176\u6a21\u5f0f\u56fe\u5982\u4e0b\uff1a</p> <p></p> <p>\u672c\u6b21\u5b9e\u9a8c\u8981\u6c42\u5b8c\u6210\u4fe1\u4efb\u8bc4\u4f30\u5668\u7684\u6a21\u5757\u8bbe\u8ba1\u3002\u6a21\u5757\u540d\u4e0e\u7aef\u53e3\u540d\u5982\u4e0b\uff1a</p> <pre><code>module TruthEvaluator(\ninput  clk,\ninput  truth_detection,\noutput trust_decision\n);\n</code></pre> <p>\u6211\u4eec\u89c4\u5b9a\u5176\u8f93\u5165 <code>truth_detection</code> \u4e3a <code>1</code> \u65f6\u8868\u793a\u771f\u5b9e\u5206\u6790\u5668\u7ed9\u51fa\u7684\u7ed3\u679c\u662f\u201c\u53ef\u4ee5\u4fe1\u4efb\u201d\uff0c\u5426\u5219\u662f\u201c\u53ef\u80fd\u8bf4\u8c0e\u201d\uff1b\u5176\u8f93\u51fa <code>trust_decision</code> \u5728\u4fe1\u4efb\u8bc4\u4f30\u5668\u8ba4\u4e3a\u201c\u53ef\u4fe1\u201d\u65f6\u4e3a <code>1</code>\uff0c\u5426\u5219\u4e3a <code>0</code>\u3002</p> <p>\u4e3a\u4e86\u7b80\u5316\u8bbe\u8ba1\uff0c\u6211\u4eec\u89c4\u5b9a\u4fe1\u4efb\u8bc4\u4f30\u5668\u7684\u884c\u4e3a\u5982\u4e0b\u6240\u8ff0\uff1a</p> <ul> <li>\u5185\u90e8\u72b6\u6001\u6709 4 \u4e2a <code>HIGHLY_TRUSTWORTHY, TRUSTWORTHY, SUSPICIOUS, UNTRUSTWORTHY</code>\uff0c\u5206\u522b\u8868\u793a\u201c\u975e\u5e38\u53ef\u4fe1\u201d\u3001\u201c\u53ef\u4fe1\u201d\u3001\u201c\u53ef\u7591\u201d\u3001\u201c\u4e0d\u53ef\u4fe1\u201d<ul> <li>\u521d\u59cb\u5185\u90e8\u72b6\u6001\u4e3a\u201c\u975e\u5e38\u53ef\u4fe1\u201d <code>HIGHLY_TRUSTWORTHY</code></li> </ul> </li> <li>\u72b6\u6001\u8f6c\u79fb\u6bcf\u6b21\u65f6\u949f\u4e0a\u5347\u6cbf\uff0c\u6839\u636e\u8f93\u5165 <code>truth_detection</code> \u7684\u503c<ul> <li>\u4e3a <code>1</code> \u65f6\uff0c\u72b6\u6001\u5411\u201c\u66f4\u52a0\u4fe1\u4efb\u201d\u7684\u65b9\u5411\u8f6c\u79fb<ul> <li><code>HIGHLY_TRUSTWORTHY</code> \u5219\u4fdd\u6301\u72b6\u6001\u4e3a <code>HIGHLY_TRUSTWORTHY</code></li> <li><code>TRUSTWORTHY</code> \u5219\u8f6c\u79fb\u4e3a <code>HIGHLY_TRUSTWORTHY</code></li> <li><code>SUSPICIOUS</code> \u5219\u8f6c\u79fb\u4e3a <code>TRUSTWORTHY</code></li> <li><code>UNTRUSTWORTHY</code> \u5219\u8f6c\u79fb\u4e3a <code>SUSPICIOUS</code></li> </ul> </li> <li>\u4e3a <code>0</code> \u65f6\uff0c\u72b6\u6001\u5411\u201c\u66f4\u52a0\u6000\u7591\u201d\u7684\u65b9\u5411\u8f6c\u79fb\uff0c\u4e0e\u4e0a\u8ff0\u7c7b\u4f3c\u4f46\u65b9\u5411\u76f8\u53cd\uff0c\u5728\u6b64\u4e0d\u518d\u8d58\u8ff0</li> </ul> </li> <li>\u8f93\u51fa\u5224\u65ad\u4ec5\u4e0e\u5f53\u524d\u72b6\u6001\u6709\u5173<ul> <li>\u72b6\u6001\u4e3a <code>HIGHLY_TRUSTWORTHY, TRUSTWORTHY</code> \u65f6\u8f93\u51fa <code>trust_decision</code> \u4e3a <code>1</code></li> <li>\u72b6\u6001\u4e3a <code>SUSPICIOUS, UNTRUSTWORTHY</code> \u65f6\u8f93\u51fa <code>trust_decision</code> \u4e3a <code>0</code></li> </ul> </li> </ul> <p>\u601d\u8003\u9898</p> <p>\u8bf7\u6839\u636e\u4ee5\u4e0a\u8981\u6c42\uff0c\u5b8c\u6210\u4fe1\u4efb\u8bc4\u4f30\u5668\u7684\u72b6\u6001\u8f6c\u79fb\u56fe\uff0c\u4f60\u53ef\u4ee5\u7eb8\u7b14\u4e66\u5199\u5e76\u62cd\u7167\uff0c\u6216\u4f7f\u7528 drawio \u7b49\u5de5\u5177\u7ed8\u56fe\u3002</p>"},{"location":"Lab1/FSM/FSM/#_2","title":"\u6a21\u5757\u5b9e\u73b0","text":"<p>\u62a5\u544a\u4e2d\u9700\u8981\u7ed9\u51fa\u4f60\u5199\u51fa\u7684\u5b8c\u6574\u4ee3\u7801\u3002</p> <p>\u4e00\u4e2a\u53ef\u4ee5\u53c2\u8003\u7684\u6709\u9650\u72b6\u6001\u673a\u4e66\u5199\u65b9\u5f0f\uff0c\u4e09\u6bb5\u5f0f\u63cf\u8ff0\uff1a\u5c06\u8f93\u51fa\u4fe1\u53f7\u4e0e\u72b6\u6001\u8df3\u8f6c\u5206\u5f00\u63cf\u8ff0\uff0c\u72b6\u6001\u8df3\u8f6c\u7528\u7ec4\u5408\u903b\u8f91\u6765\u63a7\u5236\u3002</p> <p>\u6839\u636e\u4f60\u7ed8\u5236\u7684\u72b6\u6001\u56fe\uff0c\u4f7f\u7528\u4e09\u6bb5\u5f0f\u63cf\u8ff0\u5b8c\u6210\u201c\u6d4b\u8c0e\u4eea\u201d\u4fe1\u4efb\u8bc4\u4f30\u5668\u7684\u6a21\u5757\u4e66\u5199\u3002</p> <p>\u4f60\u7684\u4ee3\u7801\u4e3b\u4f53\u5c06\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\uff1a</p> <ul> <li>\u7b2c\u4e00\u6bb5\u4e3b\u8981\u7528\u6765\u63a7\u5236\u65f6\u5e8f\uff0c\u4fdd\u8bc1\u4e0b\u4e00\u4e2a\u65f6\u949f\u4e0a\u5347\u6cbf\u5b8c\u6210\u72b6\u6001\u8f6c\u79fb\uff0c\u540c\u65f6\u9700\u8981\u6ce8\u610f\u91cd\u7f6e\u65f6\u5c06\u72b6\u6001\u53d8\u4e3a\u8d77\u59cb\u72b6\u6001\uff08\u53ef\u4ee5\u9009\u62e9\u81ea\u5df1\u6dfb\u52a0\u91cd\u7f6e\u4fe1\u53f7\uff0c\u6216\u8005\u76f4\u63a5\u5c06\u72b6\u6001\u5bc4\u5b58\u5668\u7684\u521d\u503c\u8bbe\u4e3a\u8d77\u59cb\u72b6\u6001\uff09\uff1b</li> <li>\u7b2c\u4e8c\u6bb5\u4f7f\u7528\u7ec4\u5408\u903b\u8f91\uff0c\u4e3b\u8981\u662f\u6839\u636e\u73b0\u6001\u548c\u8f93\u5165\u51b3\u5b9a\u6b21\u6001\uff0c\u4e3a\u6b64\u4f60\u53ef\u80fd\u9700\u8981\u4f7f\u7528 <code>case</code> \u5173\u952e\u8bcd\uff1b</li> <li>\u7b2c\u4e09\u6bb5\u51b3\u5b9a\u8f93\u51fa\uff0c\u6839\u636e\u4f60\u7684\u72b6\u6001\u8f6c\u79fb\u56fe\uff0c\u5c06\u6240\u6709\u8f93\u51fa\u4e3a1\u7684\u72b6\u6001\u53d6\u6216\u5373\u53ef\uff0c\u7c7b\u4f3c\u4e8e <code>assign out = (Q1 == curr_state) || (Q2 == curr_state);</code>\u3002</li> </ul> <pre><code>module SomeFSM(\ninput clk,\ninput in,\noutput out\n);\n// State definition\nlocalparam Q1 = ...,\nQ2 = ...,\n...;\n// First segment: state transfer\nalways @(posedge clk) begin\n...\nend\n// Sencond segment: transfer condition\nalways @(*) begin // combination logic\ncase(curr_state)\nQ1: begin\nif(1'b0 == in) next_state = ...;\nelse next_state = ...;\nend\n...\ndefault: next_state = ...;\nendcase\nend\n// Third segment: output\n...\nendmodule\n</code></pre>"},{"location":"Lab1/FSM/FSM/#_3","title":"\u4eff\u771f\u6d4b\u8bd5","text":"<p>\u62a5\u544a\u4e2d\u9700\u8981\u7ed9\u51fa testbench \u4ee3\u7801\uff0c\u6d4b\u8bd5\u6ce2\u5f62\u4e0e\u89e3\u91ca\uff08\u6ce2\u5f62\u622a\u56fe\u9700\u8981\u4fdd\u8bc1\u7f29\u653e\u4e0e\u53d8\u91cf\u6570\u5236\u5408\u9002\uff09\u3002</p> <p>\u8bf7\u81ea\u884c\u4e66\u5199\u672c\u6a21\u5757\u7684\u4eff\u771f\u6fc0\u52b1\u6587\u4ef6 <code>TruthEvaluator_tb.v</code>\u3002</p>"},{"location":"Lab2/Lab2/","title":"Lab2","text":"<p>2023.3.4\u66f4\u65b0 Lab2 \u9644\u4ef6</p> <p>2023.3.4 \u66f4\u65b0\u201c\u4e0b\u677f\u9a8c\u8bc1\u201d\u5c0f\u8282</p> <p>\u672c\u5b9e\u9a8c\u5185\u5bb9\u4e3a\u4f7f\u7528\u63d0\u4f9b\u7684 IP core \u642d\u5efa\u6d4b\u8bd5\u6846\u67b6\u3002</p> <p>\u53c2\u8003\u9644\u4ef6\u4e2d\u7684 <code>CSSTE.pdf</code> \u8fde\u7ebf\u5373\u53ef\u3002</p> <p>\u62a5\u544a\u4e2d\u9700\u8981\u7ed9\u51fa\u4f60\u5199\u51fa\u7684\u5b8c\u6574\u4ee3\u7801\u3002</p> <p>\u4ee5\u4e0b\u4e3a\u5efa\u8bae\uff08\u53c2\u8003\u4e0a\u5c4a\u52a9\u6559\u7684\u5efa\u8bae\u5185\u5bb9\uff09\uff1a</p> <ul> <li>\u4f5c\u4e3a\u4e00\u4e2a\u4e60\u60ef\uff0c<code>wire</code> \u578b\u53d8\u91cf\u5728\u9a71\u52a8\u5b83\u7684\u6a21\u5757\u524d\u8fdb\u884c\u58f0\u660e\uff0c\u6ce8\u610f\u5bbd\u5ea6\uff0c\u9ed8\u8ba4 1bit\uff1b\u4e0d\u8fdb\u884c\u58f0\u660e\u7684\u53d8\u91cf\u4f1a\u88ab\u8ba4\u4e3a\u662f 1-bit <code>wire</code> \u53d8\u91cf\u3002\u8bf7\u5173\u6ce8 critical warnings\u3002</li> <li>\u4f60\u53ef\u80fd\u9700\u8981\u4fee\u6539\u9644\u4ef6 <code>VGADisplay.v</code> \u4e2d\u7684\u6587\u4ef6\u8def\u5f84\uff0c\u9700\u8981\u548c\u4f60\u653e\u7f6e <code>mem</code> \u6587\u4ef6\u7684\u8def\u5f84\u5339\u914d\u3002<ul> <li>\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f Windows \u7cfb\u7edf\u4e14\u4e0b\u677f\u540e VGA \u662f\u201c\u4eae\u8d77\u6765\u7684\u9ed1\u201d\uff0c\u90a3\u4e48\u6700\u574f\u60c5\u51b5\u4e0b\u4f60\u8981\u5c1d\u8bd5\uff1a<code>/, //, \\, \\\\</code> \u56db\u79cd\u8def\u5f84\u5206\u9694\u7b26\u3002</li> </ul> </li> <li>\u4f7f\u7528\u81ea\u5df1\u751f\u6210\u7684 ROM \u6838\u3001RAM \u6838\uff0c\u800c\u975e\u63d0\u4f9b\u7684\u56fa\u6838\uff0c\u4ee5\u4fbf\u540e\u7eed\u5b9e\u9a8c\u4f7f\u7528\uff0c\u751f\u6210 ROM \u4e0e RAM \u7684\u65b9\u5f0f\u53ef\u4ee5\u53c2\u8003 Lab0 \u7684\u8bfe\u4ef6\u3002</li> <li>\u5b9e\u9a8c\u8bfe\u4ef6\u7ed9\u51fa\u7684 <code>Top</code> \u539f\u7406\u56fe\u4e2d\u53bb\u6296\u52a8\u6a21\u5757 <code>SAnti_jitter</code> \u5b9e\u4f8b <code>U9</code> \u7684\u8f93\u51fa\u7aef\u53e3 <code>Key_x[4:0]</code> \u884c\u626b\u63cf\u8f93\u51fa\u4fe1\u53f7\u5e76\u6ca1\u6709\u63a5\u51fa\uff0c\u4f1a\u9020\u6210\u6309\u952e\u9635\u5217\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\uff0c\u4f60\u9700\u8981\u6839\u636e\u6570\u903b\u6240\u5b66\u5bf9\u6b64\u8fdb\u884c\u4fee\u6539\u3002<ul> <li>\u5177\u4f53\u6765\u8bf4\uff0c\u4f60\u9700\u8981\u7ed9 <code>Top</code> \u6a21\u5757\u589e\u52a0\u4e00\u4e2a <code>key_x[4:0]</code> \u7684\u8f93\u51fa\uff0c\u5e76\u5728\u7ea6\u675f\u6587\u4ef6\u4e2d\u7ed9\u51fa\u5bf9\u5e94\u7ea6\u675f\u3002</li> </ul> </li> <li>\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528 CS61C \u63d0\u4f9b\u7684\u6c47\u7f16\u5668\u3002</li> </ul>"},{"location":"Lab2/Lab2/#vga","title":"\u5904\u7406VGA","text":"<p>\u672c\u8282\u5185\u5bb9\u662f slides \u4e2d\u6ca1\u6709\uff0c\u4f46\u662f\u8981\u6c42\u5728 Lab2 \u5b8c\u6210\u7684\u3002</p> <p>\u62a5\u544a\u4e2d\u9700\u8981\u6709\u4f60\u5bf9 VGA \u6a21\u5757\u505a\u7684\u4fee\u6539\u3002</p> <p>\u5728\u4e4b\u540e\u7684\u5b9e\u9a8c\u4e2d\u6211\u4eec\u5c06\u901a\u8fc7\u5c4f\u5e55\u67e5\u770b\u5bc4\u5b58\u5668\u7684\u503c\u7b49 debug \u4fe1\u53f7\uff0c\u5728\u672c\u8282\u4f60\u9700\u8981\u4fee\u6539 VGA \u63a5\u53e3\uff0c\u63a5\u5165\u5e76\u663e\u793a\u5404\u7c7b debug \u4fe1\u53f7\uff1bLab2 \u4e2d SCPU \u4f7f\u7528\u7684\u662f\u7ed9\u5b9a\u7684 IP Core\uff0c\u6211\u4eec\u4e0d\u80fd\u5c06\u9700\u8981\u7684\u4fe1\u53f7\u4ece SCPU \u4e2d\u63a5\u51fa\u5230 VGA \u6a21\u5757\u4e2d\uff0c\u56e0\u6b64\u672c\u5b9e\u9a8c\u4ec5\u4ec5\u7ed9 debug \u4fe1\u53f7\u7559\u51fa\u4f4d\u7f6e\uff0c\u7b49\u5f85\u6211\u4eec\u81ea\u5df1\u5b8c\u6210 SCPU \u65f6\u76f4\u63a5\u63a5\u5165\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u4f60\u53ef\u4ee5\u9605\u8bfb\u9644\u4ef6 <code>IP/Supplementary/VGA/VGA.srcs</code> \u4e2d\u7684\u6e90\u4ee3\u7801\uff0c\u7406\u89e3\u5404\u90e8\u5206\u4f5c\u7528\uff0c\u4fee\u6539 <code>VGA.v</code> \u4e2d <code>module VGA</code> \u7684\u7aef\u53e3\u63cf\u8ff0\uff08\u589e\u52a0\u82e5\u5e72 debug \u4fe1\u53f7\u8f93\u5165\uff09\uff0c\u5c06\u589e\u52a0\u7684\u8f93\u5165\u63a5\u5230 <code>VGA</code> \u6a21\u5757\u7684 <code>vga_debugger</code> \u5b9e\u4f8b\u5373\u53ef\u3002</p>"},{"location":"Lab2/Lab2/#_1","title":"\u4e0b\u677f\u9a8c\u8bc1","text":"<p>\u62a5\u544a\u4e2d\u9700\u8981\u7ed9\u51fa\u4e0b\u677f\u56fe\u7247\u4e0e\u8bf4\u660e\u3002</p> <p>\u5728\u5b8c\u6210\u4ee5\u4e0a\u6b65\u9aa4\u540e\uff0c\u6211\u4eec\u9700\u8981\u8fdb\u884c\u4e0b\u677f\u9a8c\u8bc1\u3002\u7a0b\u5e8f\u6e90\u7801\u53ef\u4ee5\u5728\u9644\u4ef6 <code>I_mem.pdf</code> \u4e2d\u67e5\u770b\uff0c\u672c\u6b21\u5b9e\u9a8c\u4e0d\u8981\u6c42\u81ea\u5df1\u7f16\u5199\u9a8c\u6536\u4ee3\u7801\u3002</p>"},{"location":"Lab3/Lab3/","title":"Lab3","text":"<p>Lab3 \u9644\u4ef6</p> <p>\u672c\u6b21\u5b9e\u9a8c\u5185\u5bb9\u4e3a\u4e58\u9664\u6cd5\u5668\u3002</p> <p>\u5728 Lab1 \u4e2d\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a\u5305\u542b\u7b80\u5355\u7b97\u672f\u4ee5\u53ca\u903b\u8f91\u8fd0\u7b97\u7684 ALU\uff0c\u5b83\u4eec\u5728\u4e00\u4e2a\u5468\u671f\u5185\u5c31\u53ef\u4ee5\u5f97\u5230\u8fd0\u7b97\u7ed3\u679c\uff08\u4e00\u4e2a\u7ec4\u5408\u7535\u8def\u90e8\u4ef6\uff09\u3002\u672c\u5b9e\u9a8c\u4e2d\u6211\u4eec\u5c06\u5b9e\u73b0\u591a\u5468\u671f\u624d\u80fd\u5b8c\u6210\u7684\u8fd0\u7b97\u4e58\u6cd5\u4e0e\u9664\u6cd5\uff08\u5c24\u5176\u662f\u9664\u6cd5\uff09\u5bf9\u5e94\u7684\u8fd0\u7b97\u90e8\u4ef6\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u5bf9\u4e58\u6cd5\u5668\u7684\u57fa\u672c\u8981\u6c42\u662f\u5b9e\u73b0\u6709\u7b26\u53f7\u3001\u65e0\u6ea2\u51fa\u5224\u65ad\uff1b\u5bf9\u9664\u6cd5\u5668\u7684\u57fa\u672c\u8981\u6c42\u662f\u65e0\u7b26\u53f7\u3001\u65e0\u6ea2\u51fa\u5224\u65ad\u3001\u6709\u9664\u96f6\u5f02\u5e38\u5224\u65ad\u3002</p> <p>\u672c\u5b9e\u9a8c\u9700\u8981\u63d0\u4ea4\u5b9e\u9a8c\u62a5\u544a\uff08Lab0-3 \u5408\u6210\u4e00\u4efd\u63d0\u4ea4\uff09</p> <p>\u672c\u5b9e\u9a8c\u9700\u8981\u9a8c\u6536</p> <p>\u63d0\u4ea4\u5b9e\u9a8c\u62a5\u544a\u65f6\uff0c\u4f60\u9700\u8981\u9644\u4e0a\u90e8\u5206\u6e90\u4ee3\u7801\uff0c\u8bf7\u6ce8\u610f\u6309\u7167\u683c\u5f0f\u66f4\u6539\u6587\u4ef6\u540d\uff1a</p> <pre><code>src_0_3_3210101145_\u738b\u67d0\u67d0.zip/ # \u7528\u4e00\u4e2azip\u6253\u5305\u6e90\u4ee3\u7801\n\u251c\u2500\u2500 Lab1\n\u251c\u2500\u2500 Lab2\n\u2514\u2500\u2500 Lab3\n    \u251c\u2500\u2500 divider.v # \u9664\u6cd5\u5668\uff0c\u5982\u679c\u4f60\u5b9e\u73b0\u4e86\u591a\u79cd\uff0c\u53ef\u4ee5\u7f16\u53f7 divider_0 \u7b49\n\u2514\u2500\u2500 multiplier.v # \u4e58\u6cd5\u5668\uff0c\u5982\u679c\u5b9e\u73b0\u591a\u79cd\u540c\u4e0a\u7f16\u53f7\nreport_0_3_3210101145_\u738b\u67d0\u67d0.pdf # \u4f60\u7684\u5b9e\u9a8c\u62a5\u544a\uff0cLab0-3\u5408\u6210\u4e00\u4efd\uff0c\u6ce8\u610f\u63d0\u4ea4PDF\u683c\u5f0f\n</code></pre>"},{"location":"Lab3/divider/","title":"\u9664\u6cd5\u5668","text":"<p>\u4f60\u53ef\u4ee5\u4ece\u7406\u8bba\u8bfe\u5b66\u5230\u7684\u51e0\u4e2a\u7248\u672c\u4e2d\u4efb\u9009\u4e00\u4e2a\u7b97\u6cd5\u5b8c\u6210\u5b9e\u9a8c\uff0c\u57fa\u672c\u7684\u8981\u6c42\u662f\u65e0\u7b26\u53f7\u3001\u65e0\u6ea2\u51fa\u5224\u65ad\u3001\u6709\u9664\u96f6\u5f02\u5e38\u5224\u65ad\uff0c\u5982\u679c\u4f60\u4e0d\u5b9e\u73b0\u9664\u96f6\u5f02\u5e38\u5224\u65ad\u5c06\u65e0\u6cd5\u83b7\u5f97\u5168\u90e8\u7684\u5b9e\u9a8c\u5206\u6570\u3002</p>"},{"location":"Lab3/divider/#_2","title":"\u6a21\u5757\u5b9e\u73b0","text":"<p>\u62a5\u544a\u4e2d\u9700\u8981\u7ed9\u51fa\u4f60\u5199\u51fa\u7684\u5b8c\u6574\u4ee3\u7801\u3002</p> <p>\u4f60\u7684\u6a21\u5757\u4e0e\u7aef\u53e3\u540d\u5e94\u8be5\u4e0e\u4e0b\u5217\u76f8\u540c\uff1a</p> divider.v<pre><code>module divider(\ninput   clk,\ninput   rst,\ninput   start,          // \u5f00\u59cb\u8fd0\u7b97\ninput[31:0] dividend,   // \u88ab\u9664\u6570\ninput[31:0] divisor,    // \u9664\u6570\noutput divide_zero,     // \u9664\u96f6\u5f02\u5e38\noutput  finish,         // \u8fd0\u7b97\u7ed3\u675f\u4fe1\u53f7\noutput[31:0] res,       // \u5546\noutput[31:0] rem        // \u4f59\u6570\n);\n</code></pre> <p>\u5982\u679c\u9664\u6570\u662f\u96f6\uff0c\u5219\u76f4\u63a5\u5c06 <code>finish</code> \u4e0e <code>divide_zero</code> \u5347\u81f3\u9ad8\u4f4d\u5373\u53ef\uff0c\u6b64\u65f6 <code>res</code> \u4e0e <code>rem</code> \u53ef\u4ee5\u662f\u4efb\u610f\u503c\u3002</p>"},{"location":"Lab3/divider/#_3","title":"\u4eff\u771f\u6d4b\u8bd5","text":"<p>\u62a5\u544a\u4e2d\u9700\u8981\u7ed9\u51fa testbench \u4ee3\u7801\uff0c\u6d4b\u8bd5\u6ce2\u5f62\u4e0e\u89e3\u91ca\uff08\u6ce2\u5f62\u622a\u56fe\u9700\u8981\u4fdd\u8bc1\u7f29\u653e\u4e0e\u53d8\u91cf\u6570\u5236\u5408\u9002\uff09\u3002</p> <p>\u9644\u4ef6\u4e2d\u7684 divider_tb.v \u5df2\u7ecf\u7ed9\u51fa\u4e86\u57fa\u672c\u7684\u6d4b\u8bd5\u4ee3\u7801\uff0c\u4f60\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u7684\u6d4b\u8bd5\u6837\u4f8b\uff0c\u5c3d\u53ef\u80fd\u591a\u6d4b\u8bd5\u8fb9\u754c\u6837\u4f8b\u3002</p>"},{"location":"Lab3/floating_point_adder/","title":"\u6d6e\u70b9\u52a0\u6cd5\u5668","text":"<p>\u672c\u8282\u601d\u8003\u9898\u4e3a\u5fc5\u505a\uff0c\u6d6e\u70b9\u52a0\u6cd5\u5668\u5b9e\u73b0\u4e3a\u9009\u505a bonus\u3002</p> \u601d\u8003\u9898 <p>\u8bf7\u7ed3\u5408\u7406\u8bba\u8bfe\u6240\u5b66\uff0c\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898\uff1a</p> <ul> <li>\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570 <code>x, y, z</code>\uff0c\u82e5 <code>x = -1.5e38, y = 1.5e38, z=1.0</code><ul> <li><code>(x+y)+z = ?</code>\uff1b</li> <li><code>x+(y+z) = ?</code>\uff1b</li> <li>\u4e24\u8005\u6709\u533a\u522b\u5417\uff1f\u8bf7\u89e3\u91ca\u4f60\u7684\u56de\u7b54\u3002</li> </ul> </li> <li>\u5047\u8bbe\u4f7f\u7528\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff0c\u7f16\u5199\u4ee5\u4e0b\u4ee3\u7801     <pre><code>float x = SOME_VALUE_0;\nfloat sum = 0.0f;\nfor(int i = 0; i &lt; SOME_VALUE_1; ++i) sum += x;\nprintf(\"%f\\n\", sum - 100.0f);\n</code></pre><ul> <li>\u5982\u679c <code>SOME_VALUE_0 := 0.1, SOME_VALUE_1 := 1000</code>\uff0c\u4f60\u5c06\u5f97\u5230\u4ec0\u4e48\u7ed3\u679c\uff1f</li> <li>\u5982\u679c <code>SOME_VALUE_0 := 0.125, SOME_VALUE_1 := 800</code>\uff0c\u4f60\u5c06\u5f97\u5230\u4ec0\u4e48\u7ed3\u679c\uff1f</li> <li>\u8bf7\u7ed3\u5408\u6d6e\u70b9\u6570\u5b9a\u4e49\uff0c\u89e3\u91ca\u4e24\u8005\u5dee\u5f02\u3002</li> </ul> </li> </ul> <p>\u4f60\u5b9e\u73b0\u7684\u6d6e\u70b9\u52a0\u6cd5\u5668\u81f3\u5c11\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u8981\u6c42\uff1a</p> <ul> <li>\u81ea\u884c\u51b3\u5b9a\u5b9e\u73b0\u5355\u7cbe\u5ea6\u6216\u53cc\u7cbe\u5ea6\u3002</li> <li>\uff08\u4e3a\u7b80\u5316\u5b9e\u9a8c\uff09\u68c0\u6d4b\u4e24\u4e2a\u64cd\u4f5c\u6570\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u4e3a\u4e0d\u89c4\u5219\u6d6e\u70b9\u6570\uff0c\u8f93\u51fa\u4e00\u4e2a\u4e0d\u89c4\u5219\u7ed3\u679c\u5373\u53ef\u3002</li> <li>\u5bf9\u4e8e\u4e24\u4e2a\u89c4\u5219\u6d6e\u70b9\u6570\u7684\u8fd0\u7b97\uff0c\u63a8\u8350\u6709\u4ee5\u4e0b\u6b65\u9aa4\uff1a<ul> <li>\u6d6e\u70b9\u6570\u5bf9\u9636\uff1b</li> <li>\u8fd0\u7b97\uff1b</li> <li>\u7ed3\u679c\u89c4\u5219\u5316\uff1b</li> <li>\u7b80\u5355\u7684\u820d\u5165\u5904\u7406\uff1b</li> </ul> </li> </ul> <p>\u53ef\u5b9e\u73b0\u591a\u4e2a\u6807\u51c6\u89c4\u8303\u7684\u820d\u5165\u5904\u7406\u5df2\u83b7\u5f97\u66f4\u591a\u52a0\u5206\u3002</p>"},{"location":"Lab3/multiplier/","title":"\u4e58\u6cd5\u5668","text":""},{"location":"Lab3/multiplier/#_2","title":"\u524d\u7f6e\u77e5\u8bc6","text":"<p>\u4f60\u9700\u8981\u590d\u4e60\u7406\u8bba\u8bfe\u4e2d\u63d0\u5230\u7684<code>multiplier V3</code>\uff0c\u5373</p> <p></p> <p>\u5176\u57fa\u672c\u542b\u4e49\u4ee5\u53ca\u5177\u4f53\u6d41\u7a0b\u5728\u7406\u8bba\u8bfe\u4e2d\u5df2\u7ecf\u8fdb\u884c\u8fc7\u8be6\u7ec6\u8bb2\u89e3\uff0c\u672c\u6587\u6863\u4e0d\u518d\u91cd\u590d\u8fd9\u90e8\u5206\u5185\u5bb9\uff0c\u800c\u53ea\u5bf9\u5b9e\u9a8c\u9700\u8981\u6ce8\u610f\u7684\u90e8\u5206\u8fdb\u884c\u63d0\u9192\u3002\u5982\u679c\u4f60\u5bf9\u8fd9\u4e2a\u8fc7\u7a0b\u8fd8\u6709\u7591\u60d1\uff0c\u53ef\u4ee5\u81ea\u884c\u641c\u7d22 Russian Peasant Multiplication\uff0c\u8fd9\u53ef\u80fd\u6709\u52a9\u4e8e\u4f60\u7406\u89e3\u4e58\u6cd5\u5668\u7684\u5b9e\u73b0\u3002</p> <p>\u5728\u8fd9\u4e00\u5b9e\u73b0\u4e2d\uff0c\u6211\u4eec\u9700\u898132\u6b21\u201c\u5faa\u73af\u201d\u6765\u5b8c\u6210\u4e00\u6b2132\u4f4d\u4e58\u6cd5\uff0c\u5e76\u5f97\u5230\u4e00\u4e2a64\u4f4d\u7684\u7ed3\u679c\u3002</p> <p>\u5f00\u59cb\u65f6\u5c06\u201c\u4e58\u6570\u201d\u653e\u5728 Product \u7684\u4f4e32\u4f4d\uff1a\u5173\u6ce8\u5230\u6bcf\u4e00\u6b21\u5faa\u73af\u6211\u4eec\u90fd\u9700\u8981\u5bf9\u201c\u4e58\u6570\u201d\u8fdb\u884c\u4e00\u6b21\u53f3\u79fb\u64cd\u4f5c\uff0c\u540c\u65f6\u6bcf\u4e00\u6b21\u5faa\u73af\u6211\u4eec\u90fd\u5bf9 Product \u8fdb\u884c\u4e00\u6b21\u53f3\u79fb\u4e14\u4f4e32\u4f4d\u4e0d\u53c2\u4e0e\u52a0\u6cd5\u8ba1\u7b97\u3002</p> <p>\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u63a7\u5236\u903b\u8f91\u6765\u5224\u65ad\u53c2\u4e0e\u52a0\u6cd5\u7684\u662f0\u8fd8\u662f\u88ab\u4e58\u6570\uff0c\u540c\u65f6\u9700\u8981\u5224\u65ad\u4f55\u65f6\u505c\u6b62\u8fd0\u7b97\u3002\u8fd0\u7b97\u7ed3\u675f\u7684\u6761\u4ef6\u5f88\u7b80\u5355\uff0c\u5373\u5b8c\u6210\u4e8632\u6b21\u5faa\u73af\uff0c\u53ea\u9700\u8981\u4e00\u4e2a\u8ba1\u6570\u5668\u5373\u53ef\u5b9e\u73b0\u3002\u5728\u6211\u4eec\u7684\u7b97\u6cd5\u4e2d\uff0c\u5982\u679c\u4e58\u6570\u7684\u6700\u4f4e\u4f4d\u662f1\u5219\u7ed9 Product \u7684\u9ad832\u4f4d\u52a0\u4e00\u4e2a\u88ab\u4e58\u6570\uff1b\u5426\u5219\uff0c\u4e0d\u9700\u8981\u6539\u53d8 Product \u7684\u503c\u3002</p>"},{"location":"Lab3/multiplier/#_3","title":"\u6a21\u5757\u5b9e\u73b0","text":"<p>\u62a5\u544a\u4e2d\u9700\u8981\u7ed9\u51fa\u4f60\u5199\u51fa\u7684\u5b8c\u6574\u4ee3\u7801\u3002</p> <p>\u4f60\u7684\u6a21\u5757\u7aef\u53e3\u5e94\u4e3a\uff1a</p> 5LiN5oOz5YaZ5a6e6aqM5oyH5a+85ZWK5ZWK5ZWK5ZWK5ZWK5ZWK5ZWK5ZWK5ZWK77yM6L+ZIHRtZCDlhpnlh7rmnaXkuZ/kuI3mmK/kurror53llYo= multiplier.v<pre><code>module multiplier(\ninput           clk,      // \u65f6\u949f\u4fe1\u53f7\ninput           start     // \u5f00\u59cb\u8fd0\u7b97\ninput [31:0]    A,        // \u4e24\u4e2a 32-bit \u8f93\u5165\u503c\ninput [31:0]    B,\noutput          finish,   // \u5f53\u7ed3\u675f\u8ba1\u7b97\u65f6\u7f6e1\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u5c06\u5b83\u6539\u4e3a `output reg`\noutput[63:0]    res       // 64-bit \u8f93\u51fa\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u5c06\u5b83\u4fee\u6539\u4e3a `output reg[63:0]`\n);\n</code></pre> <p>\u8fd9\u91cc\u63d0\u4f9b\u4e00\u4e2a\u53ef\u4ee5\u9009\u62e9\u7684 starter code\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u60f3\u6cd5\u4efb\u610f\u5730\u8fdb\u884c\u4fee\u6539\uff08\u53ea\u8981\u4e0d\u6539\u53d8\u6a21\u5757\u540d\u4e0e\u7aef\u53e3\u540d\uff09\u3002</p> <p>\u5b9e\u9a8c\u5bf9\u4e0e\u4e58\u6cd5\u5668\u7684\u57fa\u672c\u8981\u6c42\u662f\u6709\u7b26\u53f7\uff0c\u65e0\u6ea2\u51fa\u5224\u65ad\uff1b\u5982\u679c\u5b9e\u73b0\u7684\u662f\u65e0\u7b26\u53f7\uff0c\u65e0\u6ea2\u51fa\u5224\u65ad\u7684\u4e58\u6cd5\u5668\uff0c\u5c06\u65e0\u6cd5\u83b7\u5f97\u672c\u5b9e\u9a8c\u7684\u5168\u90e8\u5206\u6570\u3002</p> <p>\u5bf9\u4e8e\u5b9e\u73b0\u6709\u7b26\u53f7\u7248\u672c\u7684\u540c\u5b66\uff0c\u53ef\u4ee5\u901a\u8fc7\u5224\u65ad\u8f93\u5165\u6b63\u8d1f\u6027\u5148\u5f97\u5230\u7ed3\u679c\u7684\u6b63\u8d1f\u6027\uff0c\u540e\u8f6c\u5316\u4e3a\u65e0\u7b26\u53f7\u4e58\u6cd5\uff0c\u6700\u540e\u8c03\u6574\u7ed3\u679c\u5230\u5408\u9002\u7684\u6b63\u8d1f\u6027\uff1b\u4e5f\u53ef\u4ee5\u67e5\u770b Booth's Algorithm \u5e76\u5b9e\u73b0\u3002</p>"},{"location":"Lab3/multiplier/#_4","title":"\u4eff\u771f\u6d4b\u8bd5","text":"<p>\u62a5\u544a\u4e2d\u9700\u8981\u7ed9\u51fa testbench \u4ee3\u7801\uff0c\u6d4b\u8bd5\u6ce2\u5f62\u4e0e\u89e3\u91ca\uff08\u6ce2\u5f62\u622a\u56fe\u9700\u8981\u4fdd\u8bc1\u7f29\u653e\u4e0e\u53d8\u91cf\u6570\u5236\u5408\u9002\uff09\u3002</p> <p>\u9644\u4ef6\u4e2d\u7684 multiplier_tb.v \u5df2\u7ecf\u7ed9\u51fa\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u4eff\u771f\u4ee3\u7801\uff0c\u4f60\u53ef\u4ee5\u5728\u6b64\u57fa\u7840\u4e0a\u8fdb\u884c\u4fee\u6539\uff08\u4e0e\u6dfb\u52a0\uff09\u6216\u81ea\u884c\u4e66\u5199\u4e00\u4e2a\u5408\u9002\u7684\u4eff\u771f\u4ee3\u7801\u3002</p> <p>\u4f60\u7684\u4eff\u771f\u6ce2\u5f62\u5e94\u8be5\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u4e24\u5f20\u56fe\u7247\uff1a</p> <p>\u65e0\u7b26\u53f7\uff0c\u65e0\u6ea2\u51fa\u5224\u65ad</p> <p></p> <p>\u6709\u7b26\u53f7\uff0c\u65e0\u6ea2\u51fa\u5224\u65ad</p> <p></p>"},{"location":"Lab4/DataPath_CtrlUnit/","title":"Lab4-1 &amp; Lab4-2","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 git \u6765\u8bb0\u5f55\u5b9e\u9a8c\u8fc7\u7a0b\uff0c\u521b\u5efa\u65b0\u7684\u5206\u652f\u5b8c\u6210\u672c\u8282\uff0c\u53ef\u4ee5\u53c2\u8003 git \u57fa\u7840\u5c0f\u8282\u3002</p> <p>\u672c\u5b9e\u9a8c\u9700\u8981\u5b8c\u6210\u5927\u90e8\u5206\u6307\u4ee4\uff0c\u5728\u4e24\u8282\u5b9e\u9a8c\u4e2d\u5206\u522b\u5b8c\u6210\u6570\u636e\u901a\u8def\u548c\u63a7\u5236\u5668\u7684\u8bbe\u8ba1\uff0c\u4ece\u800c\u5f97\u5230\u81ea\u5df1\u8bbe\u8ba1\u5b9e\u73b0\u7684 SCPU\u3002</p>"},{"location":"Lab4/DataPath_CtrlUnit/#_1","title":"\u6a21\u5757\u5b9e\u73b0","text":"<p>\u5728\u672c\u8282\u5b9e\u9a8c\u4e2d\uff0c\u4f60\u9700\u8981\u5b9e\u73b0\u4ee5\u4e0b\u6307\u4ee4\uff1a</p> <ul> <li>R-Type: add, sub, and, or, xor, slt, srl</li> <li>I-Type: addi, andi, ori, xori, slti, srli, lw</li> <li>S-Type: sw</li> <li>B-Type: beq</li> <li>J-Type: jal</li> </ul> <p>\u5176\u4ed6\u6307\u4ee4\u5c06\u5728 Lab4-3 \u6307\u4ee4\u62d3\u5c55\u4e0e Lab4-4 \u4e2d\u65ad\u5904\u7406\u4e24\u5c0f\u8282\u5b9e\u73b0\u3002\u5982\u679c\u4e0d\u6e05\u695a\u4ee5\u4e0a\u6307\u4ee4\u7684\u6307\u4ee4\u683c\u5f0f\u4e0e\u542b\u4e49\uff0c\u8bf7\u67e5\u770b RISC-V \u624b\u518c\u3002</p> <p>\u5728\u8bbe\u8ba1\u672c\u6b21\u5b9e\u9a8c\u4e4b\u524d\uff0c\u8bf7\u68c0\u67e5\u4f60\u662f\u5426\u5b8c\u6210\u4e86\u4e4b\u524d\u5b9e\u9a8c\u8981\u6c42\u7684\u4fee\u6539</p> <ul> <li>RegFile \u670932\u4e2a\u5bc4\u5b58\u5668\u503c\u8bfb\u53e3\uff0c\u5e76\u5728\u672c\u6b21\u5b9e\u9a8c\u4e2d\u63a5\u5230 SCPU \u7684\u8f93\u51fa\u53e3\u3002</li> <li>VGA \u6a21\u5757\u62d3\u5c55\u4e8632\u4e2a\u5bc4\u5b58\u5668\u503c\u7684\u5165\u53e3\uff0c\u5e76\u4fee\u6539 VGA \u5185\u90e8\u4f7f\u8fd9\u4e9b\u503c\u53ef\u4ee5\u663e\u793a\u5728\u5c4f\u5e55\u4e0a\u3002</li> </ul> <p>\u8fd9\u4e9b\u4fee\u6539\u5c06\u65b9\u4fbf\u4f60\u5728\u677f\u4e0a debug \u65f6\u67e5\u770b\u5bc4\u5b58\u5668\u503c\u7684\u53d8\u5316\u3002</p> <p>\u5728\u5206\u522b\u5b8c\u6210 DataPath \u548c CtrlUnit \u4e24\u90e8\u5206\u540e\uff0c\u5c06 Lab4-0 \u4e2d\u7684 IP Core \u66ff\u6362\uff0c\u5f97\u5230\u81ea\u884c\u5b9e\u73b0\u7684 SCPU\u3002</p>"},{"location":"Lab4/DataPath_CtrlUnit/#_2","title":"\u7acb\u5373\u6570\u751f\u6210\u5668","text":"<p>\u8bf7\u4fdd\u8bc1\u6a21\u5757\u540d\u4e0e\u7aef\u53e3\u540d\u548c\u4ee5\u4e0b\u4ee3\u7801\u5b8c\u5168\u76f8\u540c\uff08\u867d\u7136\u6df7\u7528\u4e0b\u5212\u7ebf\u548c\u9a7c\u5cf0\u547d\u540d\u5f88\u8ba9\u4eba\u6293\u72c2\uff0c\u4f46 slides \u4e0a\u8fb9\u7ed9\u7684\u5982\u6b64\u4e14\u5927\u90e8\u5206\u540c\u5b66\u4e0e\u4e4b\u76f8\u540c\uff0c\u5c31\u6309\u7167\u8fd9\u79cd\u547d\u540d\u5427\ud83d\udca6\uff09 ImmGen.v<pre><code>module ImmGen(\ninput [1:0]   ImmSel,\ninput [31:0]  inst_field,\noutput[31:0]  Imm_out\n);\n</code></pre></p> <p>\u8bf7\u4fdd\u8bc1 <code>ImmSel</code> \u7684\u610f\u4e49\u4e0e\u4e0b\u540c\uff08\u53c2\u8003\u9644\u4ef6 <code>Lab4_header.vh</code>\uff09</p> <pre><code>/* ImmSel signals */\n// NOTE: You may add terms in Lab4-3 to implement more inst.\n`define IMM_SEL_WIDTH 2\n`define IMM_SEL_I   `IMM_SEL_WIDTH'd0\n`define IMM_SEL_S   `IMM_SEL_WIDTH'd1\n`define IMM_SEL_B   `IMM_SEL_WIDTH'd2\n`define IMM_SEL_J   `IMM_SEL_WIDTH'd3\n/*-----------------------------------*/\n</code></pre>"},{"location":"Lab4/DataPath_CtrlUnit/#scpu_ctrl","title":"SCPU_ctrl","text":"<p>\u8bf7\u4fdd\u8bc1\u6a21\u5757\u540d\u4e0e\u7aef\u53e3\u540d\u548c\u4ee5\u4e0b\u4ee3\u7801\u5b8c\u5168\u76f8\u540c</p> SCPU_ctrl.v<pre><code>module SCPU_ctrl(\ninput [4:0]       OPcode,\ninput [2:0]       Fun3,\ninput             Fun7,\ninput             MIO_ready,\noutput reg [1:0]  ImmSel,\noutput reg        ALUSrc_B,\noutput reg [1:0]  MemtoReg,\noutput reg        Jump,\noutput reg        Branch,\noutput reg        RegWrite,\noutput reg        MemRW,\noutput reg [3:0]  ALU_Control,\noutput reg        CPU_MIO\n);\nendmodule\n</code></pre> <p>\u8bf7\u4fdd\u8bc1 <code>MemtoReg</code> \u7684\u610f\u4e49\u4e0e\u4e0b\u540c\uff08\u53c2\u8003\u9644\u4ef6 <code>Lab4_header.vh</code>\uff09 <pre><code>/* Mem2Reg signals */\n// NOTE: You may add terms in Lab4-3 to implement more inst.\n`define MEM2REG_WIDTH 2\n`define MEM2REG_ALU         `MEM2REG_WIDTH'd0\n`define MEM2REG_MEM         `MEM2REG_WIDTH'd1\n`define MEM2REG_PC_PLUS     `MEM2REG_WIDTH'd2\n/*-----------------------------------*/\n</code></pre></p>"},{"location":"Lab4/DataPath_CtrlUnit/#_3","title":"\u4eff\u771f\u6d4b\u8bd5","text":"<p>\u5173\u4e8e\u7acb\u5373\u6570\u751f\u6210\u5668\u7684\u4eff\u771f\u6d4b\u8bd5</p> <p>\u4f60\u7684\u4ee3\u7801\u5c06\u5728\u52a9\u6559\u672c\u5730\u8fdb\u884c\u9a8c\u8bc1\uff0c\u4f7f\u7528\u7684\u4eff\u771f\u6fc0\u52b1\u6587\u4ef6\u4e3a ImmGen_tb.v\uff0c\u4f60\u53ef\u4ee5\u81ea\u884c\u8fdb\u884c\u9a8c\u8bc1\uff0c\u4ee5\u514d\u6709\u9519\u8bef\u4ea7\u751f\u6263\u5206\u3002\u6b63\u786e\u7684\u53c2\u8003\u6ce2\u5f62\u53ef\u4ee5\u67e5\u770b\u6807\u51c6\u6ce2\u5f62\u6587\u4ef6\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\u81ea\u884c\u68c0\u67e5\uff0c\u4f60\u53ef\u4ee5\u5728 test.s \u7f16\u5199\u66f4\u591a\u7684\u4eff\u771f\u4ee3\u7801\uff0c\u901a\u8fc7 Venus \u5e73\u53f0\u83b7\u5f97\u5341\u516d\u8fdb\u5236\u6587\u4ef6\u5e76\u66f4\u540d\u4e3a <code>console.out</code>\uff0c\u4f7f\u7528 ImmGen_tb_gen.py \u83b7\u5f97\u8981\u586b\u5199\u8fdb\u4eff\u771f\u6fc0\u52b1\u6587\u4ef6\u7684\u4ee3\u7801\u3002\u8fd9\u4e00\u6bb5 Python \u4ee3\u7801\u975e\u5e38\u7b80\u5355\uff0c\u8bf7\u81ea\u884c\u67e5\u770b\u6587\u4ef6\u547d\u540d\u4e0e\u542b\u4e49\u3002\u5f53\u7136\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u65b9\u5f0f\u83b7\u5f97\u6d4b\u8bd5\u4ee3\u7801\uff0c\u8fd9\u91cc\u4ec5\u4f5c\u793a\u4f8b\uff0c\u4ee5\u540e\u4e0d\u518d\u63d0\u4f9b\u7c7b\u4f3c\u6587\u4ef6\u3002</p> <p><code>SCPU_ctrl</code> \u6a21\u5757\u4e5f\u5c06\u91c7\u53d6\u7c7b\u4f3c\u7684\u4eff\u771f\u6d4b\u8bd5\uff0c\u52a9\u6559\u5c06\u4f7f\u7528 SCPU_ctrl_tb.v \u5bf9\u4f60\u7684\u6a21\u5757\u8fdb\u884c\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u4f7f\u7528\u8be5\u6587\u4ef6\u81ea\u884c\u6d4b\u8bd5\uff0c\u4ee5\u514d\u6709\u9519\u8bef\u4ea7\u751f\u6263\u5206\u3002</p>"},{"location":"Lab4/DataPath_CtrlUnit/#scpu","title":"SCPU","text":"<p>\u4e3a\u4e86\u65b9\u4fbf\u6d4b\u8bd5\uff0c\u6211\u4eec\u9700\u8981\u642d\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u4ec5\u5305\u542b SCPU \u4ee5\u53ca Mem(IMem &amp; DMem) \u7684\u6d4b\u8bd5\u5e73\u53f0\u3002</p> <p>\u4f60\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801\uff0c\u5982\u679c\u4f60\u7684\u7aef\u53e3\u540d\u4e0e\u4e4b\u4e0d\u540c\u8bf7\u81ea\u884c\u4fee\u6539\u3002</p> testbenchtestbench_tb <pre><code>module testbench(\ninput clk,\ninput rst\n);\n/* SCPU \u4e2d\u63a5\u51fa */\nwire [31:0] Addr_out;\nwire [31:0] Data_out;       wire        CPU_MIO;\nwire        MemRW;\nwire [31:0] PC_out;\n/* RAM \u63a5\u51fa */\nwire [31:0] douta;\n/* ROM \u63a5\u51fa */\nwire [31:0] spo;\nSCPU u0(\n.clk(clk),\n.rst(rst),\n.Data_in(douta),\n.MIO_ready(CPU_MIO),\n.inst_in(spo),\n.Addr_out(Addr_out),\n.Data_out(Data_out),\n.CPU_MIO(CPU_MIO),\n.MemRW(MemRW),\n.PC_out(PC_out)\n);\nRAM_B u1(\n.clka(~clk),\n.wea(MemRW),\n.addra(Addr_out[11:2]),\n.dina(Data_out),\n.douta(douta)\n);\nROM_B u2(\n.a(PC_out[11:2]),\n.spo(spo)\n);\nendmodule\n</code></pre> <pre><code>module testbench_tb();\nreg clk;\nreg rst;\ntestbench m0(.clk(clk), .rst(rst));\ninitial begin\nclk = 1'b0;\nrst = 1'b1;\n#5;\nrst = 1'b0;\nend\nalways #50 clk = ~clk;\nendmodule\n</code></pre> <p>\u4ee5\u4e0a\u4ee3\u7801\u5e76\u672a\u9a8c\u8bc1\uff0c\u5982\u6709\u95ee\u9898\u8bf7\u8054\u7cfb\u52a9\u6559\u3002</p> <p>\u8bf7\u81ea\u884c\u4e66\u5199\u6d4b\u8bd5\u4ee3\u7801\uff0c\u751f\u6210 ROM \u6838\uff0c\u5e76\u8fdb\u884c\u4eff\u771f\u3002</p>"},{"location":"Lab4/DataPath_CtrlUnit/#_4","title":"\u4e0b\u677f\u9a8c\u8bc1","text":"<p>\u9a8c\u6536\u65f6\uff0c\u4f60\u9700\u8981\u4f7f\u7528\u4ee5\u4e0b\u9a8c\u6536\u4ee3\u7801\u3002\uff08\u9a8c\u6536\u4ee3\u7801\u4e3a\u4e0a\u5c4a\u52a9\u6559 @NonoHh \u6240\u5199\uff09</p> \u9a8c\u6536\u4ee3\u7801 test.sIMem.coeDMem.coe <pre><code>jal zero, start # 0\nadd zero, zero, zero # 4\nadd zero, zero, zero # 8\nadd zero, zero, zero # C\nadd zero, zero, zero # 10\nadd zero, zero, zero # 14\nadd zero, zero, zero # 18\nadd zero, zero, zero # 1C\n\nstart:\naddi x1, zero, -1 # x1=FFFFFFFF\nxori x3, x1, 1 # x3=FFFFFFFE\nadd x3, x3, x3 # x3=FFFFFFFC\nadd x3, x3, x3 # x3=FFFFFFF8\nadd x3, x3, x3 # x3=FFFFFFF0\nadd x3, x3, x3 # x3=FFFFFFE0\nadd x3, x3, x3 # x3=FFFFFFC0\nxor x20, x3, x1 # x20=0000003F\nadd x3, x3, x3 # x3=FFFFFF80\nadd x3, x3, x3 # x3=FFFFFF00\nadd x3, x3, x3 # x3=FFFFFE00\nadd x3, x3, x3 # x3=FFFFFC00\nadd x3, x3, x3 # x3=FFFFF800\nadd x3, x3, x3 # x3=FFFFF000\nadd x3, x3, x3 # x3=FFFFE000\nadd x3, x3, x3 # x3=FFFFC000\nadd x3, x3, x3 # x3=FFFF8000\nadd x3, x3, x3 # x3=FFFF0000\nadd x3, x3, x3 # x3=FFFE0000\nadd x3, x3, x3 # x3=FFFC0000\nadd x3, x3, x3 # x3=FFF80000\nadd x3, x3, x3 # x3=FFF00000\nadd x3, x3, x3 # x3=FFE00000\nadd x3, x3, x3 # x3=FFC00000\nadd x3, x3, x3 # x3=FF800000\nadd x3, x3, x3 # x3=FF000000\nadd x3, x3, x3 # x3=FE000000\nadd x3, x3, x3 # x3=FC000000\nadd x6, x3, x3 # x6=F8000000\nadd x3, x6, x6 # x3=F0000000\nadd x4, x3, x3 # x4=E0000000\nadd x13, x4, x4 # x13=C0000000\nadd x8, x13, x13 # x8=80000000\nori x26, zero, 1 # x26=00000001\nandi x26, x26, 0xff\nsrl x27, x8, x26\n\nloop:\nslt x2, x1, zero # x2=00000001 \u9488\u5bf9ALU32\u4f4d\u6709\u7b26\u53f7\u6570\u51cf\nslti x2, x1, 0 # x2=00000001 \u9488\u5bf9ALU32\u4f4d\u6709\u7b26\u53f7\u6570\u51cf\nadd x14, x2, x2\nadd x14, x14, x14 # x14=4\nsub x19, x14, x14 # x19=0\nsrli x19, x19, 1\naddi x10, x19, -1\nor x10, x10, zero\nadd x10, x10, x10 # x10=FFFFFFFE\n\nloop1:\nsw x6, 0x4(x3) # \u8ba1\u6570\u5668\u7aef\u53e3: F0000004, \u9001\u8ba1\u6570\u5e38\u6570x6=F8000000\nlw x5, 0x0(x3) # \u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001: {counter0_out,counter1_out,counter2_out,led_out[12:0], SW}\nadd x5, x5, x5 # \u5de6\u79fb\nadd x5, x5, x5 # \u5de6\u79fb2\u4f4d\u5c06SW\u4e0eLED\u5bf9\u9f50, \u540c\u65f6D1D0\u7f6e00, \u9009\u62e9\u8ba1\u6570\u5668\u901a\u90530\nsw x5, 0x0(x3) # x5\u8f93\u51fa\u5230GPIO\u7aef\u53e3F0000000, \u8bbe\u7f6e\u8ba1\u6570\u5668\u901a\u9053counter_set=00\u7aef\u53e3\nadd x9, x9, x2 # x9=x9+1\nsw x9, 0x0(x4) # x9\u9001x4=E0000000\u4e03\u6bb5\u7801\u7aef\u53e3\nlw x13, 0x14(zero) # \u53d6\u5b58\u50a8\u566820\u5355\u5143\u9884\u5b58\u6570\u636e\u81f3x13, \u7a0b\u5e8f\u8ba1\u6570\u5ef6\u65f6\u5e38\u6570\n\nloop2:\nlw x5, 0x0(x3) # \u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001: {out0, out1, out2, D28-D20, LED7\nadd x5, x5, x5\nadd x5, x5, x5 # \u5de6\u79fb2\u4f4d\u5c06SW\u4e0eLED\u5bf9\u9f50, \u540c\u65f6D1D0\u7f6e00, \u9009\u62e9\u8ba1\u6570\u5668\u901a\u90530\nsw x5, 0x0(x3) # x5\u8f93\u51fa\u5230GPIO\u7aef\u53e3F0000000, \u8ba1\u6570\u5668\u901a\u9053counter_set=00\u7aef\u53e3\u4e0d\u53d8\nlw x5, 0x0(x3) # \u518d\u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001\nand x11, x5, x8 # \u53d6\u6700\u9ad8\u4f4d=out0, \u5c4f\u853d\u5176\u4f59\u4f4d\u9001x11\nadd x13, x13, x2 # \u7a0b\u5e8f\u8ba1\u6570\u5ef6\u65f6\nbeq x13, zero, C_init # \u7a0b\u5e8f\u8ba1\u6570x13=0, \u8f6c\u8ba1\u6570\u5668\u521d\u59cb\u5316, \u4fee\u65397\u6bb5\u7801\u663e\u793a: C_init\n\nl_next: # \u5224\u65ad7\u6bb5\u7801\u663e\u793a\u6a21\u5f0f\uff1aSW[4: 3]\u63a7\u5236\nlw x5, 0x0(x3) # \u518d\u8bfbGPIO\u7aef\u53e3F0000000\u5f00\u5173SW\u72b6\u6001\nadd x18, x14, x14 # x14=4, x18=00000008\nadd x22, x18, x18 # x22=00000010\nadd x18, x18, x22 # x18=00000018(00011000)\nand x11, x5, x18 # \u53d6SW[4: 3]\nbeq x11, zero, L20 # SW[4: 3]=00, 7\u6bb5\u663e\u793a\"\u70b9\"\u5faa\u73af\u79fb\u4f4d\uff1aL20, SW0=0\nbeq x11, x18, L21 # SW[4: 3]=11, \u663e\u793a\u4e03\u6bb5\u56fe\u5f62, L21, SW0=0\nadd x18, x14, x14 # x18=8\nbeq x11, x18, L22 # SW[4: 3]=01, \u4e03\u6bb5\u663e\u793a\u9884\u7f6e\u6570\u5b57, L22, SW0=1\nsw x9, 0x0(x4) # SW[4: 3]=10, \u663e\u793ax9, SW0=1\njal zero, loop2\n\nL20:\nbeq x10, x1, L4 # x10=ffffffff, \u8f6c\u79fbL4\njal zero, L3\n\nL4:\naddi x10, zero, -1 # x10=ffffffff\nadd x10, x10, x10 # x10=fffffffe\n\nL3:\nsw x10, 0x0(x4) # SW[4: 3]=00, 7\u6bb5\u663e\u793a\u70b9\u79fb\u4f4d\u540e\u663e\u793a\njal zero, loop2\n\nL21:\nlw x9, 0x60(x17) # SW[4: 3]=11, \u4ece\u5185\u5b58\u53d6\u9884\u5b58\u4e03\u6bb5\u56fe\u5f62\nsw x9, 0x0(x4) # SW[4: 3]=11, \u663e\u793a\u4e03\u6bb5\u56fe\u5f62\njal zero, loop2\n\nL22:\nlw x9, 0x20(x17) # SW[4: 3]=01, \u4ece\u5185\u5b58\u53d6\u9884\u5b58\u6570\u5b57\nsw x9, 0x0(x4) # SW[4: 3]=01, \u4e03\u6bb5\u663e\u793a\u9884\u7f6e\u6570\u5b57\njal zero, loop2\n\nC_init:\nlw x13, 0x14(zero) # \u53d6\u7a0b\u5e8f\u8ba1\u6570\u5ef6\u65f6\u521d\u59cb\u5316\u5e38\u6570\nadd x10, x10, x10 # x10=fffffffc, 7\u6bb5\u56fe\u5f62\u70b9\u5de6\u79fb121 or x10, x10, x2 # x10\u672b\u4f4d\u7f6e1, \u5bf9\u5e94\u53f3\u4e0a\u89d2\u4e0d\u663e\u793a\nadd x17, x17, x14 # x17=00000004, LED\u56fe\u5f62\u8bbf\u5b58\u5730\u5740+4\nand x17, x17, x20 # x17=000000XX, \u5c4f\u853d\u5730\u5740\u9ad8\u4f4d, \u53ea\u53d66\u4f4d\nadd x9, x9, x2 # x9+1\nbeq x9, x1, L6 # \u82e5x9=ffffffff, \u91cd\u7f6ex9=5\njal zero, L7\n\nL6:\nadd x9, zero, x14 # x9=4\nadd x9, x9, x2 # \u91cd\u7f6ex9=5\n\nL7:\nlw x5, 0x0(x3) # \u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001\nadd x11, x5, x5\nadd x11, x11, x11 # \u5de6\u79fb2\u4f4d\u5c06SW\u4e0eLED\u5bf9\u9f50, \u540c\u65f6D1D0\u7f6e00, \u9009\u62e9\u8ba1\u6570\u5668\u901a\u90530\nsw x11, 0x0(x3) # x5\u8f93\u51fa\u5230GPIO\u7aef\u53e3F0000000, \u8ba1\u6570\u5668\u901a\u9053counter_set=00\u7aef\u53e3\u4e0d\u53d8\nsw x6, 0x4(x3) # \u8ba1\u6570\u5668\u7aef\u53e3: F0000004, \u9001\u8ba1\u6570\u5e38\u6570x6=F8000000\njal zero, l_next\n</code></pre> <pre><code>memory_initialization_radix=16;\nmemory_initialization_vector=\n0200006F, 00000033, 00000033, 00000033, 00000033,\n00000033, 00000033, 00000033, FFF00093, 0010C193,\n003181B3, 003181B3, 003181B3, 003181B3, 003181B3,\n0011CA33, 003181B3, 003181B3, 003181B3, 003181B3,\n003181B3, 003181B3, 003181B3, 003181B3, 003181B3,\n003181B3, 003181B3, 003181B3, 003181B3, 003181B3,\n003181B3, 003181B3, 003181B3, 003181B3, 003181B3,\n003181B3, 00318333, 006301B3, 00318233, 004206B3,\n00D68433, 00106D13, 0FFD7D13, 01A45DB3, 0000A133,\n0000A113, 00210733, 00E70733, 40E709B3, 0019D993,\nFFF98513, 00056533, 00A50533, 0061A223, 0001A283,\n005282B3, 005282B3, 0051A023, 002484B3, 00922023,\n01402683, 0001A283, 005282B3, 005282B3, 0051A023,\n0001A283, 0082F5B3, 002686B3, 06068063, 0001A283,\n00E70933, 01290B33, 01690933, 0122F5B3, 00058C63,\n03258663, 00E70933, 03258863, 00922023, FB9FF06F,\n00150463, 00C0006F, FFF00513, 00A50533, 00A22023,\nFA1FF06F, 0608A483, 00922023, F95FF06F, 0208A483,\n00922023, F89FF06F, 01402683, 00A50533, 00E888B3,\n0148F8B3, 002484B3, 00148463, 00C0006F, 00E004B3,\n002484B3, 0001A283, 005285B3, 00B585B3, 00B1A023,\n0061A223, F6DFF06F;\n</code></pre> <pre><code>memory_initialization_radix=16;\nmemory_initialization_vector=\nf0000000, 000002AB, 80000000, 0000003F, 00000001, FFF70000, 0000FFFF, 80000000, 00000000, 11111111, \n22222222, 33333333, 44444444, 55555555, 66666666, 77777777, 88888888, 99999999, aaaaaaaa, bbbbbbbb, \ncccccccc, dddddddd, eeeeeeee, ffffffff, 557EF7E0, D7BDFBD9, D7DBFDB9, DFCFFCFB, DFCFBFFF, F7F3DFFF,\nFFFFDF3D, FFFF9DB9, FFFFBCFB, DFCFFCFB, DFCFBFFF, D7DB9FFF, D7DBFDB9, D7BDFBD9, FFFF07E0, 007E0FFF,\n03bdf020, 03def820, 08002300;\n</code></pre> <p>\u4f60\u9700\u8981\u4fee\u6539 <code>DMem.coe</code> \u4e2d\u7684 <code>00000000, 11111111, 22222222..., ffffffff</code> \u90e8\u5206\uff0c\u5c06\u5b83\u4fee\u6539\u4e3a\u4f60\u7684\u5b66\u53f7(\u5982 3210101145)\u4e0e\u65e5\u671f(\u5982 230313)\u3002\u4fee\u6539\u540e\uff0c\u8fd9\u4e00\u6bb5\u5e94\u4e3a\uff1a</p> <pre><code>...\n33333333, 22222222, 11111111, 00000000, 11111111, 00000000, 11111111, \n11111111, 44444444, 55555555, 22222222, 33333333, 00000000, 33333333,\n11111111, 33333333\n...\n</code></pre> <p>\u4f7f\u7528\u9a8c\u6536\u4ee3\u7801\u7684\u9884\u671f\u8868\u73b0\uff1a</p> <ul> <li>Graphics \u6a21\u5f0f\u4e0b<ul> <li><code>SW[4:3] = 00</code><ul> <li>\u91cd\u542f\u540e\uff0c\u4e03\u6bb5\u6570\u7801\u7ba1\u4f9d\u6b21\u4eae\u8d77\u3002</li> <li>\u53ea\u5728\u91cd\u542f\u540e\u4eae\u4e00\u6b21\uff0c\u4e4b\u540e\u4e0d\u53d8\u3002</li> </ul> </li> <li><code>SW[4:3] = 11</code><ul> <li>\u53d8\u5316\u7684\u77e9\u5f62</li> </ul> </li> </ul> </li> <li>Number \u6a21\u5f0f\u4e0b<ul> <li><code>SW[4:3] = 01</code><ul> <li>\u663e\u793a\u4f60\u7684\u5b66\u53f7\u4e0e\u65e5\u671f</li> </ul> </li> <li><code>SW[4:3] = 10</code><ul> <li>\u6570\u5b57\u81ea\u589e</li> </ul> </li> </ul> </li> </ul> <p>\u5982\u679c\u5728\u67d0\u6a21\u5f0f\u4e0b\u4f60\u7684\u8868\u73b0\u4e0e\u9884\u671f\u4e0d\u7b26\uff0c\u8bf7\u67e5\u770b\u8be5\u6a21\u5f0f\u5bf9\u5e94\u4ee3\u7801\uff0c\u7f29\u5c0f\u68c0\u67e5\u8303\u56f4\u3002</p> <p>\u5982\u679c\u4f60\u7684\u4e0b\u677f\u73b0\u8c61\u5e76\u4e0d\u7b26\u5408\u9884\u671f\uff1a</p> <ul> <li>\u56db\u79cd\u73b0\u8c61\u5b8c\u5168\u6ca1\u6709\uff0c\u5168\u90e8\u4e71\u7801\uff0c\u6570\u7801\u7ba1\u663e\u793a 55AA\u3002CPU \u5b9e\u73b0\u6709\u4e25\u91cd\u9519\u8bef\uff0c\u4f7f\u7528 testbench \u4e0e\u81ea\u5df1\u7684\u6d4b\u8bd5\u4ee3\u7801\u8fdb\u884c\u4eff\u771f\u6d4b\u8bd5\uff0c\u8c03\u6574\u5230\u6307\u4ee4\u6d4b\u8bd5\u65e0\u8bef\u518d\u4e0b\u677f\u3002</li> <li>LED \u706f\u548c\u5f00\u5173\u4e0d\u540c\u6b65\u3002\u8003\u8651 <code>lw, sw, shift</code> \u7b49\u6307\u4ee4\u662f\u5426\u6b63\u786e\u3002</li> <li>\u5f00\u673a\u73b0\u8c61\u6709\uff0c\u4f46\u662f\u5361\u4f4f\u4e0d\u52a8\u3002\u8003\u8651 <code>slt</code> \u6307\u4ee4\u662f\u5426\u6b63\u786e\u3002</li> <li>\u5f00\u673a\u73b0\u8c61\u548c\u81ea\u589e\u6709\uff0c\u5b66\u53f7\u548c\u77e9\u5f62\u52a8\u753b\u6ca1\u6709\u3002\u8003\u8651 RAM \u5185\u5bb9\u662f\u5426\u6b63\u786e\u8f7d\u5165\u3002</li> <li>\u4ec5\u77e9\u5f62\u52a8\u753b\u4e0d\u6b63\u786e\u3002\u8003\u8651 <code>jalr</code> \u6307\u4ee4\u662f\u5426\u6b63\u786e\u3002</li> </ul>"},{"location":"Lab4/Lab4/","title":"Lab4","text":"<p>2023.4.5 \u66f4\u65b0\uff1a\u4f60\u53ef\u80fd\u9700\u8981\u5934\u6587\u4ef6\u6765\u65b9\u4fbf\u4ee3\u7801\u7684\u4e66\u5199\u6216\u63d0\u9ad8\u53ef\u8bfb\u6027\uff0c\u4f60\u53ef\u4ee5\u53c2\u8003\u9644\u4ef6 Lab4_header.vh\u3002\u6ce8\u610f\u672c\u9644\u4ef6\u5e76\u672a\u7ecf\u8fc7\u9a8c\u8bc1\uff0c\u5982\u679c\u4f60\u53d1\u73b0\u9519\u8bef\uff0c\u8bf7\u4e0e\u6211\u8054\u7cfb\u4fee\u6539\uff0c\u8c22\u8c22\uff01</p> <p>\u672c\u6b21\u5b9e\u9a8c\u9700\u8981\u5b8c\u6210\u5355\u5468\u671f CPU\uff0c\u5b9e\u73b0 RISC-V 32I \u6307\u4ee4\u96c6\u7684\u6240\u6709\u6307\u4ee4\uff0c\u5982\u679c\u4f60\u5bf9\u6307\u4ee4\u4e0d\u719f\u6089\uff0c\u53ef\u4ee5\u67e5\u770b RISC-V \u624b\u518c\u6216\u901f\u67e5\u8868\u3002</p> <p>\u5b9e\u9a8c\u5206\u4e3a\u56db\u4e2a\u5c0f\u5b9e\u9a8c\uff0c4-0 \u4f7f\u7528\u63d0\u4f9b\u7684 DataPath \u548c CtrlUnit \u7684 IP \u6838\u7ec4\u6210 SCPU\uff0c4-1 \u4e0e 4-2 \u5206\u522b\u81ea\u884c\u5b9e\u73b0 CtrlUnit \u4e0e DataPath \u5e76\u7ec4\u6210 SCPU\uff0c4-3 \u5728\u4e4b\u524d\u5b9e\u9a8c\u7684\u57fa\u7840\u4e0a\u62d3\u5c55\u4ee5\u5b9e\u73b0 RISC-V 32I \u4e2d\u7684\u6240\u6709\u6307\u4ee4\uff08\u9664 <code>ecall, ebreak</code>\uff09\uff0c4-4 \u5728 4-3 \u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u7b80\u5355\u7684\u4e2d\u65ad\u5904\u7406\u3002</p> <p>\u672c\u5b9e\u9a8c\u9700\u8981\u63d0\u4ea4\u5b9e\u9a8c\u62a5\u544a\uff08Lab4 \u7684\u56db\u4e2a\u5c0f\u5b9e\u9a8c\u5408\u6210\u4e00\u4efd\u63d0\u4ea4\uff09</p> <p>\u63d0\u4ea4\u5b9e\u9a8c\u62a5\u544a\u65f6\uff0c\u4f60\u9700\u8981\u9644\u4e0a\u6e90\u4ee3\u7801\u3002</p> <pre><code>src_4_3210101145_\u738b\u67d0\u67d0.zip/ # \u7528\u4e00\u4e2azip\u6253\u5305\u6e90\u4ee3\u7801\n\u251c\u2500\u2500 Lab4_0\n\u251c\u2500\u2500 Lab4_1_2\n\u251c\u2500\u2500 Lab4_3\n\u2514\u2500\u2500 Lab4_4    # \u4ee5\u4e0a\u6587\u4ef6\u5939\u4e3a\u6bcf\u4e2a\u5b9e\u9a8c\u7684\u5de5\u7a0b\u6587\u4ef6\uff0c\u5305\u62ec\u4f60\u6240\u4f7f\u7528\u7684 IP \u4ed3\u5e93\uff0c\u8bf7\u4e0d\u8981\u9057\u6f0f\n# \u4e0a\u4e0b\u4e3a**\u4e24\u4e2a**\u538b\u7f29\u5305\ncheck_4_3210101145_\u738b\u67d0\u67d0.zip    # TA \u5c06\u8fdb\u884c\u6d4b\u8bd5\uff0c\u8bf7\u5c06\u4ee5\u4e0b\u6587\u4ef6\u5355\u72ec\u538b\u7f29\n\u251c\u2500\u2500 ImmGen.v\n\u2514\u2500\u2500 SCPU_ctrl\n\nreport_4_3210101145_\u738b\u67d0\u67d0.pdf # \u4f60\u7684\u5b9e\u9a8c\u62a5\u544a\uff0cLab4 \u6240\u6709\u5b9e\u9a8c\u5408\u6210\u4e00\u4efd\uff0c\u6ce8\u610f\u63d0\u4ea4PDF\u683c\u5f0f\n</code></pre>"},{"location":"Lab4/Lab4/#lab4-0","title":"Lab4-0","text":"<p>\u4f7f\u7528\u63d0\u4f9b\u7684 IP \u6838\u7ec4\u6210 SCPU\uff0c\u53c2\u8003\u9644\u4ef6\u5b8c\u6210\u5373\u53ef\u3002</p> <p>\u7ec4\u6210 SCPU \u540e\uff0c\u5c06 Lab2 \u5de5\u7a0b\u4e2d\u7684 SCPU IP Core \u66f4\u6539\u4e3a\u672c\u5b9e\u9a8c\u5f97\u5230\u7684 SCPU\uff0c\u5e76\u4f7f\u7528\u4e4b\u524d\u5b9e\u9a8c\u7684 Fibonacci \u5217\u8fdb\u884c\u7b80\u5355\u6d4b\u8bd5\u3002</p> <p>\u672c\u8282\u5b9e\u9a8c\u4e0d\u9700\u8981\u9a8c\u6536\uff0c\u4f46\u9700\u8981\u5b9e\u9a8c\u62a5\u544a\u3002</p>"},{"location":"Lab4/exception_interruption/","title":"Lab4-4","text":""},{"location":"Lab4/exception_interruption/#_1","title":"\u524d\u7f6e\u77e5\u8bc6","text":""},{"location":"Lab4/exception_interruption/#exception-and-interruption","title":"Exception and Interruption","text":"<p>\u5728 Volume I: RISC-V Unprivileged ISA V20191213 \u7b2c 1.6 \u8282\uff0c\u6709\u5bf9 exception \u548c interruption \u7684\u89e3\u91ca\uff1a</p> <p>We use the term exception to refer to an unusual condition occurring at run time associated with an instruction in the current RISC-V hart. We use the term interrupt to refer to an external asynchronous event that may cause a RISC-V hart to experience an unexpected transfer of control. We use the term trap to refer to the transfer of control to a trap handler caused by either an exception or an interrupt.</p> <p>\u4e3a\u4e86\u65b9\u4fbf\u6587\u6863\u63cf\u8ff0\uff0c\u4e0b\u6587\u4e2d\u6211\u4eec\u7528\u201c\u4e2d\u65ad\u201d\u6307\u4ee3 interruption\uff0c\u7528\u201c\u5f02\u5e38\u201d\u6307\u4ee3 exception\uff0c\u7528 trap \u8868\u793a\u4e2d\u65ad\u4e0e\u5f02\u5e38\u3002</p>"},{"location":"Lab4/exception_interruption/#control-and-status-registerscsrs","title":"Control and Status Registers(CSRs)","text":"<p>\u5728 32 \u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u4e4b\u5916\uff08\u5373 <code>x0 - x31</code>\uff09\uff0c\u8fd8\u6709\u82e5\u5e72\u63a7\u5236\u72b6\u6001\u5bc4\u5b58\u5668(Control and Status Register, CSR)\u3002\u5728\u6211\u4eec\u7684\u5b9e\u9a8c\u4e2d\uff0cCPU \u59cb\u7ec8\u8fd0\u884c\u5728 Machine Mode \u4e0b\uff0c\u5728\u672c\u5b9e\u9a8c\u4e2d\u6211\u4eec\u53ea\u9700\u8981\u5173\u6ce8 Machine Mode \u4e0b\u7684\u90e8\u5206 CSR\u3002</p> <p>\u5bf9\u4e8e\u6bcf\u4e2a CSR \u7684\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u8bf7\u67e5\u770b Volume II: RISC-V Privileged Architectures V20211203\uff0c\u8fd9\u91cc\u4ec5\u5bf9\u6211\u4eec\u672c\u6b21\u5b9e\u9a8c\u9700\u8981\u7528\u5230\u7684 CSRs \u8fdb\u884c\u7b80\u4ecb\uff1a</p> <ul> <li>mstatus\uff1a Machine Status Register\uff0c\u5b58\u50a8\u5f53\u524d\u63a7\u5236\u72b6\u6001\u3002<ul> <li></li> <li>\u672c\u6b21\u5b9e\u9a8c\u4e2d\u4f60\u53ef\u4ee5\u505a\u76f8\u5bf9\u7b80\u5316\uff0c\u53ea\u8981\u53ef\u4ee5\u4fdd\u8bc1\u5728\u4e2d\u65ad\u5904\u7406\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u89e6\u53d1\u65b0\u7684\u4e2d\u65ad\u5373\u53ef\u3002</li> </ul> </li> <li>mtvec\uff1a Machine Trap-Vector Base-Address Register\uff0c\u5b58\u50a8\u4e2d\u65ad\u5411\u91cf\u8868\u57fa\u5730\u5740\u3002<ul> <li></li> <li>\u4f4e\u4e24\u4f4d\u8bb0\u5f55\u8df3\u8f6c\u6a21\u5f0f\uff0c<code>0</code> \u4e3a Direct \u6a21\u5f0f\uff0c\u5373\u6240\u6709 trap \u90fd\u5148\u8fdb\u5165 <code>BASE</code>\uff1b<code>1</code> \u4e3a Vectored \u6a21\u5f0f\uff0c\u5c06\u8fdb\u5165 <code>BASE + 4*cause</code>\u3002\u9ad8\u4f4d\u8bb0\u5f55\u7684\u662f <code>BASE</code> \u7684\u503c\uff08\u8bf7\u6ce8\u610f\u5bf9\u9f50\uff0c<code>BASE &lt;&lt; 2</code> \u624d\u662f\u771f\u6b63\u8981\u8df3\u8f6c\u7684\u5730\u5740\uff09\u3002</li> <li>\u672c\u6b21\u5b9e\u9a8c\u4e2d\uff0c\u8981\u6c42\u4f7f\u7528 Vectored \u6a21\u5f0f\uff0c\u56e0\u4e3a\u6211\u4eec\u5e76\u6ca1\u6709\u8981\u6c42\u5b9e\u73b0 <code>csrr</code> \u7b49\u6307\u4ee4\u3002</li> </ul> </li> <li>mcause\uff1a Machine Cause Register\uff0c\u5b58\u50a8\u5f15\u8d77\u8fd9\u6b21 trap \u7684\u539f\u56e0\u3002<ul> <li></li> <li>\u5982\u679c\u8fdb\u5165 trap \u7684\u539f\u56e0\u662f\u4e2d\u65ad\uff0c\u5219\u6700\u9ad8\u4f4d interrupt bit \u8bbe\u7f6e\u4e3a 1\u3002</li> <li>\u672c\u6b21\u5b9e\u9a8c\u5141\u8bb8\u4f60\u81ea\u7531\u7684\u8bbe\u8ba1 Exception Code \u7684\u542b\u4e49\uff0c\u5728\u5b9e\u9a8c\u62a5\u544a\u4e2d\u8bf4\u660e\u5373\u53ef\u3002</li> </ul> </li> <li>mtval\uff1a Machine Trap Value Register\uff0c\u5b58\u50a8\u5f02\u5e38\u7684\u76f8\u5173\u4fe1\u606f\u4ee5\u5e2e\u52a9\u8f6f\u4ef6\u5904\u7406\u5f02\u5e38\uff0c\u66fe\u79f0 mbadaddr\u3002<ul> <li></li> <li>\u5728\u672c\u6b21\u5b9e\u9a8c\u4e2d\u6ca1\u6709\u7528\u5230\uff0c\u53ef\u4ee5\u4e0d\u8fdb\u884c\u5b9e\u73b0\uff0c\u9664\u975e\u4f60\u5e0c\u671b\u5b8c\u6210\u5b58\u50a8\u5668\u8bbf\u95ee\u5f02\u5e38\uff08\u672c\u8282\u5b9e\u9a8c\u7684 bonus \u5185\u5bb9\uff09\u3002</li> </ul> </li> <li>mepc\uff1a Machine Exception Program Counter\uff0c\u5b58\u50a8 trap \u89e6\u53d1\u65f6\u5c06\u8981\u6267\u884c\u7684\u6307\u4ee4\u5730\u5740\uff0c\u5728 <code>mret</code> \u65f6\u4f5c\u4e3a\u8fd4\u56de\u5730\u5740\u3002<ul> <li></li> <li>\u672c\u6b21\u5b9e\u9a8c\u4e0d\u6d89\u53ca PC \u975e\u5bf9\u9f50\u5f02\u5e38\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u8003\u8651\u5c06\u8df3\u8f6c\u6307\u4ee4\u7684\u76ee\u6807\u5730\u5740\u9001\u5165 <code>mepc</code> \u7684\u60c5\u51b5\u3002</li> <li>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u4e00\u822c\u7684\u5b9e\u73b0\u4e2d\uff0c\u4f60\u9700\u8981\u5728 trap \u5904\u7406\u7a0b\u5e8f\u4e2d\u68c0\u67e5 <code>mcause</code> \u5bc4\u5b58\u5668\uff0c\u5982\u679c\u662f\u5f02\u5e38\u5219\u66f4\u65b0 <code>mepc &lt;- mepc + 4</code>\uff0c\u8fd9\u90e8\u5206\u4e0d\u662f\u4f60\u7684\u786c\u4ef6\u5b9e\u73b0\uff0c\u800c\u662f\u7531\u8f6f\u4ef6\uff08\u4f60\u7684 trap \u5904\u7406\u7a0b\u5e8f\uff09\u8fdb\u884c\u7ba1\u7406\u7684\u3002\u4f46\u662f\uff0c\u672c\u6b21\u5b9e\u9a8c\u5e76\u4e0d\u8981\u6c42\u5b9e\u73b0 <code>csrw</code> \u7b49\u6307\u4ee4\uff0c\u56e0\u6b64\u6211\u4eec\u8981\u5728 <code>RV_INT</code> \u6a21\u5757\u4e2d\u76f4\u63a5\u7ba1\u7406 <code>mepc</code>\uff0c\u5373\u89e6\u53d1 trap \u65f6\u76f4\u63a5\u6839\u636e\u89e6\u53d1\u4fe1\u53f7\uff08\u662f\u4e0d\u662f <code>INT</code>\uff09\u6765\u51b3\u5b9a <code>mepc &lt;- pc</code> \u8fd8\u662f <code>mepc &lt;- pc+4</code>\u3002</li> </ul> </li> </ul>"},{"location":"Lab4/exception_interruption/#trap","title":"trap","text":"<p>\u8fdb\u5165 trap \u65f6\uff0c\u786c\u4ef6\u9700\u8981\u8d1f\u8d23\u4fee\u6539\u82e5\u5e72 CSR \u5e76\u5c06 PC \u8c03\u6574\u4e3a trap \u5904\u7406\u7a0b\u5e8f\u7684\u7b2c\u4e00\u6761\u6307\u4ee4\u4f4d\u7f6e\uff08\u4fdd\u5b58\u5728 <code>mtvec</code> \u4e2d\uff09\u3002</p> <ul> <li>\u66f4\u65b0 <code>mcause</code>\uff0c\u8bb0\u5f55\u5f53\u524d\u662f\u4e0d\u662f\u4e2d\u65ad\uff0c\u5e76\u8bb0\u5f55 exception-code\u3002</li> <li>\u66f4\u65b0 <code>mstatus</code>\uff0c\u9632\u6b62\u5728 trap \u5904\u7406\u65f6\u53c8\u89e6\u53d1\u4e2d\u65ad\u3002</li> <li>\u66f4\u65b0 <code>mepc</code>\uff0c\u8bb0\u5f55\u5f53\u524d\u6307\u4ee4\u7684\u5730\u5740\u3002\u518d\u6b21\u63d0\u9192\uff0c\u672c\u5b9e\u9a8c\u4e2d\u786c\u4ef6 <code>RV_INT</code> \u6a21\u5757\u5c06\u76f4\u63a5\u7ba1\u7406 <code>mepc</code> \u662f\u5426\u81ea\u589e\uff0c\u5982\u679c\u89e6\u53d1\u7684\u539f\u56e0\u662f\u4e2d\u65ad\uff0c\u5219 <code>mepc &lt;- pc</code>\uff0c\u5426\u5219 <code>mepc &lt;- pc+4</code>\u3002</li> </ul> <p>\u4e3a\u4e86\u7b80\u5316\u5b9e\u9a8c\uff0c\u5728\u8fdb\u5165 trap \u540e\uff0c\u4f60\u4e0d\u9700\u8981\u4fdd\u5b58\u5f53\u524d\u73b0\u573a\uff08\u5bc4\u5b58\u5668\u503c\u7b49\uff09\uff0c\u53ea\u9700\u8981\u4f7f\u7528\u9a8c\u6536\u4ee3\u7801\u4e2d\u6ca1\u6709\u7528\u5230\u7684\u5bc4\u5b58\u5668\u5373\u53ef\u3002</p>"},{"location":"Lab4/exception_interruption/#_2","title":"\u5b9e\u9a8c\u8981\u6c42","text":"<p>\u672c\u5b9e\u9a8c\u9700\u8981\u4fee\u6539\u786c\u4ef6\uff08\u6dfb\u52a0 <code>RV_INT</code> \u6a21\u5757\uff0c\u4fee\u6539 Datapath\uff09\u4ee5\u53ca\u8f6f\u4ef6\uff08\u4fee\u6539\u9a8c\u6536\u4ee3\u7801\uff0c\u5b9e\u73b0 trap \u5904\u7406\uff09\u3002</p> <p>\u4fee\u6539 <code>SCPU_ctrl</code> \u6a21\u5757\u7528\u6765\u68c0\u67e5 <code>ecall</code> \u6307\u4ee4\u548c\u975e\u6cd5\u6307\u4ee4\uff0c\u5e76\u7ed9\u51fa\u76f8\u5e94\u4fe1\u53f7\u63a5\u5165 <code>Datapath</code> \u4e2d\u3002</p> <p>\u6dfb\u52a0 <code>VGA</code> \u6a21\u5757\u7684 debug \u4fe1\u53f7\uff0c\u81f3\u5c11\u9700\u8981 <code>mstatus, mcause, mepc, mtvec</code> \u7684\u503c\u3002</p> <p>\u4f60\u9700\u8981\u8bbe\u8ba1\u5b9e\u73b0\u4e09\u79cd trap\uff1a\u5916\u90e8\u4e2d\u65ad\u3001 <code>ecall</code> \u6307\u4ee4\u548c\u975e\u6cd5\u6307\u4ee4\u3002</p> <ul> <li>\u5916\u90e8\u4e2d\u65ad\uff0c\u5347\u8d77 <code>INT</code> \u4fe1\u53f7\uff0c\u4f60\u53ef\u4ee5\u8bbe\u7f6e\u67d0\u4e2a\u5f00\u5173\u6765\u5f15\u8d77\u5916\u90e8\u4e2d\u65ad\u3002\u5f15\u8d77\u5916\u90e8\u4e2d\u65ad\u65f6\uff0c\u4f60\u9700\u8981\u5728\u4e03\u6bb5\u7ba1\u4e0a\u6253\u5370\u51fa\u4ee5\u4e0b\u56fe\u5f62\uff1a<ul> <li></li> </ul> </li> <li><code>ecall</code> \u6307\u4ee4\uff0c\u56e0\u4e3a\u6211\u4eec\u5e76\u6ca1\u6709\u5b9e\u73b0\u7279\u6743\u67b6\u6784\uff0c\u8fd9\u91cc <code>ecall</code> \u6307\u4ee4\u4ec5\u7528\u6765\u4f5c\u4e3a\u89e6\u53d1\u76f8\u5e94\u4e2d\u65ad\u7684\u4fe1\u53f7\u3002\u5f53\u8fdb\u884c <code>ecall</code> \u65f6\uff0c\u4f60\u9700\u8981\u5728\u4e03\u6bb5\u7ba1\u4e0a\u6253\u5370\u51fa\u4ee5\u4e0b\u56fe\u5f62\uff1a<ul> <li></li> </ul> </li> <li>\u975e\u6cd5\u6307\u4ee4\uff0c\u5982\u679c\u5c06\u8981\u6267\u884c\u7684\u6307\u4ee4\u662f\u975e\u6cd5\u7684\uff0c\u5219\u89e6\u53d1\u975e\u6cd5\u6307\u4ee4\u5f02\u5e38\u3002\u4f60\u9700\u8981\u5728\u4e03\u6bb5\u7ba1\u4e0a\u6253\u5370\u51fa\u4ee5\u4e0b\u56fe\u5f62\uff1a<ul> <li></li> </ul> </li> </ul> <p>\u5982\u4f55\u5728\u56fe\u5f62\u6a21\u5f0f\u4e0b\u6253\u5370\u5c06\u5728\u8f6f\u4ef6\u5b9e\u73b0\u4e00\u8282\u8bf4\u660e\u3002</p>"},{"location":"Lab4/exception_interruption/#_3","title":"\u6a21\u5757\u5b9e\u73b0","text":"<p>\u4e2d\u65ad\u5904\u7406\u4e3b\u8981\u662f\u6539\u53d8\u4e86\u6307\u4ee4\u6d41\uff0c\u7531\u6b63\u5e38\u7684\u6307\u4ee4\u8fd0\u884c\u5207\u6362\u5230 trap \u5904\u7406\u7a0b\u5e8f\u7684\u6267\u884c\uff0c\u6700\u7ec8\u56de\u5230\u6b63\u5e38\u7684\u6307\u4ee4\u6d41\u4e2d\u7ee7\u7eed\u6267\u884c\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u9700\u8981\u8bbe\u8ba1\u4e00\u4e2a\u6a21\u5757\uff0c\u7528\u6765\u63a5\u6536\u63a7\u5236\u4fe1\u53f7\u6216\u5916\u90e8\u4fe1\u53f7\uff0c\u5224\u65ad\u4e0b\u4e00\u6761\u8981\u6267\u884c\u7684\u6307\u4ee4\u662f\u6b63\u5e38\u6307\u4ee4\u6d41\u8fd0\u884c\u8fd8\u662f trap \u5904\u7406\u7684\u6307\u4ee4\uff1b\u540c\u65f6\uff0c\u8fd8\u9700\u8981\u4fee\u6539 Datapath \u4ee5\u652f\u6301 PC \u6765\u6e90\u7684\u6539\u53d8\u3002</p> RV_INT.v<pre><code>module RV_INT(\ninput       clk,\ninput       rst,\ninput       INT,          // \u5916\u90e8\u4e2d\u65ad\u4fe1\u53f7\ninput       ecall,        // ECALL \u6307\u4ee4\ninput       mret,         // MRET \u6307\u4ee4\ninput       illegal_inst, // \u975e\u6cd5\u6307\u4ee4\u4fe1\u53f7\ninput [31:0] pc_next,     // \u6b63\u5e38\u6307\u4ee4\u6d41\noutput[31:0] pc           // \u5c06\u6267\u884c\u7684\u6307\u4ee4 PC \u503c\n);\n</code></pre> <p>\u8fd9\u4e00\u6a21\u5757\u4e2d\uff0c\u4f60\u9700\u8981\u4fdd\u5b58\u5e76\u7ba1\u7406 <code>mstatus, mtvec, mcause, mtval, mepc</code> \u7b49 CSRs\u3002\u5b9e\u73b0\u6a21\u5757\u65f6\uff0c\u9700\u8981\u65f6\u523b\u6ce8\u610f\uff1a</p> <ul> <li><code>mtvec</code> \u7684\u503c\u8981\u4e0e\u4f60\u6240\u5199\u4ee3\u7801\u4e2d trap \u5904\u7406\u7a0b\u5e8f\u9996\u6761\u6307\u4ee4\u4f4d\u7f6e\u76f8\u540c\uff0c\u5982\u679c\u4f60\u6539\u53d8\u4e86\u4ee3\u7801\uff0c\u9700\u8981\u68c0\u67e5\u662f\u4e0d\u662f\u9700\u8981\u4fee\u6539 <code>mtvec</code> \u7684\u503c\u3002</li> <li>\u5982\u679c\u6b63\u5728\u8fdb\u884c trap \u5904\u7406\u7a0b\u5e8f\uff08\u8fd8\u672a\u6267\u884c <code>mret</code>\uff09\uff0c\u4e0d\u63a5\u53d7\u5176\u4ed6 trap\u3002</li> <li>\u6839\u636e\u4e0d\u540c\u7684\u4e2d\u65ad\u4fe1\u53f7\uff0c\u5bf9 CSRs \u8fdb\u884c\u4fee\u6539\uff0c\u518d\u6b21\u63d0\u9192\uff0c\u6211\u4eec\u7684\u7b80\u5355\u5b9e\u73b0\u4e2d\uff0c\u9700\u8981\u786c\u4ef6\u5bf9 <code>mepc</code> \u7684\u5177\u4f53\u53d6\u503c\u8fdb\u884c\u7ba1\u7406\u3002</li> <li>\u8bf7\u6ce8\u610f\u8bbe\u7f6e CSRs \u7684\u521d\u59cb\u503c\uff0c\u5e76\u6ce8\u610f <code>rst</code> \u65f6\u6062\u590d\u521d\u59cb\u503c\u3002</li> </ul>"},{"location":"Lab4/exception_interruption/#_4","title":"\u8f6f\u4ef6\u5b9e\u73b0","text":"<p>\u4f60\u9700\u8981\u4fee\u6539 Lab4-3 \u63d0\u4f9b\u7684\u9a8c\u6536\u4ee3\u7801\uff0c\u5b9e\u73b0 trap \u5904\u7406\u7a0b\u5e8f\u4ee5\u53ca\u4e09\u79cd\u5bf9\u5e94\u7684\u5904\u7406\u7a0b\u5e8f\u3002</p>"},{"location":"Lab4/exception_interruption/#trap_1","title":"trap \u5904\u7406\u7a0b\u5e8f","text":"<p>\u4e00\u4e2a\u7b80\u5355\u7684\u65b9\u5f0f\u662f\u653e\u7f6e\u82e5\u8df3\u8f6c\u6307\u4ee4\uff0c\u5728 trap \u5904\u7406\u7a0b\u5e8f\u4e2d\u8df3\u81f3\u76f8\u5e94\u4e2d\u65ad/\u5f02\u5e38\u7684\u5904\u7406\u7a0b\u5e8f\u4e2d\u3002\u5982\u679c\u4f60\u4f7f\u7528 Vectored \u6a21\u5f0f\uff0c\u5e76\u5c06\u4e09\u79cd trap \u7684 exception code \u5206\u522b\u8bbe\u7f6e\u4e3a <code>1, 2, 3</code>\uff0c\u4f60\u7684\u4ee3\u7801\u5e94\u8be5\u7c7b\u4f3c\u4e8e\uff1a</p> <pre><code># mtvec.BASE = 0x0\n# mtvec.MODE = 1(Vecotored mode)\njal x0, main          # PC = 0x0, \u6b63\u5e38\u7a0b\u5e8f\u7684\u5165\u53e3\njal x0, ill_trap      # PC = 0x4, \u8fdb\u5165\u975e\u6cd5\u6307\u4ee4\u5904\u7406\u7a0b\u5e8f\njal x0, ecall_trap    # PC = 0x8, \u8fdb\u5165 ecall \u5904\u7406\u7a0b\u5e8f\njal x0, int_trap      # PC = 0xC, \u8fdb\u5165\u5916\u90e8\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\n</code></pre>"},{"location":"Lab4/exception_interruption/#_5","title":"\u56fe\u5f62\u6a21\u5f0f\u4e0b\u7684\u6253\u5370","text":"<p>\u76ee\u524d\u63d0\u4f9b\u7684\u4e03\u6bb5\u6570\u7801\u7ba1 IP \u6838\u4ec5\u80fd\u652f\u6301\u6253\u5370\u4e00\u534a\u7684\u56fe\u5f62\uff084\u4e2a\uff09\uff0c\u53e6\u4e00\u534a\u662f\u62f7\u8d1d\u3002</p> <p>\u8f93\u5165\u7684 <code>Disp_num</code> \u5230\u6253\u5370\u56fe\u5f62\u7684\u6620\u5c04\u5982\u4e0b\uff1a</p> SSeg_map<pre><code>module SSeg_map(\ninput[31:0]Disp_num, output[63:0]Seg_map\n);\nassign Seg_map = {\nDisp_num[0],  Disp_num[4], Disp_num[16], Disp_num[25], Disp_num[17], Disp_num[5], Disp_num[12], Disp_num[24],\nDisp_num[1],  Disp_num[6], Disp_num[18], Disp_num[27], Disp_num[19], Disp_num[7], Disp_num[13], Disp_num[26], Disp_num[2],  Disp_num[8], Disp_num[20], Disp_num[29], Disp_num[21], Disp_num[9], Disp_num[14], Disp_num[28], Disp_num[3],  Disp_num[10],Disp_num[22], Disp_num[31], Disp_num[23], Disp_num[11],Disp_num[15], Disp_num[30],\n// Copied right part\nDisp_num[0],  Disp_num[4], Disp_num[16], Disp_num[25], Disp_num[17], Disp_num[5], Disp_num[12], Disp_num[24], Disp_num[1],  Disp_num[6], Disp_num[18], Disp_num[27], Disp_num[19], Disp_num[7], Disp_num[13], Disp_num[26], Disp_num[2],  Disp_num[8], Disp_num[20], Disp_num[29], Disp_num[21], Disp_num[9], Disp_num[14], Disp_num[28], Disp_num[3],  Disp_num[10],Disp_num[22], Disp_num[31], Disp_num[23], Disp_num[11],Disp_num[15], Disp_num[30],        };\nendmodule\n</code></pre> <p>\u5176\u4e2d <code>Disp_num</code> \u4e3a\u6211\u4eec\u9700\u8981\u63d0\u4f9b\u7684 32-bit \u503c\uff0c<code>Seg_map</code> \u662f\u6700\u7ec8\u6253\u5370\u51fa\u6765\u7684\u56fe\u5f62\uff0c<code>0</code> \u4e3a\u4eae\u3002\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u8bbe\u8ba1\u51fa\u6765\u5e0c\u671b\u6253\u5370\u7684\u56fe\u5f62\uff0c\u56e0\u6b64\u9700\u8981\u901a\u8fc7\u8fd9\u4e2a\u56fe\u5f62\u7684\u9006\u6620\u5c04\u5f97\u5230\u8f93\u5165\u7ed9 <code>Sseg7</code> \u7684 <code>Disp_num</code> \u503c\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u5e0c\u671b\u5728\u4ece\u5de6\u5f80\u53f3\u6570\u7b2c\u4e09\u4e2a\u6570\u7801\u7ba1\u4e0a\u7ed8\u5236\u4e00\u4e2a\u77e9\u5f62\uff0c\u53ef\u4ee5\u5f88\u5bb9\u6613\u5f97\u5230 <code>Seg_map</code> \u7684\u503c\u5e94\u8be5\u4e3a <code>0xFFFF39FF</code>\uff0c\u5b83\u53ea\u4f1a\u70b9\u4eae\u7b2c\u4e09\u4e2a\u6570\u7801\u7ba1\u7684 <code>a, b, f, g</code>\uff0c\u5373\u4e00\u4e2a\u5c0f\u77e9\u5f62\u3002\u901a\u8fc7\u9006\u6620\u5c04\uff0c\u6211\u4eec\u5f97\u5230 <code>Disp_num</code> \u503c\u4e3a <code>0xFFFFBCFB</code>\u3002\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6253\u5370\u7b2c\u4e8c\u4f4d\u4e0a\u7684\u5c0f\u77e9\u5f62 <code>Seg_map: 0xFF39FFFF ---&gt; Disp_num: 0xFFFFDF3D</code>\u3002</p> <p>\u8fd9\u4e00\u6b65\u4e2d\uff0c\u4f60\u9700\u8981\u5f97\u5230\u5e0c\u671b\u6253\u5370\u4e09\u79cd trap \u7684\u56fe\u5f62\u7684 <code>Disp_num</code> \u503c\u3002\u4f60\u9700\u8981\u67e5\u770b\u9a8c\u6536\u4ee3\u7801\uff0c\u5b66\u4e60\u5982\u4f55\u5c06\u8fd9\u4e2a\u503c\u9001\u5165\u4e03\u6bb5\u6570\u7801\u7ba1\u6700\u7ec8\u663e\u793a\u4e00\u4e2a\u56fe\u5f62\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u5728\u6bcf\u4e2a\u5904\u7406\u7a0b\u5e8f\u7684\u672b\u5c3e\uff0c\u4f60\u9700\u8981\u4e00\u4e2a <code>mret</code> \u6307\u4ee4\u544a\u77e5 <code>RV_INT</code> \u6a21\u5757\u4e2d\u65ad\u5904\u7406\u5df2\u7ecf\u7ed3\u675f\uff0c\u9700\u8981\u6062\u590d\u6b63\u5e38\u7684\u6307\u4ee4\u6d41\u5e76\u5bf9\u5fc5\u8981\u7684 CSR \u8fdb\u884c\u4fee\u6539\u3002</p>"},{"location":"Lab4/exception_interruption/#_6","title":"\u5fc5\u8981\u7684\u68c0\u67e5","text":"<p>\u5728\u5b8c\u6210\u4ee5\u4e0a\u6240\u6709\u6b65\u9aa4\u540e\uff0c\u8bf7\u68c0\u67e5\uff1a</p> <ul> <li><code>RV_INT</code> \u6a21\u5757\u4e2d\u7684 <code>mtvec.BASE</code> \u662f\u5426\u6307\u5411\u4e86 trap \u5904\u7406\u7a0b\u5e8f\u7684\u9996\u4e2a\u6307\u4ee4\u3002</li> <li>\u6211\u4eec\u9700\u8981\u5b9e\u73b0 Vectored \u6a21\u5f0f\uff0c<code>RV_INT</code> \u6a21\u5757\u4e2d <code>mtvec.BASE + 4*cause</code> \u662f\u5426\u80fd\u8df3\u5230\u6b63\u786e\u7684\u5904\u7406\u7a0b\u5e8f\u3002</li> <li>\u8bf7\u786e\u4fdd\u4f60\u5728\u67d0\u4e2a\u6a21\u5f0f\u7684\u5904\u7406\u4e0b\u653e\u7f6e\u4e86 <code>ecall</code> \u6307\u4ee4\uff1b\u5728\u67d0\u4e2a\u6a21\u5f0f\u7684\u5904\u7406\u4e0b\u653e\u7f6e\u4e86\u4e00\u6761\u975e\u6cd5\u6307\u4ee4\u3002</li> <li>Venus \u5e73\u53f0\u65e0\u6cd5\u4e3a\u4f60\u89e3\u6790 <code>mret</code>\uff0c\u8bf7\u81ea\u884c\u4e66\u5199\uff0c\u5e76\u6ce8\u610f trap \u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u7684\u7ed3\u5c3e\u4e00\u5b9a\u8981\u6709 <code>mret</code>\u3002<ul> <li>\u4e3a\u4e86\u4e0d\u4fee\u6539 trap \u5904\u7406\u7a0b\u5e8f\u7684\u8df3\u8f6c\u6307\u4ee4\uff0c\u4f60\u53ef\u4ee5\u5728\u539f\u672c <code>mret</code> \u7684\u5730\u65b9\u5199\u4e00\u6761 NOP \u8bed\u53e5 <code>add x0, x0, x0</code> \u6765\u5360\u4e00\u6761\u6307\u4ee4\u7684\u4f4d\u7f6e\uff0c\u5728\u4e4b\u540e\u5c06\u5b83\u66ff\u6362\u4e3a <code>mret</code>\u3002</li> </ul> </li> <li>\u67e5\u770b\u539f\u9a8c\u6536\u4ee3\u7801\u7684 <code>148, 149</code> \u884c\uff0c\u786e\u4fdd\u8fd9\u91cc\u7684 <code>jalr</code> \u80fd\u591f\u8df3\u8f6c\u5230 <code>loop2</code>\u3002<ul> <li>\u8bf7\u4fee\u6539 <code>0x150, 0x24</code> \u5230\u5408\u9002\u7684\u503c\uff0c\u800c\u4e0d\u8981\u4fee\u6539\u5176\u4ed6\u90e8\u5206\u3002</li> </ul> </li> <li>\u67e5\u770b\u539f\u9a8c\u6536\u4ee3\u7801\u7684 <code>auipc</code> \u6307\u4ee4\uff0c\u53ef\u80fd\u9700\u8981\u6539\u52a8\u907f\u514d\u8fdb\u5165 dummy\u3002</li> </ul>"},{"location":"Lab4/exception_interruption/#lab4","title":"Lab4 \u601d\u8003\u9898","text":"<p>\u8fd9\u4e48\u91cd\u8981\u7684\u5b9e\u9a8c\u600e\u4e48\u80fd\u6ca1\u6709</p> <p>\u601d\u8003\u9898(\u5462\uff1f)</p> <ul> <li>\u5728\u6d89\u53ca\u5230\u4e00\u4e2a\u5927\u7acb\u5373\u6570\u7684\u8bfb\u5165\u65f6\uff0c\u6211\u4eec\u7ecf\u5e38\u80fd\u60f3\u5230\u4f7f\u7528 <code>lui &amp; addi</code> \u6765\u5b9e\u73b0\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u5c31\u5c06 <code>0x22223333</code> \u8d4b\u7ed9\u4e86 <code>t0</code>: <pre><code>lui t0, 0x22223\naddi t0, t0, 0x333\n</code></pre> \u4f60\u662f\u5426\u80fd\u901a\u8fc7\u4ee5\u4e0b\u4ee3\u7801\u5f97\u5230 <code>0xDEADBEEF</code>\uff1f\u5982\u679c\u4f60\u89c9\u5f97\u4e0d\u80fd\u7684\u8bdd\uff0c\u5148\u89e3\u91ca\u4e3a\u4ec0\u4e48\u4e0d\u80fd\uff0c\u518d\u4fee\u6539\u4ee3\u7801\u4e2d\u7684\u4e00\u4e2a\u5b57\u7b26\uff0c\u4f7f\u5f97\u4ee5\u4e0b\u4ee3\u7801\u6709\u6548\u5730\u5f97\u5230 <code>0xDEADBEEF</code>\u3002\uff08\u5982\u679c\u4f60\u89c9\u5f97\u53ef\u4ee5\u7684\u8bdd\uff0c\u8bf7\u91cd\u65b0\u5b66\u4e60 RISC-V ISA\uff09 <pre><code>lui t1, 0xDEADB\naddi t1, t1, 0xEEF\n</code></pre> btw, \u5982\u679c\u4f60\u628a\u4e0a\u8fb9\u4ee3\u7801\u653e\u5230 Venus \u4e0a\uff0c\u4f1a\u53d1\u73b0\u5b83\u7ed9\u4e86\u4f60\u4e00\u4e2a\u62a5\u9519\uff0c\u4e0d\u8981\u7406\u4f1a\u5b83\uff0c\u5b83\u7406\u89e3\u9519\u4e86\u3002</li> <li>\u4e4b\u524d\u6211\u4eec\u4e00\u76f4\u5728\u8bf4\uff0c\u5982\u679c trap \u7684\u8bf1\u56e0\u662f <code>Exception</code> \u5219\u9700\u8981 <code>mepc &lt;- PC+4</code>\uff0c\u5982\u679c\u662f <code>Interruption</code> \u5219\u9700\u8981 <code>mepc &lt;- PC</code>\u3002\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f\u6216\u8005\u8bf4\uff0c\u5982\u679c <code>Exception</code> \u65f6\u8fdb\u884c <code>mepc &lt;- PC</code>\uff0c<code>Interruption</code> \u65f6 <code>mepc &lt;- PC+4</code> \u4f1a\u6709\u4ec0\u4e48\u4e0d\u5e78\u7684\u540e\u679c\uff1f</li> </ul>"},{"location":"Lab4/instr_extension/","title":"Lab4-3","text":"<p>\u5728\u5f00\u59cb\u672c\u5b9e\u9a8c\u4e4b\u524d\uff0c\u8bf7\u5907\u4efdLab4-1\u4e0eLab4-2\u7684\u6240\u6709\u5de5\u7a0b\uff0c\u5305\u62ec\u4f60\u4f7f\u7528\u7684 IP Core\u3002</p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 git \u4fdd\u5b58\u4e4b\u524d\u7684\u6240\u6709\u8fdb\u5ea6\uff0c\u5e76\u5f00\u65b0\u7684\u5206\u652f\u6765\u5b8c\u6210 Lab4-3\u3002</p> <p>\u5728\u4e4b\u524d\u7684\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u5b8c\u6210\u4e86\u57fa\u672c\u7684\u6307\u4ee4\uff0c\u672c\u8282\u5b9e\u9a8c\u8981\u5728 Lab4-1 &amp; Lab4-2 \u7684\u57fa\u7840\u4e4b\u4e0a\u62d3\u5c55\u6307\u4ee4\u3002</p>"},{"location":"Lab4/instr_extension/#_1","title":"\u6a21\u5757\u5b9e\u73b0","text":"<p>\u5728\u672c\u8282\u5b9e\u9a8c\u4e2d\uff0c\u4f60\u9700\u8981\u5b9e\u73b0\u4ee5\u4e0b\u6307\u4ee4\uff1a</p> <ul> <li>R-Type: add, sub, and, or, xor, slt, srl, sll, sra, sltu</li> <li>I-Type: addi, andi, ori, xori, slti, srli, slli, srai, slti, sltiu, lb, lh, lw, lbu, lhu, jalr</li> <li>S-Type: sb, sh, sw</li> <li>B-Type: beq, bne, blt, bge, bltu, bgeu</li> <li>J-Type: jal</li> <li>U-Type: lui, auipc</li> </ul> <p>\u5373 RISC-V 32I \u4e2d\u9664\u4e86 <code>ecall, ebreak</code> \u5916\u7684\u6240\u6709\u6307\u4ee4\uff0c\u9ed1\u4f53\u6807\u51fa\u7684\u6307\u4ee4\u4e3a\u65b0\u6dfb\u52a0\u7684\u6307\u4ee4\u3002\u5728\u5f00\u59cb\u5b9e\u9a8c\u4e4b\u524d\uff0c\u8bf7\u4fdd\u8bc1\u4f60\u7406\u89e3\u4e86\u6240\u6709\u7684\u6307\u4ee4\u542b\u4e49\u4e0e\u7c7b\u578b\u3002</p> <p>\u4f60\u53ef\u4ee5\u5728 venus \u4e0a\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801\u6765\u7406\u89e3 <code>sb, sh</code> \u7684\u542b\u4e49\uff1a</p> shsb <pre><code>addi x11, x0, 0x421\nlui x10, 0x33333\naddi x10, x10, 0x333\nsw x10, 48(zero)\nsh x11, 49(zero)\nadd zero, zero, zero\n</code></pre> <pre><code>addi x11, x0, 0x22\naddi x10, x0, 0x20\nlui x9, 0x33333\naddi x9, x9, 0x333\nsw x9,48(zero)\nsb x11, 49(zero)\nsb x10, 50(zero)\nadd zero, zero, zero\n</code></pre> <p>\u9a8c\u6536\u65f6\uff0c\u4f60\u9700\u8981\u63d0\u4f9b\u81ea\u5df1\u7ed8\u5236\u7684 CPU \u539f\u7406\u56fe\uff0c\u7c7b\u4f3c\u4e0b\u56fe\uff08\u4e0b\u56fe\u4ec5\u4e3a\u793a\u610f\uff0c\u5e76\u975e\u672c\u8282\u5b9e\u9a8c\u7684\u539f\u7406\u56fe\uff09\u3002\u5efa\u8bae\u5728\u5f00\u59cb\u5199\u4ee3\u7801\u4e4b\u524d\u7ed8\u5236\u672c\u56fe\uff0c\u68b3\u7406\u6269\u5c55\u6307\u4ee4\u65f6\u6dfb\u52a0\u6216\u4fee\u6539\u7684\u90e8\u4ef6\uff0c\u660e\u6670\u6269\u5c55\u6307\u4ee4\u7684\u6570\u636e\u5982\u4f55\u6d41\u52a8\uff0c\u63a7\u5236\u4fe1\u53f7\u5e94\u5982\u4f55\u7ed9\u3002</p> <p></p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u7eb8\u7b14\u7ed8\u5236\uff08\u4e0d\u63a8\u8350\uff09\u4f46\u8bf7\u4fdd\u8bc1\u9a8c\u6536\u65f6\u63d0\u4f9b\u4e00\u5f20\u7ebf\u6761\u6e05\u6670\u8f83\u5c11\u6d82\u6539\u7684\u539f\u7406\u56fe\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 Microsoft \u7684 Visio \u6216 PowerPoint\u3001\u5728\u7ebf\u5e73\u53f0\u5982 ProcessOn\u3001 drawio \u6216\u5e73\u677f\u8f6f\u4ef6\u7ed8\u5236\u3002</p>"},{"location":"Lab4/instr_extension/#_2","title":"\u6ce2\u5f62\u4eff\u771f","text":"<p>\u8bf7\u4fee\u6539\u4e0a\u4e00\u8282\u63d0\u4f9b\u7684 testbench\uff0c\u4f7f\u4e4b\u80fd\u591f\u5bf9\u6307\u4ee4\u6269\u5c55\u540e\u7684 SCPU \u8fdb\u884c\u4eff\u771f\u9a8c\u8bc1\u3002\u4f60\u53ef\u80fd\u9700\u8981\u5c06\u4e4b\u524d\u7684 <code>wea</code> \u4fe1\u53f7\u4ece 1 \u4f4d\u6269\u5c55\u4e3a 4\u4f4d/3\u4f4d \u4ee5\u652f\u6301\u6269\u5c55\u6307\u4ee4\u4e2d\u7684 <code>unsigned, byte, half-word</code> \u7684\u8981\u6c42\u3002</p> <p>\u540c\u65f6\uff0c\u4f60\u9700\u8981\u81ea\u884c\u7f16\u5199\u4e00\u6bb5\u7b80\u5355\u7684\u4ee3\u7801\u5bf9\u6240\u6709\u6307\u4ee4\u8fdb\u884c\u6d4b\u8bd5\u3002</p>"},{"location":"Lab4/instr_extension/#_3","title":"\u4e0b\u677f\u9a8c\u8bc1","text":"\u9a8c\u6536\u4ee3\u7801 test_4_3.sIMem_4_3.coeDMem.coe <pre><code>auipc x26, 0x40\nauipc x27, 0x80\nsrli x27, x27, 3\nslli x27, x27, 3\nsrai x27, x27, 1\nbne x27, x26, dummy\nlui x26, 0x40000\nlui x27, 0x80000\nsrai x27, x27, 1\nbeq x27, x26, dummy\n\n# change your first digit in Studen ID to 3320'2233\naddi x24, zero, 0x22\nsb x24, 0x21(zero)\naddi x24, zero, 0x20\nsb x24, 0x22(zero)\n\n# change your second digit in Studen ID to 2204'2122\naddi x24, zero, 0x421\nsh x24, 0x25(zero)\n\nstart:\naddi x1, zero, -1 # x1=FFFFFFFF\nlb x24, 0x18(zero) # x24=FFFFFFFF\nbne x1, x24, dummy\nlbu x24, 0x18(zero)# x24=000000FF\nbge x1, x24, dummy\nlh x24, 0x60(zero) # x24=FFFFF7E0\nblt zero, x24, dummy\nlhu x24, 0x60(zero) # x24=0000F7E0\nblt x24, zero, dummy\nxori x3, x1, 1 # x3=FFFFFFFE\nadd x3, x3, x3 # x3=FFFFFFFC\nadd x3, x3, x3 # x3=FFFFFFF8\nadd x3, x3, x3 # x3=FFFFFFF0\nadd x3, x3, x3 # x3=FFFFFFE0\nadd x3, x3, x3 # x3=FFFFFFC0\nxor x20, x3, x1 # x20=0000003F\nadd x3, x3, x3 # x3=FFFFFF80\nadd x3, x3, x3 # x3=FFFFFF00\nadd x3, x3, x3 # x3=FFFFFE00\nadd x3, x3, x3 # x3=FFFFFC00\nadd x3, x3, x3 # x3=FFFFF800\nadd x3, x3, x3 # x3=FFFFF000\nadd x3, x3, x3 # x3=FFFFE000\nadd x3, x3, x3 # x3=FFFFC000\nadd x3, x3, x3 # x3=FFFF8000\nadd x3, x3, x3 # x3=FFFF0000\nadd x3, x3, x3 # x3=FFFE0000\nadd x3, x3, x3 # x3=FFFC0000\nadd x3, x3, x3 # x3=FFF80000\nadd x3, x3, x3 # x3=FFF00000\nadd x3, x3, x3 # x3=FFE00000\nadd x3, x3, x3 # x3=FFC00000\nadd x3, x3, x3 # x3=FF800000\nadd x3, x3, x3 # x3=FF000000\nadd x3, x3, x3 # x3=FE000000\nadd x3, x3, x3 # x3=FC000000\nadd x6, x3, x3 # x6=F8000000\nadd x3, x6, x6 # x3=F0000000\nadd x4, x3, x3 # x4=E0000000\nadd x13, x4, x4 # x13=C0000000\nlui x8, 0x80000 # x8=80000000\nori x26, zero, 1 # x26=00000001\nandi x26, x26, 0xff # x26=00000001\nsra x30, x8, x26\nsrl x27, x8, x26\n\nblt zero, zero, dummy\nblt x26, zero, dummy\nblt zero, x8, dummy\n\nbge zero, x26, dummy\nbge x8, zero, dummy\n\nbne x27, x30, loop\n\ndummy:\nadd zero, zero, zero # 4\nadd zero, zero, zero # 8\nadd zero, zero, zero # C\nadd zero, zero, zero # 10\nadd zero, zero, zero # 14\nadd zero, zero, zero # 18\nadd zero, zero, zero # 1C\njal zero, dummy\n\nloop:\nslt x2, x1, zero # x2=00000001 \u9488\u5bf9ALU32\u4f4d\u6709\u7b26\u53f7\u6570\u51cf\nsltu x25, x1, zero # x25=00000000\nsltiu x29, x1, 0 # x29=00000000\nslti x2, x1, 0 # x2=00000001 \u9488\u5bf9ALU32\u4f4d\u6709\u7b26\u53f7\u6570\u51cf\nadd x14, x2, x2\nadd x14, x14, x14 # x14=4\nsub x19, x14, x14 # x19=0\nsrli x19, x19, 1\naddi x10, x19, -1\nor x10, x10, zero\nadd x10, x10, x10 # x10=FFFFFFFE\n\nloop1:\nsw x6, 0x4(x3) # \u8ba1\u6570\u5668\u7aef\u53e3: F0000004, \u9001\u8ba1\u6570\u5e38\u6570x6=F8000000\nlw x5, 0x0(x3) # \u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001: {counter0_out,counter1_out,counter2_out,led_out[12:0], SW}\nslli x5, x5, 2 # \u5de6\u79fb2\u4f4d\u5c06SW\u4e0eLED\u5bf9\u9f50, \u540c\u65f6D1D0\u7f6e00, \u9009\u62e9\u8ba1\u6570\u5668\u901a\u90530\nsw x5, 0x0(x3) # x5\u8f93\u51fa\u5230GPIO\u7aef\u53e3F0000000, \u8bbe\u7f6e\u8ba1\u6570\u5668\u901a\u9053counter_set=00\u7aef\u53e3\nadd x9, x9, x2 # x9=x9+1\nsw x9, 0x0(x4) # x9\u9001x4=E0000000\u4e03\u6bb5\u7801\u7aef\u53e3\nlw x13, 0x14(zero) # \u53d6\u5b58\u50a8\u566820\u5355\u5143\u9884\u5b58\u6570\u636e\u81f3x13, \u7a0b\u5e8f\u8ba1\u6570\u5ef6\u65f6\u5e38\u6570\n\nloop2:\nlw x5, 0x0(x3) # \u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001: {out0, out1, out2, D28-D20, LED7\nadd x5, x5, x5\nadd x5, x5, x5 # \u5de6\u79fb2\u4f4d\u5c06SW\u4e0eLED\u5bf9\u9f50, \u540c\u65f6D1D0\u7f6e00, \u9009\u62e9\u8ba1\u6570\u5668\u901a\u90530\nsw x5, 0x0(x3) # x5\u8f93\u51fa\u5230GPIO\u7aef\u53e3F0000000, \u8ba1\u6570\u5668\u901a\u9053counter_set=00\u7aef\u53e3\u4e0d\u53d8\nlw x5, 0x0(x3) # \u518d\u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001\nand x11, x5, x8 # \u53d6\u6700\u9ad8\u4f4d=out0, \u5c4f\u853d\u5176\u4f59\u4f4d\u9001x11\nadd x13, x13, x2 # \u7a0b\u5e8f\u8ba1\u6570\u5ef6\u65f6\nbeq x13, zero, C_init # \u7a0b\u5e8f\u8ba1\u6570x13=0, \u8f6c\u8ba1\u6570\u5668\u521d\u59cb\u5316, \u4fee\u65397\u6bb5\u7801\u663e\u793a: C_init\n\nl_next: # \u5224\u65ad7\u6bb5\u7801\u663e\u793a\u6a21\u5f0f\uff1aSW[4: 3]\u63a7\u5236\nlw x5, 0x0(x3) # \u518d\u8bfbGPIO\u7aef\u53e3F0000000\u5f00\u5173SW\u72b6\u6001\nadd x18, x14, x14 # x14=4, x18=00000008\nadd x22, x18, x18 # x22=00000010\nadd x18, x18, x22 # x18=00000018(00011000)\nand x11, x5, x18 # \u53d6SW[4: 3]\nbeq x11, zero, L20 # SW[4: 3]=00, 7\u6bb5\u663e\u793a\"\u70b9\"\u5faa\u73af\u79fb\u4f4d\uff1aL20, SW0=0\nbeq x11, x18, L21 # SW[4: 3]=11, \u663e\u793a\u4e03\u6bb5\u56fe\u5f62, L21, SW0=0\nadd x18, x14, x14 # x18=8\nbeq x11, x18, L22 # SW[4: 3]=01, \u4e03\u6bb5\u663e\u793a\u9884\u7f6e\u6570\u5b57, L22, SW0=1\nsw x9, 0x0(x4) # SW[4: 3]=10, \u663e\u793ax9, SW0=1\nbltu zero, x4, loop2\n\nL20:\nbeq x10, x1, L4 # x10=ffffffff, \u8f6c\u79fbL4\\\\\nbgeu x4, zero, L3\n\nL4:\naddi x10, zero, -1 # x10=ffffffff\nadd x10, x10, x10 # x10=fffffffe\n\nL3:\nsw x10, 0x0(x4) # SW[4: 3]=00, 7\u6bb5\u663e\u793a\u70b9\u79fb\u4f4d\u540e\u663e\u793a\njal zero, loop2\n\nL21:\nlw x9, 0x60(x17) # SW[4: 3]=11, \u4ece\u5185\u5b58\u53d6\u9884\u5b58\u4e03\u6bb5\u56fe\u5f62\nsw x9, 0x0(x4) # SW[4: 3]=11, \u663e\u793a\u4e03\u6bb5\u56fe\u5f62\naddi x31, zero, 0x150\njalr zero, x31, 0x24 #jump to pc 0x174\n\nL22:\nlw x9, 0x20(x17) # SW[4: 3]=01, \u4ece\u5185\u5b58\u53d6\u9884\u5b58\u6570\u5b57\nsw x9, 0x0(x4) # SW[4: 3]=01, \u4e03\u6bb5\u663e\u793a\u9884\u7f6e\u6570\u5b57\nblt x4, zero, loop2\n\nC_init:\nlw x13, 0x14(zero) # \u53d6\u7a0b\u5e8f\u8ba1\u6570\u5ef6\u65f6\u521d\u59cb\u5316\u5e38\u6570\nadd x10, x10, x10 # x10=fffffffc, 7\u6bb5\u56fe\u5f62\u70b9\u5de6\u79fb121 or x10, x10, x2 # x10\u672b\u4f4d\u7f6e1, \u5bf9\u5e94\u53f3\u4e0a\u89d2\u4e0d\u663e\u793a\nadd x17, x17, x14 # x17=00000004, LED\u56fe\u5f62\u8bbf\u5b58\u5730\u5740+4\nand x17, x17, x20 # x17=000000XX, \u5c4f\u853d\u5730\u5740\u9ad8\u4f4d, \u53ea\u53d66\u4f4d\nadd x9, x9, x2 # x9+1\nbeq x9, x1, L6 # \u82e5x9=ffffffff, \u91cd\u7f6ex9=5\nbge zero, zero, L7\n\nL6:\nadd x9, zero, x14 # x9=4\nadd x9, x9, x2 # \u91cd\u7f6ex9=5\n\nL7:\nlw x5, 0x0(x3) # \u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001\nadd x11, x5, x5\nslli x11, x11, 1 # \u5de6\u79fb2\u4f4d\u5c06SW\u4e0eLED\u5bf9\u9f50, \u540c\u65f6D1D0\u7f6e00, \u9009\u62e9\u8ba1\u6570\u5668\u901a\u90530\nsw x11, 0x0(x3) # x5\u8f93\u51fa\u5230GPIO\u7aef\u53e3F0000000, \u8ba1\u6570\u5668\u901a\u9053counter_set=00\u7aef\u53e3\u4e0d\u53d8\nsw x6, 0x4(x3) # \u8ba1\u6570\u5668\u7aef\u53e3: F0000004, \u9001\u8ba1\u6570\u5e38\u6570x6=F8000000\nbge zero, x4, l_next\n</code></pre> <pre><code>memory_initialization_radix=16;\nmemory_initialization_vector=\n00040D17, 00080D97, 003DDD93, 003D9D93, 401DDD93, 0FAD9C63, \n40000D37, 80000DB7, 401DDD93, 0FAD8463, 02200C13, 038000A3, \n02000C13, 03800123, 42100C13, 038012A3, FFF00093, 01800C03, \n0D809263, 01804C03, 0B80DE63, 06001C03, 0B804A63, 06005C03, \n0A0C4663, 0010C193, 003181B3, 003181B3, 003181B3, 003181B3, \n003181B3, 0011CA33, 003181B3, 003181B3, 003181B3, 003181B3, \n003181B3, 003181B3, 003181B3, 003181B3, 003181B3, 003181B3, \n003181B3, 003181B3, 003181B3, 003181B3, 003181B3, 003181B3, \n003181B3, 003181B3, 003181B3, 003181B3, 00318333, 006301B3, \n00318233, 004206B3, 80000437, 00106D13, 0FFD7D13, 41A45F33, \n01A45DB3, 00004C63, 000D4A63, 00804863, 01A05663, 00045463, \n03ED9263, 00000033, 00000033, 00000033, 00000033, 00000033, \n00000033, 00000033, FE5FF06F, 0000A133, 0000BCB3, 0000BE93, \n0000A113, 00210733, 00E70733, 40E709B3, 0019D993, FFF98513, \n00056533, 00A50533, 0061A223, 0001A283, 00229293, 0051A023, \n002484B3, 00922023, 01402683, 0001A283, 005282B3, 005282B3, \n0051A023, 0001A283, 0082F5B3, 002686B3, 06068263, 0001A283, \n00E70933, 01290B33, 01690933, 0122F5B3, 00058C63, 03258663, \n00E70933, 03258A63, 00922023, FA406CE3, 00150463, 00027663, \nFFF00513, 00A50533, 00A22023, FA1FF06F, 0608A483, 00922023, \n15000F93, 024F8067, 0208A483, 00922023, F80242E3, 01402683, \n00A50533, 00E888B3, 0148F8B3, 002484B3, 00148463, 00005663, \n00E004B3, 002484B3, 0001A283, 005285B3, 00159593, 00B1A023, \n0061A223, F64054E3;\n</code></pre> <pre><code>memory_initialization_radix=16;\nmemory_initialization_vector=\nf0000000, 000002AB, 80000000, 0000003F, 00000001, FFF70000, 0000FFFF, 80000000, 00000000, 11111111, \n22222222, 33333333, 44444444, 55555555, 66666666, 77777777, 88888888, 99999999, aaaaaaaa, bbbbbbbb, \ncccccccc, dddddddd, eeeeeeee, ffffffff, 557EF7E0, D7BDFBD9, D7DBFDB9, DFCFFCFB, DFCFBFFF, F7F3DFFF,\nFFFFDF3D, FFFF9DB9, FFFFBCFB, DFCFFCFB, DFCFBFFF, D7DB9FFF, D7DBFDB9, D7BDFBD9, FFFF07E0, 007E0FFF,\n03bdf020, 03def820, 08002300;\n</code></pre> <p>\u4f7f\u7528\u9a8c\u6536\u4ee3\u7801\u7684\u9884\u671f\u8868\u73b0\u4e0e\u4e0a\u4e00\u8282\u57fa\u672c\u76f8\u540c\uff0c\u552f\u4e00\u53d8\u5316\u662f\u663e\u793a\u5b66\u53f7\u65f6\uff0c\u524d\u4e24\u4f4d(32)\u7684\u663e\u793a\u5c06\u88ab\u6539\u53d8\u3002</p>"},{"location":"Lab5/Lab5/","title":"Lab5","text":"<p>\u672c\u6b21\u5b9e\u9a8c\u4f60\u9700\u8981\u5728 Lab4-3\uff08\u5373\u5b9e\u73b0\u4e86 RISC-V 32I \u6307\u4ee4\u96c6\u7684\u6240\u6709\u6307\u4ee4\uff0c\u4f46\u4e0d\u9700\u8981\u652f\u6301\u4e2d\u65ad\uff09 \u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u4e94\u7ea7\u6d41\u6c34\u7ebf CPU\u3002\u5b9e\u9a8c\u5206\u4e3a\u4e24\u5927\u90e8\u5206\uff1a</p> <ul> <li>Lab5-1\uff1a\u5b9e\u73b0\u4e0d\u5904\u7406\u51b2\u7a81 (Hazard) \u7684\u4e94\u7ea7\u6d41\u6c34\u7ebf CPU\u3002</li> <li>Lab5-2\uff1a\u5b9e\u73b0\u89e3\u51b3\u51b2\u7a81\u7684\u4e94\u7ea7\u6d41\u6c34\u7ebf CPU\u3002</li> </ul> <p>\u5982\u679c\u4f60\u5bf9\u81ea\u5df1\u7684\u80fd\u529b\u6709\u4fe1\u5fc3\uff0c\u53ef\u4ee5\u9009\u62e9\u8df3\u8fc7 Lab5-1\uff0c\u76f4\u63a5\u5b8c\u6210 Lab5-2\uff0c\u901a\u8fc7 Lab5-2 \u540e\u65e0\u9700\u518d\u5b8c\u6210 Lab5-1\u3002\u5982\u679c\u4f60\u9009\u62e9\u76f4\u63a5\u5b8c\u6210 Lab5-2\uff0c\u5efa\u8bae\u5148\u901a\u8bfb Lab5-1\u3001Lab5-2 \u7684\u6587\u6863\u3002</p>"},{"location":"Lab5/pipeline_basic/","title":"\u57fa\u7840\u6d41\u6c34\u7ebf","text":""},{"location":"Lab5/pipeline_basic/#_2","title":"\u6a21\u5757\u5b9e\u73b0","text":"<p>\u672c\u5b9e\u9a8c\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u4e94\u9636\u6bb5\u6d41\u6c34\u7ebf CPU\uff0c\u6d41\u6c34\u7ebf\u7684\u4e94\u4e2a\u9636\u6bb5\u5206\u522b\u662f\uff1a\u53d6\u6307\uff08IF\uff09\u3001\u8bd1\u7801\uff08ID\uff09\u3001\u6267\u884c\uff08EX\uff09\u3001\u8bbf\u5b58\uff08MEM\uff09\u3001\u5199\u56de\uff08WB\uff09\uff0c\u4e0d\u9700\u8981\u5904\u7406\u51b2\u7a81\u3002\uff08\u5047\u8bbe\u672c\u5b9e\u9a8c\u7684\u4eff\u771f\u548c\u9a8c\u6536\u4ee3\u7801\u5747\u4e0d\u5b58\u5728\u6570\u636e\u51b2\u7a81\u548c\u63a7\u5236\u51b2\u7a81\u7684\u60c5\u51b5\uff09</p> <ul> <li>\u4f60\u9700\u8981\u57fa\u4e8e Lab4-3 \u7684\u4ee3\u7801\u8fdb\u884c\u4fee\u6539\u3002</li> <li> <p>\u548c Lab4-3 \u7c7b\u4f3c\u5730\uff0c\u9a8c\u6536\u65f6\uff0c\u4f60\u9700\u8981\u63d0\u4f9b\u81ea\u5df1\u7ed8\u5236\u7684 CPU datapath \u56fe\u3002\uff08\u7b14\u8005\u5efa\u8bae\u5728\u5f00\u59cb\u672c\u6b21\u5b9e\u9a8c\u4e4b\u524d\u5c31\u5f00\u59cb\u7ed8\u5236\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u7406\u89e3\u6d41\u6c34\u7ebf CPU \u7684\u6570\u636e\u6d41\uff09\u4f60\u53ef\u4ee5\u53c2\u8003\u7406\u8bba\u8bfe PPT \u7684 datapath \u6216\u8005\u5176\u4ed6\u4eba\u7684\u56fe\uff0c\u4f46\u6bcf\u4e2a\u4eba\u7684\u5b9e\u73b0\u4e0d\u5c3d\u76f8\u540c\uff0c\u8bf7\u52a1\u5fc5\u52a8\u624b\u7ed8\u5236\u5c5e\u4e8e\u81ea\u5df1\u7684 datapath\u3002\u8fd9\u91cc\u4ee5\u7406\u8bba\u8bfe PPT \u7684 datapath \u4e3a\u4f8b\uff1a</p> <p></p> </li> <li> <p>\u6d41\u6c34\u7ebf\u7684\u9a8c\u8bc1\u8f83\u4e3a\u7e41\u7410\uff0c\u826f\u597d\u7684\u4eff\u771f\u6d4b\u8bd5\u53ef\u4ee5\u4e8b\u534a\u529f\u500d\u3002\u8bf7\u505a\u597d\u4eff\u771f\u9a8c\u8bc1\uff0c\u8ba9\u4eff\u771f\u4ee3\u7801\u5c3d\u91cf\u8986\u76d6\u6240\u6709\u60c5\u51b5\u3002</p> </li> </ul> <p>Tip</p> <ul> <li>\u4f60\u53ef\u80fd\u9700\u8981\u6539\u53d8\u67d0\u4e9b\u6307\u4ee4\u7684\u6570\u503c\uff0c\u8fd9\u4e9b\u6307\u4ee4\u4e0e PC \u503c\u6709\u5173\uff08\u5982 <code>AUIPC</code> \u548c <code>JALR</code> \u7b49\uff09\u3002</li> <li>\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u662f\u672c\u6b21\u5b9e\u9a8c\u7684\u4e00\u5927\u91cd\u70b9\uff0c\u5728\u8fdb\u884c\u5b9e\u9a8c\u4e4b\u524d\uff0c\u601d\u8003\u5e76\u68b3\u7406\u6709\u54ea\u4e9b\u503c\u662f\u9700\u8981\u4f20\u5230\u4e0b\u4e00\u4e2a\u9636\u6bb5\u7684\u3002\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u90e8\u5206\u4ee3\u7801\u8f83\u591a\uff0c\u4e14\u5927\u90e8\u5206\u5747\u4e3a\u7c7b\u4f3c\u4ee3\u7801\u3002\u4e3a\u4e86\u4e66\u5199\u65b9\u4fbf\uff0c\u51cf\u5c11\u51fa\u9519\uff0c\u7b14\u8005\u5efa\u8bae\u7edf\u4e00\u6a21\u5757\u3001\u5bc4\u5b58\u5668\u3001\u53d8\u91cf\u7684\u547d\u540d\u65b9\u5f0f\uff0c\u540c\u65f6\u53ef\u4ee5\u5229\u7528\u6587\u672c\u6279\u91cf\u66ff\u6362\u3001Copilot \u7b49\u5de5\u5177\u6765\u52a0\u901f\u7f16\u5199\u3002</li> </ul>"},{"location":"Lab5/pipeline_basic/#_3","title":"\u4eff\u771f\u9a8c\u8bc1","text":"<p>TODO</p>"},{"location":"Lab5/pipeline_basic/#_4","title":"\u4e0b\u677f\u9a8c\u8bc1","text":"<p>\u9a8c\u6536\u65f6\uff0c\u4f60\u9700\u8981\u4f7f\u7528\u4ee5\u4e0b\u9a8c\u6536\u4ee3\u7801\u3002IMem.coe\u3001DMem.coe \u7684\u5185\u5bb9\u548c\u683c\u5f0f\u4e0e Lab4-3 \u76f8\u540c\u3002\u4f7f\u7528\u9a8c\u6536\u4ee3\u7801\u7684\u9884\u671f\u8868\u73b0\u4e0e Lab4-3 \u7684\u7ed3\u679c\u57fa\u672c\u76f8\u540c\u3002\u533a\u522b\u5728\u4e8e\u5728\u672c\u6b21\u5b9e\u9a8c\u4e2d\uff0c\u56e0\u4e3a\u6211\u4eec\u5728\u6bcf\u4e24\u6761\u6307\u4ee4\u4e4b\u95f4\u63d2\u5165\u4e86 3 \u6761 <code>add zero, zero, zero</code> \u6307\u4ee4\uff0c\u56e0\u6b64\u89c2\u5bdf\u5230\u7684\u73b0\u8c61\u4e0e\u4e4b\u524d\u76f8\u6bd4\u4f1a\u6162\u82e5\u5e72\u500d\u3002</p> \u9a8c\u6536\u4ee3\u7801 <pre><code>auipc x26, 0x40\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nauipc x27, 0x80\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsrli x27, x27, 5\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nslli x27, x27, 5\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsrai x27, x27, 1\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbne x27, x26, dummy\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nlui x26, 0x40000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nlui x27, 0x80000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsrai x27, x27, 1\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbeq x27, x26, dummy\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\n# change your first digit in Studen ID to 3320'2233\naddi x24, zero, 0x22\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsb x24, 0x21(zero)\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\naddi x24, zero, 0x20\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsb x24, 0x22(zero)\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\n# change your second digit in Studen ID to 2204'2122\naddi x24, zero, 0x421\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsh x24, 0x25(zero)\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nstart:\naddi x1, zero, -1 # x1=FFFFFFFF\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nlb x24, 0x18(zero) # x24=FFFFFFFF\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbne x1, x24, dummy\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nlbu x24, 0x18(zero)# x24=000000FF\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbge x1, x24, dummy\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nlh x24, 0x60(zero) # x24=FFFFF7E0\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nblt zero, x24, dummy\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nlhu x24, 0x60(zero) # x24=0000F7E0\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nblt x24, zero, dummy\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nxori x3, x1, 1 # x3=FFFFFFFE\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFFFFFC\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFFFFF8\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFFFFF0\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFFFFE0\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFFFFC0\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nxor x20, x3, x1 # x20=0000003F\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFFFF80\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFFFF00\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFFFE00\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFFFC00\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFFF800\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFFF000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFFE000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFFC000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFF8000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFF0000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFE0000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFFC0000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFF80000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFF00000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFE00000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FFC00000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FF800000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FF000000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FE000000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x3, x3 # x3=FC000000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x6, x3, x3 # x6=F8000000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x3, x6, x6 # x3=F0000000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x4, x3, x3 # x4=E0000000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x13, x4, x4 # x13=C0000000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nlui x8, 0x80000 # x8=80000000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nori x26, zero, 1 # x26=00000001\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nandi x26, x26, 0xff # x26=00000001\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsra x30, x8, x26\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsrl x27, x8, x26\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nblt zero, zero, dummy\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nblt x26, zero, dummy\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nblt zero, x8, dummy\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nbge zero, x26, dummy\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbge x8, zero, dummy\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nbne x27, x30, loop\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\ndummy:\nadd zero, zero, zero # 4\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero # 8\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero # C\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero # 10\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero # 14\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero # 18\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero # 1C\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\njal zero, dummy\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nloop:\nslt x2, x1, zero # x2=00000001 \u9488\u5bf9ALU32\u4f4d\u6709\u7b26\u53f7\u6570\u51cf\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsltu x25, x1, zero # x25=00000000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsltiu x29, x1, 0 # x29=00000000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nslti x2, x1, 0 # x2=00000001 \u9488\u5bf9ALU32\u4f4d\u6709\u7b26\u53f7\u6570\u51cf\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x14, x2, x2\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x14, x14, x14 # x14=4\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsub x19, x14, x14 # x19=0\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsrli x19, x19, 1\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\naddi x10, x19, -1\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nor x10, x10, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x10, x10, x10 # x10=FFFFFFFE\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nloop1:\nsw x6, 0x4(x3) # \u8ba1\u6570\u5668\u7aef\u53e3: F0000004, \u9001\u8ba1\u6570\u5e38\u6570x6=F8000000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nlw x5, 0x0(x3) # \u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001: {counter0_out,counter1_out,counter2_out,led_out[12:0], SW}\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsll x5, x5, x23 # \u5de6\u79fb2\u4f4d\u5c06SW\u4e0eLED\u5bf9\u9f50, \u540c\u65f6D1D0\u7f6e00, \u9009\u62e9\u8ba1\u6570\u5668\u901a\u90530\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsw x5, 0x0(x3) # x5\u8f93\u51fa\u5230GPIO\u7aef\u53e3F0000000, \u8bbe\u7f6e\u8ba1\u6570\u5668\u901a\u9053counter_set=00\u7aef\u53e3\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x9, x9, x2 # x9=x9+1\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsw x9, 0x0(x4) # x9\u9001x4=E0000000\u4e03\u6bb5\u7801\u7aef\u53e3\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nlw x13, 0x14(zero) # \u53d6\u5b58\u50a8\u566820\u5355\u5143\u9884\u5b58\u6570\u636e\u81f3x13, \u7a0b\u5e8f\u8ba1\u6570\u5ef6\u65f6\u5e38\u6570\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nloop2:\nlw x5, 0x0(x3) # \u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001: {out0, out1, out2, D28-D20, LED7\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x5, x5, x5\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x5, x5, x5 # \u5de6\u79fb2\u4f4d\u5c06SW\u4e0eLED\u5bf9\u9f50, \u540c\u65f6D1D0\u7f6e00, \u9009\u62e9\u8ba1\u6570\u5668\u901a\u90530\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsw x5, 0x0(x3) # x5\u8f93\u51fa\u5230GPIO\u7aef\u53e3F0000000, \u8ba1\u6570\u5668\u901a\u9053counter_set=00\u7aef\u53e3\u4e0d\u53d8\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nlw x5, 0x0(x3) # \u518d\u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nand x11, x5, x8 # \u53d6\u6700\u9ad8\u4f4d=out0, \u5c4f\u853d\u5176\u4f59\u4f4d\u9001x11\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x13, x13, x2 # \u7a0b\u5e8f\u8ba1\u6570\u5ef6\u65f6\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbeq x13, zero, C_init # \u7a0b\u5e8f\u8ba1\u6570x13=0, \u8f6c\u8ba1\u6570\u5668\u521d\u59cb\u5316, \u4fee\u65397\u6bb5\u7801\u663e\u793a: C_init\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nl_next: # \u5224\u65ad7\u6bb5\u7801\u663e\u793a\u6a21\u5f0f\uff1aSW[4: 3]\u63a7\u5236\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nlw x5, 0x0(x3) # \u518d\u8bfbGPIO\u7aef\u53e3F0000000\u5f00\u5173SW\u72b6\u6001\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x18, x14, x14 # x14=4, x18=00000008\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x22, x18, x18 # x22=00000010\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x18, x18, x22 # x18=00000018(00011000)\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nand x11, x5, x18 # \u53d6SW[4: 3]\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbeq x11, zero, L20 # SW[4: 3]=00, 7\u6bb5\u663e\u793a\"\u70b9\"\u5faa\u73af\u79fb\u4f4d\uff1aL20, SW0=0\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbeq x11, x18, L21 # SW[4: 3]=11, \u663e\u793a\u4e03\u6bb5\u56fe\u5f62, L21, SW0=0\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x18, x14, x14 # x18=8\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbeq x11, x18, L22 # SW[4: 3]=01, \u4e03\u6bb5\u663e\u793a\u9884\u7f6e\u6570\u5b57, L22, SW0=1\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsw x9, 0x0(x4) # SW[4: 3]=10, \u663e\u793ax9, SW0=1\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbltu zero, x4, loop2\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nL20:\nbeq x10, x1, L4 # x10=ffffffff, \u8f6c\u79fbL4\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbgeu x4, zero, L3\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nL4:\naddi x10, zero, -1 # x10=ffffffff\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x10, x10, x10 # x10=fffffffe\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nL3:\nsw x10, 0x0(x4) # SW[4: 3]=00, 7\u6bb5\u663e\u793a\u70b9\u79fb\u4f4d\u540e\u663e\u793a\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\njal zero, loop2\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nL21:\nlw x9, 0x60(x17) # SW[4: 3]=11, \u4ece\u5185\u5b58\u53d6\u9884\u5b58\u4e03\u6bb5\u56fe\u5f62\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsw x9, 0x0(x4) # SW[4: 3]=11, \u663e\u793a\u4e03\u6bb5\u56fe\u5f62\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\naddi x31, zero, 0x500\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\njalr zero, x31, 0xd0 #jump to pc 0x5d0\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nL22:\nlw x9, 0x20(x17) # SW[4: 3]=01, \u4ece\u5185\u5b58\u53d6\u9884\u5b58\u6570\u5b57\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsw x9, 0x0(x4) # SW[4: 3]=01, \u4e03\u6bb5\u663e\u793a\u9884\u7f6e\u6570\u5b57\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nblt x4, zero, loop2\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nC_init:\nlw x13, 0x14(zero) # \u53d6\u7a0b\u5e8f\u8ba1\u6570\u5ef6\u65f6\u521d\u59cb\u5316\u5e38\u6570\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x10, x10, x10 # x10=fffffffc, 7\u6bb5\u56fe\u5f62\u70b9\u5de6\u79fb121 or x10, x10, x2 # x10\u672b\u4f4d\u7f6e1, \u5bf9\u5e94\u53f3\u4e0a\u89d2\u4e0d\u663e\u793a\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x17, x17, x14 # x17=00000004, LED\u56fe\u5f62\u8bbf\u5b58\u5730\u5740+4\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nand x17, x17, x20 # x17=000000XX, \u5c4f\u853d\u5730\u5740\u9ad8\u4f4d, \u53ea\u53d66\u4f4d\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x9, x9, x2 # x9+1\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbeq x9, x1, L6 # \u82e5x9=ffffffff, \u91cd\u7f6ex9=5\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbge zero, zero, L7\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nL6:\nadd x9, zero, x14 # x9=4\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x9, x9, x2 # \u91cd\u7f6ex9=5\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n\nL7:\nlw x5, 0x0(x3) # \u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nadd x11, x5, x5\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nslli x11, x11, 1 # \u5de6\u79fb2\u4f4d\u5c06SW\u4e0eLED\u5bf9\u9f50, \u540c\u65f6D1D0\u7f6e00, \u9009\u62e9\u8ba1\u6570\u5668\u901a\u90530\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsw x11, 0x0(x3) # x5\u8f93\u51fa\u5230GPIO\u7aef\u53e3F0000000, \u8ba1\u6570\u5668\u901a\u9053counter_set=00\u7aef\u53e3\u4e0d\u53d8\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nsw x6, 0x4(x3) # \u8ba1\u6570\u5668\u7aef\u53e3: F0000004, \u9001\u8ba1\u6570\u5e38\u6570x6=F8000000\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\nbge zero, x4, l_next\nadd zero, zero, zero\nadd zero, zero, zero\nadd zero, zero, zero\n</code></pre>"},{"location":"Lab5/pipeline_basic/#_5","title":"\u5b9e\u9a8c\u8981\u6c42","text":"<p>\u672c\u6b21\u5b9e\u9a8c\u4f60\u9700\u8981\u5b8c\u6210\u7684\u5185\u5bb9\u6709\uff1a</p> <ul> <li>\u7ed8\u5236\u81ea\u5df1\u7684 CPU datapath \u56fe\u3002</li> <li>\u6839\u636e\u81ea\u5df1\u7684 datapath \u5b8c\u6210\u4e0d\u5904\u7406\u51b2\u7a81\u7684\u4e94\u9636\u6bb5\u6d41\u6c34\u7ebf CPU\u3002</li> <li>\u5bf9\u5b9e\u73b0\u7684 CPU \u8fdb\u884c\u4eff\u771f\u9a8c\u8bc1\u3001\u4e0b\u677f\u9a8c\u8bc1\u3001\u9a8c\u6536\u3002</li> <li>\u5b9e\u9a8c\u62a5\u544a\u91cc\u9700\u8981\u5305\u542b\u7684\u5185\u5bb9\uff1a<ul> <li>datapath \u56fe\u3002</li> <li>\u6d41\u6c34\u7ebf CPU \u4ee3\u7801\uff08\u91cd\u70b9\u90e8\u5206\u7ed3\u5408 datapath \u548c Verilog \u4ee3\u7801\u89e3\u91ca\uff09</li> <li>\u4eff\u771f\u4ee3\u7801\u4e0e\u6ce2\u5f62\u622a\u56fe\uff08\u6ce8\u610f\u7f29\u653e\u6bd4\u4f8b\u3001\u6570\u5236\u9009\u62e9\u5408\u9002\uff09\uff0c\u5e76\u5206\u6790\u4eff\u771f\u6ce2\u5f62\u3002</li> <li>\u4e0b\u677f\u56fe\u7247\u4e0e\u73b0\u8c61\u63cf\u8ff0\u3002</li> </ul> </li> </ul>"},{"location":"Lab5/pipeline_hazard/","title":"\u89e3\u51b3\u51b2\u7a81","text":""},{"location":"Lab5/pipeline_hazard/#_2","title":"\u6a21\u5757\u5b9e\u73b0","text":"<p>\u672c\u5b9e\u9a8c\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u53ef\u4ee5\u5904\u7406\u51b2\u7a81\u7684\u4e94\u9636\u6bb5\u6d41\u6c34\u7ebf CPU\u3002\u5728 Lab5-1 \u7684\u57fa\u7840\u4e0a\uff0c\u5904\u7406\u6570\u636e\u5192\u9669\u548c\u7ed3\u6784\u5192\u9669\u3002</p> <ul> <li>\u4f60\u9700\u8981\u57fa\u4e8e Lab4-3 \u6216\u8005 Lab5-1 \u7684\u4ee3\u7801\u8fdb\u884c\u4fee\u6539\u3002</li> <li>\u5bf9\u4e8e\u6570\u636e\u5192\u9669\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 stall \u6216\u8005 forwarding\uff08\u524d\u9012\uff09\u7684\u65b9\u5f0f\u89e3\u51b3\u51b2\u7a81\u3002</li> <li>\u5bf9\u4e8e\u7ed3\u6784\u5192\u9669\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 stall \u6216\u8005 branch prediction\uff08\u5206\u652f\u9884\u6d4b\uff09\u7684\u65b9\u5f0f\u89e3\u51b3\u51b2\u7a81\u3002<ul> <li>\u5e38\u89c1\u7684 branch prediction \u7b97\u6cd5\u6709\uff1apredict-taken\uff08\u9884\u6d4b\u5206\u652f\u603b\u662f\u53d1\u751f\uff09\u3001predict-not-taken\uff08\u9884\u6d4b\u5206\u652f\u603b\u662f\u4e0d\u53d1\u751f\uff09\u30012-bit predict\uff08\u4e24\u4f4d\u9884\u6d4b\u5668\uff09\u7b49\u3002</li> </ul> </li> <li>\u5982\u679c\u4f60\u4f7f\u7528\u4e86 forwarding \u89e3\u51b3\u6570\u636e\u5192\u9669\u6216\u8005\u4f7f\u7528\u4e86 branch prediction \u89e3\u51b3\u7ed3\u6784\u5192\u9669\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u4e88\u4f60\u4e00\u5b9a\u7684 bonus \u4f5c\u4e3a\u5956\u52b1\uff08\u5206\u6570\u4ec5\u8bb0\u5165\u672c\u6b21\u5b9e\u9a8c\uff0c\u65e0\u6cd5\u6ea2\u51fa\u5230\u5e73\u65f6\u5206\uff09\uff0c\u4f60\u9700\u8981\u5728\u4f60\u7684\u62a5\u544a\u4e2d\u8bf4\u660e\u4f60\u7684\u5b9e\u73b0\u3002\u5982\u679c\u4f60\u5bf9 forwarding\u3001branch prediction \u7684\u5b9e\u73b0\u6709\u7591\u60d1\uff0c\u8bf7\u56de\u987e\u7406\u8bba\u8bfe\u6240\u8bb2\u5185\u5bb9\u3002</li> <li>\u65e0\u8bba\u4f60\u662f\u5148\u5b8c\u6210 Lab5-1 \u518d\u5b8c\u6210 Lab5-2\uff0c\u8fd8\u662f\u76f4\u63a5\u8fdb\u884c Lab5-2\u3002\u9a8c\u6536\u65f6\uff0c\u4f60\u90fd\u9700\u8981\u63d0\u4f9b\u81ea\u5df1\u7ed8\u5236\u7684 CPU datapath \u56fe\u3002\u539f\u7406\u56fe\u4e0d\u5fc5\u5305\u62ec\u5192\u9669\u7684\u5904\u7406\u3002</li> <li>\u6d41\u6c34\u7ebf\u7684\u9a8c\u8bc1\u8f83\u4e3a\u7e41\u7410\uff0c\u826f\u597d\u7684\u4eff\u771f\u6d4b\u8bd5\u53ef\u4ee5\u4e8b\u534a\u529f\u500d\u3002\u8bf7\u505a\u597d\u4eff\u771f\u9a8c\u8bc1\uff0c\u8ba9\u4eff\u771f\u4ee3\u7801\u5c3d\u91cf\u8986\u76d6\u6240\u6709\u60c5\u51b5\u3002</li> </ul> <p>Tip</p> <ul> <li>\u5728 Lab5-1 \u7684\u9a8c\u6536\u4ee3\u7801\u91cc\uff0c\u6211\u4eec\u5728\u6bcf\u4e24\u6761\u6307\u4ee4\u4e4b\u95f4\u653e\u5165 3 \u6761 <code>add zero, zero, zero</code> \u6307\u4ee4\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u907f\u514d\u51b2\u7a81\u3002\u56de\u987e\u7406\u8bba\u8bfe\u6240\u8bb2\u7684 Double Bump \u539f\u7406\uff0c\u5b9e\u9645\u4e0a\u6211\u4eec\u53ea\u9700\u8981 2 \u4e2a nop \u5373\u53ef\u505a\u5230\u8fd9\u4e00\u70b9\u3002\u7ed3\u5408\u81ea\u5df1\u7684\u5b9e\u73b0\u601d\u8003\u76f8\u5173\u65f6\u5e8f\u662f\u5426\u80fd\u505a\u5230 Double Bump\uff08\u6ce8\u610f\u5230\u6211\u4eec\u6d41\u6c34\u7ebf\u5bc4\u5b58\u5668\u4e5f\u662f\u5728\u65f6\u949f\u8fb9\u6cbf\u8d4b\u503c\uff09\u3002</li> <li>\u5bf9\u4e8e\u6570\u636e\u5192\u9669\uff0c\u8bf7\u601d\u8003\u662f\u5426\u8003\u8651\u5b8c\u6574\u4e86\u6240\u6709\u60c5\u51b5\u3002</li> <li>\u6ce8\u610f\u5230 forwarding \u65e0\u6cd5\u89e3\u51b3\u6240\u6709\u7684\u6570\u636e\u5192\u9669\uff0c\u5982 load-use hazard\u3002</li> </ul>"},{"location":"Lab5/pipeline_hazard/#_3","title":"\u4eff\u771f\u9a8c\u8bc1","text":"<p>TODO</p>"},{"location":"Lab5/pipeline_hazard/#_4","title":"\u4e0b\u677f\u9a8c\u8bc1","text":"<p>\u9a8c\u6536\u65f6\uff0c\u4f60\u9700\u8981\u4f7f\u7528\u4ee5\u4e0b\u9a8c\u6536\u4ee3\u7801\u3002IMem.coe\u3001DMem.coe \u7684\u5185\u5bb9\u548c\u683c\u5f0f\u4e0e Lab4-3 \u76f8\u540c\u3002\u9a8c\u6536\u4ee3\u7801\u3001\u4f7f\u7528\u9a8c\u6536\u4ee3\u7801\u7684\u9884\u671f\u8868\u73b0\u4e0e Lab4-3 \u7684\u7ed3\u679c\u57fa\u672c\u76f8\u540c\u3002\u533a\u522b\u5728\u4e8e\u5728\u672c\u6b21\u5b9e\u9a8c\u4e2d\uff0c\u56e0\u4e3a\u5b58\u5728\u5192\u9669\u548c\u5206\u652f\u6307\u4ee4\uff08forwarding \u548c branch prediction \u65e0\u6cd5\u5b8c\u5168\u907f\u514d stall \u7684\u51fa\u73b0\uff09\uff0c\u56e0\u6b64\u6267\u884c\u7684\u901f\u5ea6\u4f1a\u6bd4 Lab4-3 \u4e2d\u7565\u6162\uff0c\u5feb\u4e8e Lab5-1 \u7684\u7ed3\u679c\u3002</p> \u9a8c\u6536\u4ee3\u7801 <pre><code>auipc x26, 0x40\nauipc x27, 0x80\nsrli x27, x27, 3\nslli x27, x27, 3\nsrai x27, x27, 1\nbne x27, x26, dummy\nlui x26, 0x40000\nlui x27, 0x80000\nsrai x27, x27, 1\nbeq x27, x26, dummy\n\n# change your first digit in Studen ID to 3320'2233\naddi x24, zero, 0x22\nsb x24, 0x21(zero)\naddi x24, zero, 0x20\nsb x24, 0x22(zero)\n\n# change your second digit in Studen ID to 2204'2122\naddi x24, zero, 0x421\nsh x24, 0x25(zero)\n\nstart:\naddi x1, zero, -1 # x1=FFFFFFFF\nlb x24, 0x18(zero) # x24=FFFFFFFF\nbne x1, x24, dummy\nlbu x24, 0x18(zero)# x24=000000FF\nbge x1, x24, dummy\nlh x24, 0x60(zero) # x24=FFFFF7E0\nblt zero, x24, dummy\nlhu x24, 0x60(zero) # x24=0000F7E0\nblt x24, zero, dummy\nxori x3, x1, 1 # x3=FFFFFFFE\nadd x3, x3, x3 # x3=FFFFFFFC\nadd x3, x3, x3 # x3=FFFFFFF8\nadd x3, x3, x3 # x3=FFFFFFF0\nadd x3, x3, x3 # x3=FFFFFFE0\nadd x3, x3, x3 # x3=FFFFFFC0\nxor x20, x3, x1 # x20=0000003F\nadd x3, x3, x3 # x3=FFFFFF80\nadd x3, x3, x3 # x3=FFFFFF00\nadd x3, x3, x3 # x3=FFFFFE00\nadd x3, x3, x3 # x3=FFFFFC00\nadd x3, x3, x3 # x3=FFFFF800\nadd x3, x3, x3 # x3=FFFFF000\nadd x3, x3, x3 # x3=FFFFE000\nadd x3, x3, x3 # x3=FFFFC000\nadd x3, x3, x3 # x3=FFFF8000\nadd x3, x3, x3 # x3=FFFF0000\nadd x3, x3, x3 # x3=FFFE0000\nadd x3, x3, x3 # x3=FFFC0000\nadd x3, x3, x3 # x3=FFF80000\nadd x3, x3, x3 # x3=FFF00000\nadd x3, x3, x3 # x3=FFE00000\nadd x3, x3, x3 # x3=FFC00000\nadd x3, x3, x3 # x3=FF800000\nadd x3, x3, x3 # x3=FF000000\nadd x3, x3, x3 # x3=FE000000\nadd x3, x3, x3 # x3=FC000000\nadd x6, x3, x3 # x6=F8000000\nadd x3, x6, x6 # x3=F0000000\nadd x4, x3, x3 # x4=E0000000\nadd x13, x4, x4 # x13=C0000000\nlui x8, 0x80000 # x8=80000000\nori x26, zero, 1 # x26=00000001\nandi x26, x26, 0xff # x26=00000001\nsra x30, x8, x26\nsrl x27, x8, x26\n\nblt zero, zero, dummy\nblt x26, zero, dummy\nblt zero, x8, dummy\n\nbge zero, x26, dummy\nbge x8, zero, dummy\n\nbne x27, x30, loop\n\ndummy:\nadd zero, zero, zero # 4\nadd zero, zero, zero # 8\nadd zero, zero, zero # C\nadd zero, zero, zero # 10\nadd zero, zero, zero # 14\nadd zero, zero, zero # 18\nadd zero, zero, zero # 1C\njal zero, dummy\n\nloop:\nslt x2, x1, zero # x2=00000001 \u9488\u5bf9ALU32\u4f4d\u6709\u7b26\u53f7\u6570\u51cf\nsltu x25, x1, zero # x25=00000000\nsltiu x29, x1, 0 # x29=00000000\nslti x2, x1, 0 # x2=00000001 \u9488\u5bf9ALU32\u4f4d\u6709\u7b26\u53f7\u6570\u51cf\nadd x14, x2, x2\nadd x14, x14, x14 # x14=4\nsub x19, x14, x14 # x19=0\nsrli x19, x19, 1\naddi x10, x19, -1\nor x10, x10, zero\nadd x10, x10, x10 # x10=FFFFFFFE\n\nloop1:\nsw x6, 0x4(x3) # \u8ba1\u6570\u5668\u7aef\u53e3: F0000004, \u9001\u8ba1\u6570\u5e38\u6570x6=F8000000\nlw x5, 0x0(x3) # \u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001: {counter0_out,counter1_out,counter2_out,led_out[12:0], SW}\nslli x5, x5, 2 # \u5de6\u79fb2\u4f4d\u5c06SW\u4e0eLED\u5bf9\u9f50, \u540c\u65f6D1D0\u7f6e00, \u9009\u62e9\u8ba1\u6570\u5668\u901a\u90530\nsw x5, 0x0(x3) # x5\u8f93\u51fa\u5230GPIO\u7aef\u53e3F0000000, \u8bbe\u7f6e\u8ba1\u6570\u5668\u901a\u9053counter_set=00\u7aef\u53e3\nadd x9, x9, x2 # x9=x9+1\nsw x9, 0x0(x4) # x9\u9001x4=E0000000\u4e03\u6bb5\u7801\u7aef\u53e3\nlw x13, 0x14(zero) # \u53d6\u5b58\u50a8\u566820\u5355\u5143\u9884\u5b58\u6570\u636e\u81f3x13, \u7a0b\u5e8f\u8ba1\u6570\u5ef6\u65f6\u5e38\u6570\n\nloop2:\nlw x5, 0x0(x3) # \u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001: {out0, out1, out2, D28-D20, LED7\nadd x5, x5, x5\nadd x5, x5, x5 # \u5de6\u79fb2\u4f4d\u5c06SW\u4e0eLED\u5bf9\u9f50, \u540c\u65f6D1D0\u7f6e00, \u9009\u62e9\u8ba1\u6570\u5668\u901a\u90530\nsw x5, 0x0(x3) # x5\u8f93\u51fa\u5230GPIO\u7aef\u53e3F0000000, \u8ba1\u6570\u5668\u901a\u9053counter_set=00\u7aef\u53e3\u4e0d\u53d8\nlw x5, 0x0(x3) # \u518d\u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001\nand x11, x5, x8 # \u53d6\u6700\u9ad8\u4f4d=out0, \u5c4f\u853d\u5176\u4f59\u4f4d\u9001x11\nadd x13, x13, x2 # \u7a0b\u5e8f\u8ba1\u6570\u5ef6\u65f6\nbeq x13, zero, C_init # \u7a0b\u5e8f\u8ba1\u6570x13=0, \u8f6c\u8ba1\u6570\u5668\u521d\u59cb\u5316, \u4fee\u65397\u6bb5\u7801\u663e\u793a: C_init\n\nl_next: # \u5224\u65ad7\u6bb5\u7801\u663e\u793a\u6a21\u5f0f\uff1aSW[4: 3]\u63a7\u5236\nlw x5, 0x0(x3) # \u518d\u8bfbGPIO\u7aef\u53e3F0000000\u5f00\u5173SW\u72b6\u6001\nadd x18, x14, x14 # x14=4, x18=00000008\nadd x22, x18, x18 # x22=00000010\nadd x18, x18, x22 # x18=00000018(00011000)\nand x11, x5, x18 # \u53d6SW[4: 3]\nbeq x11, zero, L20 # SW[4: 3]=00, 7\u6bb5\u663e\u793a\"\u70b9\"\u5faa\u73af\u79fb\u4f4d\uff1aL20, SW0=0\nbeq x11, x18, L21 # SW[4: 3]=11, \u663e\u793a\u4e03\u6bb5\u56fe\u5f62, L21, SW0=0\nadd x18, x14, x14 # x18=8\nbeq x11, x18, L22 # SW[4: 3]=01, \u4e03\u6bb5\u663e\u793a\u9884\u7f6e\u6570\u5b57, L22, SW0=1\nsw x9, 0x0(x4) # SW[4: 3]=10, \u663e\u793ax9, SW0=1\nbltu zero, x4, loop2\n\nL20:\nbeq x10, x1, L4 # x10=ffffffff, \u8f6c\u79fbL4\\\\\nbgeu x4, zero, L3\n\nL4:\naddi x10, zero, -1 # x10=ffffffff\nadd x10, x10, x10 # x10=fffffffe\n\nL3:\nsw x10, 0x0(x4) # SW[4: 3]=00, 7\u6bb5\u663e\u793a\u70b9\u79fb\u4f4d\u540e\u663e\u793a\njal zero, loop2\n\nL21:\nlw x9, 0x60(x17) # SW[4: 3]=11, \u4ece\u5185\u5b58\u53d6\u9884\u5b58\u4e03\u6bb5\u56fe\u5f62\nsw x9, 0x0(x4) # SW[4: 3]=11, \u663e\u793a\u4e03\u6bb5\u56fe\u5f62\naddi x31, zero, 0x150\njalr zero, x31, 0x24 #jump to pc 0x174\n\nL22:\nlw x9, 0x20(x17) # SW[4: 3]=01, \u4ece\u5185\u5b58\u53d6\u9884\u5b58\u6570\u5b57\nsw x9, 0x0(x4) # SW[4: 3]=01, \u4e03\u6bb5\u663e\u793a\u9884\u7f6e\u6570\u5b57\nblt x4, zero, loop2\n\nC_init:\nlw x13, 0x14(zero) # \u53d6\u7a0b\u5e8f\u8ba1\u6570\u5ef6\u65f6\u521d\u59cb\u5316\u5e38\u6570\nadd x10, x10, x10 # x10=fffffffc, 7\u6bb5\u56fe\u5f62\u70b9\u5de6\u79fb121 or x10, x10, x2 # x10\u672b\u4f4d\u7f6e1, \u5bf9\u5e94\u53f3\u4e0a\u89d2\u4e0d\u663e\u793a\nadd x17, x17, x14 # x17=00000004, LED\u56fe\u5f62\u8bbf\u5b58\u5730\u5740+4\nand x17, x17, x20 # x17=000000XX, \u5c4f\u853d\u5730\u5740\u9ad8\u4f4d, \u53ea\u53d66\u4f4d\nadd x9, x9, x2 # x9+1\nbeq x9, x1, L6 # \u82e5x9=ffffffff, \u91cd\u7f6ex9=5\nbge zero, zero, L7\n\nL6:\nadd x9, zero, x14 # x9=4\nadd x9, x9, x2 # \u91cd\u7f6ex9=5\n\nL7:\nlw x5, 0x0(x3) # \u8bfbGPIO\u7aef\u53e3F0000000\u72b6\u6001\nadd x11, x5, x5\nslli x11, x11, 1 # \u5de6\u79fb2\u4f4d\u5c06SW\u4e0eLED\u5bf9\u9f50, \u540c\u65f6D1D0\u7f6e00, \u9009\u62e9\u8ba1\u6570\u5668\u901a\u90530\nsw x11, 0x0(x3) # x5\u8f93\u51fa\u5230GPIO\u7aef\u53e3F0000000, \u8ba1\u6570\u5668\u901a\u9053counter_set=00\u7aef\u53e3\u4e0d\u53d8\nsw x6, 0x4(x3) # \u8ba1\u6570\u5668\u7aef\u53e3: F0000004, \u9001\u8ba1\u6570\u5e38\u6570x6=F8000000\nbge zero, x4, l_next\n</code></pre>"},{"location":"Lab5/pipeline_hazard/#_5","title":"\u5b9e\u9a8c\u8981\u6c42","text":"<p>\u672c\u6b21\u5b9e\u9a8c\u4f60\u9700\u8981\u5b8c\u6210\u7684\u5185\u5bb9\u6709\uff1a</p> <ul> <li>\u7ed8\u5236\u81ea\u5df1\u7684 CPU datapath \u56fe\u3002\uff08\u5982\u679c Lab5-1 \u4e2d\u5df2\u7ecf\u5b8c\u6210\u6b64\u6b65\uff0c\u8fd9\u91cc\u4e0d\u7528\u518d\u91cd\u590d\u7ed8\u5236\uff09</li> <li>\u6839\u636e\u81ea\u5df1\u7684 datapath \u5b8c\u6210\u5904\u7406\u51b2\u7a81\u7684\u4e94\u9636\u6bb5\u6d41\u6c34\u7ebf CPU\u3002</li> <li>\u5bf9\u5b9e\u73b0\u7684 CPU \u8fdb\u884c\u4eff\u771f\u9a8c\u8bc1\u3001\u4e0b\u677f\u9a8c\u8bc1\u3001\u9a8c\u6536\u3002</li> <li>\u5b9e\u9a8c\u62a5\u544a\u91cc\u9700\u8981\u5305\u542b\u7684\u5185\u5bb9\uff1a<ul> <li>datapath \u56fe\u3002\uff08\u5982\u679c Lab5-1 \u4e2d\u5df2\u7ecf\u5b8c\u6210\u6b64\u6b65\uff0c\u8fd9\u91cc\u4e0d\u7528\u518d\u8d34\u5728\u62a5\u544a\u91cc\uff09</li> <li>\u6d41\u6c34\u7ebf CPU \u4ee3\u7801\uff08\u91cd\u70b9\u90e8\u5206\u7ed3\u5408 datapath \u548c Verilog \u4ee3\u7801\u89e3\u91ca\uff09<ul> <li>\u5982\u679c\u4f60\u5b9e\u73b0\u4e86 forwarding \u6216\u8005 branch prediction\uff0c\u9700\u8981\u5728\u62a5\u544a\u4e2d\u89e3\u91ca\u4f60\u7684\u5b9e\u73b0\u3002</li> </ul> </li> <li>\u4eff\u771f\u4ee3\u7801\u4e0e\u6ce2\u5f62\u622a\u56fe\uff08\u6ce8\u610f\u7f29\u653e\u6bd4\u4f8b\u3001\u6570\u5236\u9009\u62e9\u5408\u9002\uff09\uff0c\u5e76\u5206\u6790\u4eff\u771f\u6ce2\u5f62\u3002<ul> <li>\u5982\u679c\u4f60\u5b9e\u73b0\u4e86 forwarding \u6216\u8005 branch prediction\uff0c\u9700\u8981\u5728\u62a5\u544a\u7684\u6ce2\u5f62\u5206\u6790\u4e2d\u6807\u51fa forwarding \u6216\u8005 branch prediction \u8d77\u4f5c\u7528\u7684\u4f4d\u7f6e\uff0c\u5e76\u52a0\u4ee5\u5206\u6790\u3002</li> </ul> </li> <li>\u4e0b\u677f\u56fe\u7247\u4e0e\u73b0\u8c61\u63cf\u8ff0\u3002</li> <li>\u5b9e\u9a8c\u601d\u8003\u9898\u3002</li> </ul> </li> </ul>"},{"location":"Lab5/pipeline_hazard/#_6","title":"\u601d\u8003\u9898","text":"<p>\u601d\u8003\u9898</p> <ul> <li>\u57fa\u4e8e\u4f60\u5b8c\u6210\u7684\u6d41\u6c34\u7ebf\uff0c\u5bf9\u4e8e\u4ee5\u4e0b\u4e24\u6bb5\u4ee3\u7801\u5206\u522b\u5206\u6790\uff1a\u4e0d\u540c\u6307\u4ee4\u4e4b\u95f4\u662f\u5426\u5b58\u5728\u51b2\u7a81\uff08\u5982\u679c\u6709\uff0c\u8bf7\u9010\u6761\u5217\u51fa\uff09\u3001\u5728\u4f60\u7684\u6d41\u6c34\u7ebf\u4e0a\u8fd0\u884c\u7684 CPI \u4e3a\u4f55\u3002 TP-0<pre><code>addi    x1, x0, 0\naddi    x2, x0, -1\naddi    x3, x0, 1\naddi    x4, x0, -1\naddi    x5, x0, 1\naddi    x6, x0, -1\naddi    x1, x1, 0\naddi    x2, x2, 1\naddi    x3, x3, -1\naddi    x4, x4, 1\naddi    x5, x5, -1\naddi    x6, x6, 1\n</code></pre> TP-1<pre><code>addi    x1, x0, 1\naddi    x2, x1, 2\naddi    x3, x1, 3\naddi    x4, x3, 4\n</code></pre></li> <li>\u8bf7\u6839\u636e\u4f60\u7684\u5b9e\u73b0\uff0c\u5728 testbench \u4e0a\u4eff\u771f\u4ee5\u4e0b\u4ee3\u7801\uff0c\u7ed9\u51fa\u4eff\u771f\u7ed3\u679c\uff0c\u5e76\u5199\u51fa\u5b8c\u6210\u6240\u6709\u6307\u4ee4\u7528\u4e86\u591a\u5c11\u62cd\uff0c\u5fc5\u987b\u7ed9\u51fa\u7684\u4fe1\u53f7\u6709 <code>clk, IF-PC, ID-PC</code> \u4ee5\u53ca\u6240\u6709\u7528\u5230\u7684\u5bc4\u5b58\u5668\u503c\u3002\u8bf7\u52a1\u5fc5\u6ce8\u610f\u8c03\u6574\u6570\u5236\u4e3a\u5341\u516d\u8fdb\u5236\uff0c\u7f29\u653e\u80fd\u591f\u770b\u5230\u6240\u6709\u4fe1\u53f7\u503c\uff01\uff01\uff01<ul> <li>\u5982\u679c\u4f60\u5b9e\u73b0\u7684\u6d41\u6c34\u7ebf\u4ec5\u901a\u8fc7 stall \u89e3\u51b3\u6570\u636e\u51b2\u7a81 TP-2<pre><code>addi    x1, x0, 1\naddi    x2, x1, 2\naddi    x0, x0, 0\naddi    x0, x0, 0\naddi    x0, x0, 0\naddi    x1, x0, 3\naddi    x2, x0, 4\naddi    x3, x1, 5\naddi    x4, x2, 6\naddi    x0, x0, 0\naddi    x0, x0, 0\naddi    x5, x4, 7\n</code></pre></li> <li>\u5982\u679c\u4f60\u5b9e\u73b0\u7684\u6d41\u6c34\u7ebf\u652f\u6301 Forwarding TP-3<pre><code>addi    x1, x0, 1\naddi    x2, x1, 2\naddi    x3, x2, 3\nsw      x3, 0(x0)\nlw      x4, 0(x0)\naddi    x5, x4, 4\naddi    x6, x4, 5\n</code></pre></li> </ul> </li> </ul>"},{"location":"Other/Decoder_and_Testbench/","title":"RISC-V Decoder \u4e0e CPU Testbench","text":""},{"location":"Other/Decoder_and_Testbench/#venus","title":"Venus","text":"<p>Venus \u5e73\u53f0\u662f CS61C \u8bfe\u7a0b\u5f00\u653e\u7684 RISC-V \u7ebf\u4e0a\u5e73\u53f0\u3002\u6211\u4eec\u53ef\u4ee5\u5728 Venus \u4e0a\u5c06\u6211\u4eec\u4e66\u5199\u7684\u6c47\u7f16\u4ee3\u7801\u8f6c\u4e3a\u673a\u5668\u7801\uff0c\u6216\u8fd0\u884c\u67e5\u770b\u6307\u4ee4\u6d41\u52a8\u4e0e\u5bc4\u5b58\u5668\u503c\u3002</p> <p>\u5728 <code>Editor</code> \u4e2d\u8f93\u5165\u4f60\u7684\u4ee3\u7801\u3002</p> <p>\u5728 <code>Simulator</code> \u4e2d\u70b9\u51fb <code>Assemble &amp; Simulate from Editor</code> \u6309\u94ae\uff0c\u6b64\u65f6\u4f60\u5c06\u5728\u754c\u9762\u4e2d\u770b\u5230\u4f60\u8f93\u5165\u7684\u4ee3\u7801\u3001\u5bf9\u5e94\u7684 PC \u503c\u4e0e\u673a\u5668\u7801\u7b49\u4fe1\u606f\u3002\u5982\u679c\u4f60\u53c8\u5728 <code>Editor</code> \u4e2d\u4fee\u6539\u4e86\u4ee3\u7801\uff0c\u53ef\u4ee5\u70b9\u51fb <code>Re-assemble from Editor</code> \u83b7\u5f97\u65b0\u7684\u5185\u5bb9\u3002</p> <p>\u4e3a\u83b7\u5f97\u673a\u5668\u7801\uff0c\u5728 <code>Simulator</code> \u4e2d\u70b9\u51fb <code>dump</code>\uff0c\u4e0b\u65b9 console \u4f1a\u5f97\u5230\u673a\u5668\u7801\uff0c\u70b9\u51fb <code>Download!</code> \u6216\u62f7\u8d1d\u5373\u53ef\u3002</p>"},{"location":"Other/Decoder_and_Testbench/#xg-xg","title":"xg \u8fd8\u662f\u4f60 xg","text":"<p>@TonyCrane \u57fa\u4e8e CyberChef \u6240\u505a\u6269\u5c55\uff0c\u53ef\u4ee5\u652f\u6301\u6211\u4eec\u9700\u8981\u7684\u6307\u4ee4 decode\uff08\u6682\u65f6\u4e0d\u652f\u6301 label \u7684\u4f7f\u7528\uff09\uff0c\u5b83\u90e8\u7f72\u5728\u8fd9\u91cc\u3002\u62d6\u52a8 <code>TonyCrane Extensions</code> \u4e0b\u7684 <code>RISC-V Encode</code> \u5230 <code>Recipe</code> \u4e2d\uff0c\u9009\u62e9 <code>Hex string</code> \u8f93\u51fa\u6a21\u5f0f\u5373\u53ef\u3002</p>"},{"location":"Other/Decoder_and_Testbench/#testbench","title":"TestBench","text":"<p>\u4e3a\u4e86\u65b9\u4fbf\u5728\u4eff\u771f\u65f6\u76f4\u63a5\u67e5\u770b\u5bf9\u5e94\u7684\u6307\u4ee4\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u65b0\u7684 Python code \u5feb\u901f\u751f\u6210\u9700\u8981\u7684 <code>testbench</code> \u6a21\u5757\uff0c\u8bf7\u6ce8\u610f\uff1a\u8fd9\u4efd python code \u53ef\u80fd\u5b58\u5728\u95ee\u9898\uff0c\u5982\u53d1\u73b0\u95ee\u9898\u6b22\u8fce Issue\uff01</p> <p>\u901a\u8fc7 Python code\uff0c\u4f60\u53ef\u4ee5\u5f97\u5230\u4e00\u4efd\u7c7b\u4f3c\u4e0b\u65b9\u4ee3\u7801\u7684 <code>testbench module</code>\uff1a</p> Generated_testbench.v<pre><code>// Generated code\nmodule testbench(\ninput clk,\ninput rst\n);\n/* SCPU \u4e2d\u63a5\u51fa */\nwire [31:0] Addr_out;\nwire [31:0] Data_out;       wire        CPU_MIO;\nwire        MemRW;\nwire [31:0] PC_out;\n/* RAM \u63a5\u51fa */\nwire [31:0] douta;\n/* ROM_in_testbench \u63a5\u51fa */\nwire [31:0] spo;\nwire [8*30:1] inst_msg;\nSCPU u0(\n.clk(clk),\n.rst(rst),\n.Data_in(douta),\n.MIO_ready(CPU_MIO),\n.inst_in(spo),\n.Addr_out(Addr_out),\n.Data_out(Data_out),\n.CPU_MIO(CPU_MIO),\n.MemRW(MemRW),\n.PC_out(PC_out)\n);\nRAM_B u1(\n.clka(~clk),\n.wea(MemRW),\n.addra(Addr_out[11:2]),\n.dina(Data_out),\n.douta(douta)\n);\nROM_in_testbench u2(\n.a(PC_out[11:2]),\n.spo(spo),\n.inst_msg(inst_msg)\n);\nendmodule // tesebench\nmodule ROM_in_testbench(\ninput [9:0] a,\noutput [31:0] spo,\noutput [8*30:1] inst_msg\n);\nreg[8*30:1] inst_string[0:9];\nreg[31:0] inst [0:1023];\nassign spo = inst[a];\nassign inst_msg = inst_string[a];\n// Initial inst\ninitial begin\ninst[0]  &lt;= 32'h3E810093;\ninst[1]  &lt;= 32'h00A14093;\ninst[2]  &lt;= 32'h00116093;\ninst[3]  &lt;= 32'h00017093;\ninst[4]  &lt;= 32'h01411093;\ninst[5]  &lt;= 32'h00515093;\ninst[6]  &lt;= 32'h41815093;\ninst[7]  &lt;= 32'hFFF12093;\ninst[8]  &lt;= 32'h3FF13093;\ninst[9]  &lt;= 32'h0E910083;\nend\n// Initial inst_string\ninitial begin\ninst_string[0]   &lt;= \"addi x1, x2, 1000\";\ninst_string[1]   &lt;= \"xori x1, x2, 10\";\ninst_string[2]   &lt;= \"ori x1, x2, 1\";\ninst_string[3]   &lt;= \"andi x1, x2, 0\";\ninst_string[4]   &lt;= \"slli x1, x2, 20\";\ninst_string[5]   &lt;= \"srli x1, x2, 5\";\ninst_string[6]   &lt;= \"srai x1, x2, 24\";\ninst_string[7]   &lt;= \"slti x1, x2, -1\";\ninst_string[8]   &lt;= \"sltiu x1, x2, 1023\";\ninst_string[9]   &lt;= \"lb x1, 233(x2)\";\nend\nendmodule // ROM_in_test\n</code></pre> <p>\u5728\u65b0\u7684 <code>testbench</code> \u6a21\u5757\u4e2d\uff0c\u6211\u4eec\u4e66\u5199\u4e86\u4e00\u4e2a\u65b0\u7684 <code>ROM</code> \u6a21\u5757\uff0c\u7528\u6765\u51cf\u5c11\u91cd\u590d\u751f\u6210 ROM \u6838\u7684\u9ebb\u70e6\uff0c\u4f46\u662f\u5728\u4f60\u51c6\u5907\u4e0b\u677f\u65f6\uff0c\u8fd8\u9700\u8981\u5c06 ROM \u6838\u4f7f\u7528\u9a8c\u6536\u4ee3\u7801\u521d\u59cb\u5316\u6587\u4ef6\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u5f97\u5230 <code>ROM_B</code> \u6a21\u5757\u3002</p>"},{"location":"Other/RISC_V/","title":"RISC-V 32I \u901f\u67e5","text":"<p>RISC-V \u4e2d\u6587\u624b\u518c\uff0c\u5185\u6709\u90e8\u5206\u9519\u8bef\uff0c\u5efa\u8bae\u67e5\u770b\u82f1\u6587\u6807\u51c6\u3002</p> <p></p> <p>\u9700\u8981\u5f3a\u8c03\u7684\u662f\uff1a</p> <ul> <li><code>slt, slti</code> \u662f\u6709\u7b26\u53f7\u6570\u4e4b\u95f4\u7684\u6bd4\u8f83\u3002</li> </ul>"},{"location":"Other/Verilog_Simulation/","title":"Verilog \u4eff\u771f(Linux/macOS)","text":"<p>\u4e3b\u8981\u662f\u7ed9\u6570\u903b\u65f6\u6ca1\u6709 Windows \u672c\u7684\u540c\u5b66\uff0c\u5bf9\u8ba1\u7ec4\u5b9e\u9a8c\u6765\u8bf4\u5e2e\u52a9\u4e0d\u5927\uff08\u65e0\u6cd5\u4f7f\u7528 IP Core\uff09</p> <p>Verilog \u4eff\u771f\u662f\u5224\u65ad\u6a21\u5757\u529f\u80fd\u662f\u5426\u6b63\u5e38\u7684\u91cd\u8981\u4e00\u6b65\u3002\u5982\u4f55\u5199\u4eff\u771f\u6587\u4ef6\u8bf7\u9605\u8bfb First_Look_at_Verilog \uff0c\u672c\u6587\u6863\u4ec5\u5c55\u793a MacOS \u548c Linux \u73af\u5883\u4e0b\u7684 Verilog \u4eff\u771f\uff08\u4f7f\u7528 iverilog \u53ca gtkwave\uff09\u3002</p>"},{"location":"Other/Verilog_Simulation/#iverilog","title":"iverilog","text":"<p>Icarus Verilog \u662f Verilog \u786c\u4ef6\u63cf\u8ff0\u8bed\u8a00\u7684\u5b9e\u9a8c\u5de5\u5177\u4e4b\u4e00\uff0c \u4f60\u53ef\u4ee5\u8fdb\u5165\u5b98\u7f51\u4e86\u89e3\u66f4\u591a\u3002</p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u5305\u7ba1\u7406\u7b80\u5355\u7684\u5b89\u88c5\uff0c\u6bd4\u5982\uff1a</p> <pre><code>sudo apt-get install iverilog # on Debian or Ubuntu\nyum install iverilog # on CentOS\nbrew install icarus-verilog # on MacOS with homebrew\n</code></pre> <p>\u8bf7\u6839\u636e\u4f60\u7684\u5e73\u53f0\u8fdb\u884c\u8c03\u6574\u3002\u5982\u679c\u4f60\u66f4\u503e\u5411\u4e8e\u4f7f\u7528\u6e90\u7801\u81ea\u884c\u7f16\u8bd1\uff0c\u8bf7\u53c2\u8003\u8fd9\u4e2a\u7f51\u7ad9\u627e\u5230\u5408\u9002\u7684\u5b89\u88c5\u6307\u5bfc\u3002</p>"},{"location":"Other/Verilog_Simulation/#gtkwave","title":"gtkwave","text":"<p>\u5bf9\u4e8e macOS Sonoma 14 \u7248\u672c</p> <p>\u5b98\u7f51 gtkwave \u5e76\u4e0d\u652f\u6301\uff0c\u53ef\u4ee5\u53c2\u8003 issue \u4e2d\u7684\u56de\u590d\uff0c\u4f7f\u7528 mac port \u5b89\u88c5\uff0c\u6216\u4f7f\u7528 brew \u5b89\u88c5\u5176\u4ed6\u7528\u6237\u63d0\u4f9b\u7684\u4fee\u6539\u7248\u672c\uff1a</p> <pre><code># \u5982\u679c\u4e4b\u524d\u4f7f\u7528 brew \u5b89\u88c5\u8fc7 gtkwave \u8f93\u5165\u4ee5\u4e0b\u4e24\u884c\nbrew uninstall gtkwave\nbrew untap randomplum/gtkwave\n\nbrew install --HEAD randomplum/gtkwave/gtkwave\n</code></pre> <p>gtkwave \u53ef\u7528\u4e8e\u67e5\u770b VCD \u6ce2\u5f62\u6587\u4ef6\uff0c\u4f60\u53ef\u4ee5\u8fdb\u5165\u5b98\u7f51\u4e86\u89e3\u66f4\u591a\u5e76\u53ef\u5728\u5b98\u7f51\u4e0b\u8f7d\u5b89\u88c5\u5bf9\u5e94\u7248\u672c\u3002</p>"},{"location":"Other/Verilog_Simulation/#how-to-use","title":"How to use","text":"<p>\u5148\u4ee5\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u7ed9\u51fa\u8fc7\u7a0b\u3002</p> demo0.v<pre><code>module reverse (\ninput [1:0] in,\noutput [1:0] out\n);\nassign out = {in[0], in[1]};\nendmodule\n</code></pre> <p>\u8fd9\u662f\u4e00\u4e2a\u5c06\u8f93\u5165\u4e24\u4f4d\u5012\u7f6e\u7684\u7b80\u5355\u6a21\u5757\u3002</p> demo0_tb.v<pre><code>// tb for *testbench*\n`timescale 1ns/1ps\n`include \"demo0.v\"\nmodule demo0_tb;\nreg[1:0] in;\nwire[1:0] out;\nreverse m0(in, out);\ninitial begin\n$dumpfile(\"demo0_tb.vcd\");\n$dumpvars(0, demo0_tb);\nin = 2'b10;\n#10; in = 2'b01;\n#10; in = 2'b00;\nend\nendmodule\n</code></pre> <p>\u4f60\u53ef\u80fd\u4f1a\u53d1\u73b0 testbench \u4ee3\u7801\u4e2d\u6709\u4e24\u884c\u4ee3\u7801\u5e76\u4e0d\u662f\u5f88\u7406\u89e3</p> <pre><code>$dumpfile(\"demo0_tb.vcd\");\n$dumpvars(0, demo0_tb);\n</code></pre> <p>\u6211\u4eec\u4e4b\u540e\u4f1a\u8fdb\u884c\u8ba8\u8bba\uff0c\u73b0\u5728\u5148\u8fdb\u884c\u6b65\u9aa4\u6f14\u793a\u3002</p>"},{"location":"Other/Verilog_Simulation/#step1","title":"Step1","text":"<p>Compile &amp; Run</p> <pre><code>iverilog -o demo0.vvp demo0_tb.v\n</code></pre> <p><code>-o</code>\u53c2\u6570\u7528\u4e8e\u5bf9\u8f93\u51fa\u6587\u4ef6\u547d\u540d\uff0c\u9ed8\u8ba4\u547d\u540d\u4e3a<code>a.out</code>\u3002</p> <pre><code>vvp demo0.vvp\n</code></pre> <p>vvp \u662f\u7528\u4e8e\u6267\u884c Icarus Verilog \u9ed8\u8ba4\u7f16\u8bd1\u5f62\u5f0f\u7684 runtime engine\uff0c\u5373\u4f7f\u7528 <code>vvp</code> \u6765\u6267\u884c <code>iverilog</code> \u751f\u6210\u7684\u8f93\u51fa\u6587\u4ef6\u3002</p> <p>\u901a\u8fc7\u4e0a\u8ff0\u8fc7\u7a0b\uff0c\u6211\u4eec\u83b7\u5f97\u4e86 <code>demo0_tb.vcd</code>\uff0c\u8fd9\u91cc\u50a8\u5b58\u7740\u6211\u4eec\u5e0c\u671b\u5f97\u5230\u7684\u6ce2\u5f62\u4fe1\u606f\u3002</p>"},{"location":"Other/Verilog_Simulation/#step2","title":"Step2","text":"<p>\u6253\u5f00 gtkwave\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>open -a gtkwave</code> \u6765\u6253\u5f00\uff08\u5f53\u7136\u53cc\u51fb\u5e94\u7528\u56fe\u6807\u4e5f\u53ef\u4ee5\uff09\u3002</p> <p><code>File -&gt; Open New Tab</code> \u5e76\u9009\u62e9\u521a\u624d\u5f97\u5230\u7684 <code>.vcd</code> \u6587\u4ef6\u3002\u4f60\u5c06\u770b\u5230\u5982\u4e0b\u754c\u9762</p> <p></p> <p>\u6211\u4eec\u9700\u8981\u5728\u5de6\u4fa7SST\u4e2d\u9009\u62e9\u4eff\u771f\u6587\u4ef6<code>demo0_tb</code>\u8fdb\u800c\u9009\u62e9\u6211\u4eec\u7528\u4e8e\u4eff\u771f\u7684\u6a21\u5757<code>m0</code>\uff08\u4e0d\u7406\u89e3\u5206\u522b\u662f\u4ec0\u4e48\u540d\u79f0\u53ef\u4ee5\u8fd4\u56detestbench\u4ee3\u7801\u5bf9\u7167\u67e5\u770b\uff09\u3002\u53ef\u4ee5\u770b\u5230\u4e0b\u8fb9\u8fd9\u6837\u7684\u754c\u9762</p> <p></p> <p>\u7ea2\u6846\u90e8\u5206\u5373\u4e3a\u6a21\u5757m0\u4e2d\u7684\u6240\u6709\u4fe1\u53f7\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u60f3\u770b\u7684\u4fe1\u53f7\uff0c\u957f\u6309<code>Crtl</code>\u6216<code>Command</code>\u952e\u5e76\u5355\u51fb\u53ef\u4ee5\u4e00\u6b21\u9009\u62e9\u591a\u4e2a\u4fe1\u53f7\uff0c\u9009\u62e9\u5b8c\u4fe1\u53f7\u540e\uff0c\u70b9\u51fb\u56fe\u4e2d\u5de6\u4e0b\u89d2\u7684<code>Append</code>\u5373\u53ef\u5c06\u4fe1\u53f7\u6ce2\u5f62\u5c55\u793a\u51fa\u6765\uff0c\u5982\u4e0b\u56fe\uff1a</p> <p></p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u5411\u91cf\u6211\u4eec\u53ef\u4ee5\u53cc\u51fb\u8fdb\u884c\u5c55\u5f00\uff08\u5982\u56fe\u4e2d<code>in</code>\u4fe1\u53f7\uff09\uff0c\u8fd9\u91cc\u7531\u4e8e\u5355\u4f4d\u65f6\u95f4\u6240\u5360\u957f\u5ea6\u8fc7\u957f\uff0c\u6211\u4eec\u5f97\u4e0d\u5230\u6709\u6548\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u70b9\u51fb\u4e0a\u680f\u7684\u653e\u5927\u955c\u8fdb\u884c\u653e\u5927\u6216\u7f29\u5c0f\u3002\u6211\u4eec\u53d1\u73b0\uff0c0-20ns\u7684\u65f6\u95f4\u8303\u56f4\u4e0d\u8db3\u4ee5\u5f97\u5230\u6211\u4eec\u60f3\u8981\u7684\u5168\u90e8\u4fe1\u53f7\uff0c\u5982\u4e0b</p> <p></p> <p>\u7b14\u8005\u672a\u80fd\u627e\u5230\u66f4\u65b9\u4fbf\u6539\u53d8\u65f6\u95f4\u8303\u56f4\u7684\u65b9\u6cd5\uff0c\u89e3\u51b3\u529e\u6cd5\u662f\u5728\u6700\u540e\u7684\u4eff\u771f\u547d\u4ee4\u540e\u6dfb\u52a0\u4e86\u65b0\u7684<code>#10</code>\uff0c\u5373\u6539\u4e3a\uff1a</p> <pre><code>initial begin\n$dumpfile(\"demo0_tb.vcd\");\n$dumpvars(0, demo0_tb);\nin = 2'b10;\n#10; in = 2'b01;\n#10; in = 2'b00;\n#10; // Changed Here!\nend\n</code></pre> <p>\u8fd9\u65f6\u6211\u4eec\u5f97\u5230\u4e86\u5e0c\u671b\u770b\u5230\u7684\u5168\u90e8\u6ce2\u5f62\u3002\uff08\u5982\u6709\u66f4\u597d\u7684\u65b9\u5f0f\uff0c\u70e6\u8bf7\u8054\u7cfb guahao@zju.edu.cn \uff0c\u975e\u5e38\u5e0c\u671b\u5f97\u5230\u60a8\u7684\u5efa\u8bae\uff01)</p> <p></p>"},{"location":"Other/Verilog_Simulation/#_1","title":"\u4e00\u4e9b\u89e3\u91ca","text":""},{"location":"Other/Verilog_Simulation/#testbench","title":"testbench\u4e2d\u65b0\u4e1c\u897f\u662f\u4ec0\u4e48\uff1f","text":"<pre><code>$dumpfile(\"demo0_tb.vcd\");\n$dumpvars(0, demo0_tb);\n</code></pre> <p>\u9996\u5148\u7ed9\u51fa\u4e24\u4e2a\u53c2\u8003\u7f51\u7ad9\uff0c FAQ_Icarus Verilog\uff0c Reference Designer\u3002</p> <p><code>$</code> \u901a\u5e38\u7528\u6765\u8868\u793a\u5185\u7f6e\u51fd\u6570\u3002</p> <p><code>$dumpfile(\"filename.vcd\");</code> \u5c06 nets \u4e0e regs \u7684\u53d8\u5316\u5199\u5165 <code>filename.vcd</code> \u4e2d\uff0c VCD \u5373 value change dump\u3002\u5728\u4e00\u4e2a\u6a21\u62df\u4e2d\uff0c\u6211\u4eec\u53ea\u80fd\u6709\u81f3\u591a\u4e00\u4e2a <code>$dumpfile</code>\u3002</p> <p><code>$dumpfile</code> \u6307\u5b9a\u4e86\u6211\u4eec\u5c06dump\u5f97\u5230\u7684\u4fe1\u606f\u5b58\u50a8\u5230\u54ea\u91cc\uff0c\u800c <code>$dumpvars</code> \u89c4\u5b9a\u4e86\u6211\u4eec\u5e0c\u671b\u5b58\u50a8\u4ec0\u4e48\u4fe1\u606f\u3002\u5b83\u7684\u5f15\u7528\u5f62\u5f0f\u8f83\u591a\uff0c\u6211\u4eec\u5206\u70b9\u8868\u793a</p> <ul> <li><code>$dumpvars</code>\uff0c\u8fd9\u662f\u6700\u7b80\u5355\u7684\u5f62\u5f0f\uff0c\u4ed6\u8868\u793a\u6211\u4eec\u5e0c\u671b\u5f97\u5230\u6240\u6709\u4fe1\u53f7\u7684\u53d8\u5316</li> <li><code>$dumpvars(&lt;level&gt;, &lt;, &lt;module_or_variable&gt;&gt;)</code></li> <li>\u200b   <code>&lt;, &lt;module_or_variable&gt;&gt;</code> \u89c4\u5b9a\u4e86\u6211\u4eec\u5e0c\u671b\u770b\u7684\u6a21\u5757\u540d\uff0c\u53ef\u4ee5\u9009\u62e9\u591a\u4e2a\u6a21\u5757\u6216\u53d8\u91cf\uff0c\u6bd4\u5982 <code>$dumpvars(1, top_module, another_module)</code></li> <li><code>&lt;level&gt;</code> \u8868\u793a\u7ea7\u522b\uff0c<code>0</code> \u8868\u793a\u672c\u6a21\u5757\u548c\u672c\u6a21\u5757\u6240\u5f15\u7528\u7684\u6240\u6709\u6a21\u5757\u4e2d\u7684\u6240\u6709\u53d8\u91cf\uff0c\u6bd4\u5982 <code>top_module</code> \u4e0b\u6709 <code>a_module</code>\uff0c\u90a3\u4e48 <code>$dumpvars(0, top_module)</code> \u4f1a\u5c06 <code>top_module</code> \u548c <code>a_module</code> \u4e2d\u6240\u6709\u53d8\u91cf\u7684\u53d8\u5316\u8bb0\u5f55\u4e0b\u6765\uff1b <code>1</code> \u8868\u793a\u4ec5\u672c\u6a21\u5757\u4e2d\u7684\u6240\u6709\u53d8\u91cf\uff0c\u5728\u4e0a\u8fb9\u7684\u4f8b\u5b50 <code>$dumpvars(1, top_module)</code> \u4ec5\u8bb0\u5f55 <code>top_module</code> \u7684\u53d8\u91cf\u800c\u4e0d\u8bb0\u5f55 <code>a_module</code>\uff1b <code>2</code> \u53ca\u4ee5\u4e0a\u7684\u4ece\u672a\u89c1\u8fc7\uff0c\u6709\u5174\u8da3\u7684\u540c\u5b66\u53ef\u81ea\u884c\u67e5\u9605\u3002</li> </ul>"},{"location":"Other/Verilog_Simulation/#include-or-not","title":"include or not?","text":"<p>\u56e0\u4e3a\u4f8b\u5b50\u4e2d\u76f4\u63a5\u5c06 <code>module reverse</code> \u901a\u8fc7 <code>include</code> \u5f15\u5165\u5230\u4e86\u6d4b\u8bd5\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u5728\u7f16\u8bd1\u7684\u65f6\u5019\u5e76\u6ca1\u6709\u5c06reverse\u6240\u5728\u7684 <code>demo0.v</code> \u4e00\u540c\u5199\u51fa\uff0c\u5982\u679c\u672a\u901a\u8fc7 <code>include</code> \u65b9\u5f0f\uff0c\u5219\u5728 <code>iverilog</code> \u7f16\u8bd1\u65f6\u8981\u7ed9\u51fa\u76f8\u5e94\u7684 <code>.v</code> \u6587\u4ef6\uff08\u7c7b\u6bd4c\u7684\u7f16\u8bd1\uff09\u3002\u6bd4\u5982</p> demo0_tb_another.v<pre><code>`timescale 1ns/1ps\nmodule demo0_tb;\nreg[1:0] in;\nwire[1:0] out;\nreverse m0(in, out);\ninitial begin\n$dumpfile(\"demo0_tb_another.vcd\");\n$dumpvars(0, demo0_tb);\nin = 2'b10;\n#10; in = 2'b01;\n#10; in = 2'b00;\n#10;\nend\nendmodule\n</code></pre> <p>\u4e0e <code>demo0_tb.v</code> \u4ec5\u51cf\u5c11\u4e86 <code>include</code> \u540c\u65f6\u6539\u53d8\u4e86file\u540d\uff0c\u540c\u65f6 <code>demo0.v</code> \u672a\u505a\u6539\u53d8\u3002</p> <pre><code>iverilog -o demo0_tb_another.vvp demo0.v demo0_tb_another.v\nvvp demo0_tb_another.vvp\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u5b8c\u5168\u4e00\u81f4\u7684\u7ed3\u679c\u3002\u66f4\u591a\u53c2\u6570\u548c\u4f7f\u7528\u65b9\u6cd5\u53ef\u4ee5\u67e5\u770biverilog\u624b\u518c <code>man iverilog</code> \u6216\u5b98\u7f51\u624b\u518c\u3002</p> <p></p>"},{"location":"Other/Verilog_Simulation/#cli","title":"\u5982\u679c\u4f60\u53ea\u60f3\u7528CLI","text":"<p>\u5982\u679cgtkwave\u65e0\u6cd5\u6ee1\u8db3\u4f60\u53ea\u4f7f\u7528CLI\u6765\u5b8c\u6210\u6240\u6709\u4efb\u52a1\u7684\u8981\u6c42\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 yne/vcd\u3002\u8bf7\u53c2\u8003\u4ed6\u7684\u9879\u76ee\u4e3b\u9875\u5b8c\u6210\u5b89\u88c5\u5e76\u5c1d\u8bd5\u4f7f\u7528\u3002</p>"},{"location":"Other/about_git/","title":"Git \u57fa\u7840","text":"<p>\u4f60\u4e5f\u8bb8\u5f88\u65e9\u5c31\u542c\u8bf4\u8fc7 <code>git</code> \u8fd9\u4e2a\u5de5\u5177\uff08\u5b98\u7f51\uff09\uff0c\u5e0c\u671b\u901a\u8fc7\u672c\u5b9e\u9a8c\uff0c\u4f60\u53ef\u4ee5\u6bd4\u8f83\u719f\u7ec3\u7684\u4f7f\u7528\u5b83\uff0c\u5e76\u4e3a\u4f60\u4e4b\u540e\u7684\u5b66\u4e60\u4e0e\u5de5\u7a0b\u670d\u52a1\u3002</p>"},{"location":"Other/about_git/#git_1","title":"Git \u6709\u4ec0\u4e48\u7528\uff1f","text":"<p>\u4e0d\u77e5\u9053\u4f60\u662f\u5426\u7ecf\u5386\u8fc7\u4ee5\u4e0b\u75db\u82e6\uff1a</p> <ul> <li>\u8bef\u5220\u91cd\u8981\u6e90\u7801\uff1a\u5728\u4e00\u4e2a\u5927\u4f5c\u4e1a\u5373\u5c06\u5b8c\u6210\u65f6\uff0c<ul> <li>Windows \u7528\u6237\uff1a\u4e0d\u5c0f\u5fc3\u6309 <code>shift+delete</code> \u53c8\u6572\u4e86\u4e00\u4e0b <code>enter</code> \u628a\u5173\u952e\u6e90\u7801\u5220\u4e86</li> <li>Linux \u7528\u6237\uff1a<code>rm main.c</code></li> </ul> </li> <li>\u5bf9\u5df2\u7ecf\u5199\u597d\u7684\u4ee3\u7801\u8fdb\u884c\u4e86\u5f88\u5927\u7684\u6539\u52a8\uff0c\u53d1\u73b0\u8d8a\u6539\u8d8a\u9519\uff0c\u4f46\u662f\u5fd8\u8bb0\u4e86\u6539\u8fc7\u54ea\u91cc</li> <li>\u5c0f\u7ec4\u5408\u4f5c\u65f6\u4f7f\u7528\u201c\u57fa\u4e8eQQ\u7684\u7248\u672c\u63a7\u5236\u201d\uff0c\u6700\u540e\u4ee3\u7801\u5408\u5230\u4e00\u8d77\u6839\u672c\u8fc7\u4e0d\u4e86\u7f16\u8bd1</li> </ul> <p>\u6211\u4eec\u901a\u5e38\u65e0\u6cd5\u4e00\u6b21\u901a\u5173\u4e00\u6b3e\u6e38\u620f\uff0c\u4e3a\u4e86\u4fdd\u6301\u8fdb\u5ea6\uff0c\u6e38\u620f\u4e2d\u8bbe\u7f6e\u4e86\u82e5\u5e72<code>\u5b58\u6863\u70b9</code>\uff1b\u540c\u6837\u7684\uff0c\u5728\u5199\u4ee3\u7801\uff08\u5c24\u5176\u662f\u5c0f\u7ec4\u5408\u4f5c\uff09\u65f6\u6211\u4eec\u901a\u5e38\u65e0\u6cd5\u4e00\u4e0b\u5199\u5b8c\uff0c\u8fd9\u5c31\u9700\u8981\u4e00\u4e2a\u5de5\u5177\u6765\u4fdd\u5b58\u8fdb\u5ea6\uff0c\u8fd9\u5c31\u662f <code>git</code> \u5b58\u5728\u7684\u610f\u4e49\u3002</p>"},{"location":"Other/about_git/#_1","title":"\u5b89\u88c5","text":"<p>\u8bf7\u5408\u7406\u4f7f\u7528\u641c\u7d22\u5f15\u64ce\u3002</p> <p>\u5728\u5b89\u88c5\u6210\u529f\u4e4b\u540e\uff0c\u4f60\u4e5f\u8bb8\u9700\u8981\u8fdb\u884c\u4e00\u4e9b\u5168\u5c40\u914d\u7f6e\uff0c\u4ee5\u4fbf\u4e4b\u540e\u63d0\u4ea4\uff1a <pre><code>$ git config --global user.name \"CO_2023\"\n$ git config --global user.email \"CoputerOrganization@zju.edu.cn\"\n</code></pre></p> <p>\u66f4\u591a\u7684\u914d\u7f6e\u5185\u5bb9\uff0c\u53ef\u4ee5\u67e5\u770b git \u6587\u6863\u3002</p>"},{"location":"Other/about_git/#git-init-git-clone","title":"<code>git init</code> &amp; <code>git clone</code>","text":"<p>\u5982\u679c\u4f60\u4ece\u96f6\u5f00\u59cb\u4e00\u4e2a\u5de5\u7a0b\uff0c\u9700\u8981\u4f7f\u7528 <code>git init</code> \u6765\u5bf9\u5f53\u524d\u76ee\u5f55\u8fdb\u884c\u76f8\u5173\u7684\u521d\u59cb\u5316\uff0c\u5b83\u4f1a\u521b\u5efa\u4e00\u4e2a <code>.git</code> \u76ee\u5f55\u7528\u6765\u4fdd\u5b58\u4fe1\u606f\u3002</p> <p>\u5982\u679c\u5df2\u7ecf\u6709\u4eba\u63d0\u4f9b\u4e86\u4e00\u4e2a\u521d\u59cb\u4ed3\u5e93\uff0c\u5e76\u5c06\u5176\u6258\u7ba1\u5230\u4e86\u67d0\u5e73\u53f0\uff08\u6bd4\u5982 GitHub\uff09\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528 <code>git clone &lt;repository&gt;</code> \u5c06\u8fd9\u4e2a\u5de5\u7a0b<code>\u514b\u9686</code>\u4e0b\u6765\u3002</p> <p>\u73b0\u5728\uff0c\u4f60\u5df2\u7ecf\u5f00\u542f\u4e86\u4e00\u4e2a\u201c\u65b0\u7684\u6e38\u620f\u5b58\u6863\u201d\uff0c\u53ef\u4ee5\u5f00\u59cb\u4f60\u7684\u5de5\u4f5c\u4e0e\u6e38\u620f\u4e86\uff01</p>"},{"location":"Other/about_git/#_2","title":"\u5b58\u6863","text":"<p>\u5f53\u4f60\u5b8c\u6210\u4e86\u4e00\u90e8\u5206\u4efb\u52a1\uff0c\u5e0c\u671b\u8fdb\u884c\u5b58\u6863\u65f6\uff0c\u53ef\u4ee5\uff1a</p> <ul> <li><code>git status</code> \u67e5\u770b\u4f60\u5230\u5e95\u5bf9\u4ec0\u4e48\u5185\u5bb9\u8fdb\u884c\u4e86\u4fee\u6539<ul> <li>\u4f60\u8fd8\u53ef\u4ee5\u7528 <code>git diff</code> \u6765\u67e5\u770b\u5728\u4e0a\u4e00\u4e2a\u5b58\u6863\u4e4b\u540e\uff0c\u4f60\u5177\u4f53\u8fdb\u884c\u4e86\u4ec0\u4e48\u4fee\u6539</li> </ul> </li> <li><code>git add &lt;pathspec&gt;</code> \u5c06\u4f60\u60f3\u4fdd\u7559\u5728\u65b0\u7684\u5b58\u6863\u7684\u66f4\u6539\u6dfb\u52a0\u8fdb\u6765<ul> <li>\u5982\u679c\u4f60\u60f3\u4fdd\u7559\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u66f4\u6539\uff0c\u53ef\u4ee5 <code>git add .</code></li> </ul> </li> <li><code>git commit -m \"some log\"</code> \u901a\u8fc7 <code>commit</code> \u6765\u5bf9\u4f60\u7684\u66f4\u6539\u8fdb\u884c\u63d0\u4ea4</li> </ul> <p>\u81f3\u6b64\uff0c\u4e00\u4e2a\u65b0\u7684\u5b58\u6863\u4ea7\u751f\u4e86\uff0c\u4f60\u4e4b\u540e\u7684\u5de5\u4f5c\u90fd\u4f1a\u5728\u8fd9\u4e2a\u5b58\u6863\u7684\u57fa\u7840\u4e0a\u5b8c\u6210\u3002</p>"},{"location":"Other/about_git/#_3","title":"\u770b\u770b\u8fc7\u53bb","text":"<p>\u4f60\u60f3\u67e5\u770b\u4e00\u4e0b\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u90fd\u505a\u4e86\u4ec0\u4e48\u5b58\u6863\uff0c\u4f7f\u7528 <code>git log</code> \u5373\u53ef\uff0c\u5b83\u4f1a\u63d0\u4f9b\u81f3\u4eca\u4e3a\u6b62\u6240\u6709\u7684 <code>commit</code> \u4fe1\u606f\uff08\u65f6\u95f4\uff0c\u63d0\u4ea4\u8005\uff0c\u63cf\u8ff0\uff0chashcode\uff09\uff0c\u4e3a\u4e86\u901a\u8fc7<code>log</code>\u66f4\u597d\u7684\u67e5\u770b\u5de5\u4f5c\uff0c\u4f60\u4e5f\u8bb8\u9700\u8981\u5199\u51fa\u66f4\u4f18\u79c0\u7684commit\u4fe1\u606f (angular\u89c4\u8303)\u3002</p> <p>\u5982\u679c\u4f60\u60f3\u56de\u5230\u8fc7\u53bb\u7684\u67d0\u4e2a <code>commit</code>\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>git reset --hard &lt;commit&gt;</code>\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4f60\u4f7f\u7528\u4e86 <code>--hard</code>\uff0c\u5728\u56de\u5230\u4f60\u6307\u5b9a\u7684commit\u540e\uff0c\u4f60\u5c06\u65e0\u6cd5\u524d\u5f80\u8fd9\u4e2acommit\u4e4b\u540e\u7684\u4efb\u4f55\u4e00\u4e2acommit\uff0c\u56e0\u6b64\u5728\u64cd\u4f5c\u524d\u8bf7\u614e\u91cd\u3002</p>"},{"location":"Other/about_git/#_4","title":"\u5206\u652f","text":"<p>\u5982\u540cGalgame\u4f1a\u6709\u5267\u60c5\u5206\u652f\u4e00\u6837\uff0c\u6211\u4eec\u7684\u5de5\u7a0b\u53ef\u80fd\u5ef6\u4f38\u51fa\u6765\u82e5\u5e72 <code>feature</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>git checkout -b &lt;feature&gt;</code> \u6765\u65b0\u5efa\u4e00\u4e2a\u5206\u652f\uff0c\u5e76\u5728\u8fd9\u4e2a\u5206\u652f\u4e0a\u5b8c\u6210\u76f8\u5173\u5de5\u4f5c\uff0c\u6700\u540e\u901a\u8fc7 <code>git merge</code> \u5c06\u65b0\u7684\u5185\u5bb9\u5408\u5e76\u5230\u4e4b\u524d\u7684\u4e3b\u5206\u652f\u4e2d\u3002\uff08\u6709\u53ef\u80fd\u9700\u8981\u89e3\u51b3\u4e0d\u540c\u5206\u652f\u7684\u51b2\u7a81\uff09 \u5206\u652f\u7b97\u662f <code>git</code> \u7684\u7075\u9b42\u4e4b\u4e00\uff0c\u5f53\u7136\u5e76\u4e0d\u5c5e\u4e8e\u975e\u5e38\u57fa\u672c\u7684\u5185\u5bb9\uff0c\u5982\u679c\u4f60\u597d\u5947\u7684\u8bdd\uff0c\u8bf7\u81ea\u884c\u5b66\u4e60\u5e76\u5c1d\u8bd5\u3002</p>"},{"location":"Other/about_git/#_5","title":"\u5ffd\u7565\u6587\u4ef6","text":"<p>\u6211\u4eec\u5e0c\u671b <code>git</code> \u7ba1\u7406\u7684\u5185\u5bb9\u5927\u591a\u662f\u6587\u672c\u5185\u5bb9\uff0c\u800c\u5728\u6211\u4eec\u5b66\u4e60C\u7a0b\u5e8f\u8bbe\u8ba1\u65f6\uff0c\u7ecf\u5e38\u9700\u8981\u6784\u5efa\u4e00\u4e2a\u53ef\u6267\u884c\u7a0b\u5e8f\uff08\u5982 <code>a.out</code>\uff09\uff0c\u5b83\u7684\u7a7a\u95f4\u5360\u7528\u901a\u5e38\u8f83\u5927\u800c\u4e14\u662f\u6ca1\u6709\u5fc5\u8981\u4fdd\u5b58\u5728\u4ed3\u5e93\u4e2d\u7684\u3002</p> <p><code>git</code> \u63d0\u4f9b\u4e86 <code>.gitignore</code> \u5e2e\u52a9\u6211\u4eec\u65b9\u4fbf\u7684\u533a\u5206\u54ea\u4e9b\u6587\u4ef6\u662f\u9700\u8981\u8bb0\u5f55\u4e0e\u8ddf\u8e2a\u7684\uff0c\u5177\u4f53\u5185\u5bb9\u53ef\u4ee5\u67e5\u770b .gitignore\u4ecb\u7ecd\u3002</p> <p>\u4e3e\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u5982\u679c\u6211\u4eec\u4e0d\u5e0c\u671b\u4fdd\u5b58\u6240\u6709 <code>.out</code> \u7ed3\u5c3e\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u4ee5\u53ca\u76ee\u5f55 <code>./site/</code> \u4e0b\u7684\u6240\u6709\u6587\u4ef6\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a</p> .gitignore<pre><code># All files end with '.out'\n*.out\n# All files below 'site'\nsite\n</code></pre> <p><code>.gitignore</code> \u4e2d\u8fd8\u53ef\u4ee5\u901a\u8fc7 <code>!</code> \u6307\u5b9a\u5e0c\u671b\u8ddf\u8e2a\u54ea\u4e9b\u6587\u4ef6\uff0c\u6bd4\u5982\u6211\u4eec\u5e0c\u671b\u4fdd\u5b58 <code>./pics</code> \u76ee\u5f55\u4e0b\u7684\u6240\u6709 <code>.png</code> \u56fe\u7247\uff0c\u800c\u4e0d\u4fdd\u5b58\u5176\u4ed6\u76ee\u5f55\u4e0b\u7684\u56fe\u7247\uff0c\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a</p> .gitignore<pre><code># All of the .png\n*.png\n# But the .png files under pics\n!pics/*.png\n</code></pre> <p>\u4f60\u53ef\u80fd\u9700\u8981\uff1a\u9002\u7528\u4e8eVivado\u5de5\u7a0b\u7684.gitignore\u3002</p> <p>\u4ee5\u4e0a\u5185\u5bb9\u53ea\u662f <code>git</code> \u4f7f\u7528\u7684\u6700\u57fa\u672c\u6307\u4ee4\uff0c\u4f60\u8fd8\u53ef\u4ee5\u5b66\u4e60\u4f7f\u7528 <code>git</code> \u7ba1\u7406\u5de5\u7a0b\u7684\u5de5\u4f5c\u6d41(\u6bd4\u5982 bilibili \u89c6\u9891\u3002\u5982\u679c\u9047\u5230\u95ee\u9898\uff0c\u53ef\u4ee5\u67e5\u770b <code>git</code> \u6587\u6863\u6216 <code>git --help</code> \u67e5\u770b\u5e2e\u52a9\u3002</p>"}]}